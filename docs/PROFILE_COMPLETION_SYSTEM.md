# Profile Completion System - BideshGomon Platform

## Overview
The profile completion system calculates a percentage score (0-100%) based on 12 sections. Both backend and frontend now use the **same calculation logic** for consistency.

---

## Scoring Breakdown (Total: 100 points)

### 1. Basic Information (10 points) âœ… **AUTOMATIC ON REGISTRATION**
- Name + Email verified
- **New users get this automatically**

### 2. Profile Details (10 points) - 5 fields
- Date of Birth
- Gender
- Nationality  
- National ID (NID)
- Present Address Line
- **Scoring**: (Filled fields / 5) Ã— 10

### 3. Education & Qualifications (10 points)
- Add at least 1 education record (SSC/HSC/Bachelor/Masters/etc.)
- **Requirement**: Complete the Education section

### 4. Work Experience (10 points)
- Add at least 1 work experience record
- **Requirement**: Complete the Work Experience section

### 5. Skills & Expertise (10 points)
- Add at least 1 skill
- **Requirement**: Add skills from the Skills section

### 6. Travel History (5 points)
- Add at least 1 travel history record
- **Requirement**: Complete the Travel History section

### 7. Family Information (5 points)
- Add at least 1 family member
- **Requirement**: Complete the Family Members section

### 8. Financial Information (10 points) - 3 fields
- Monthly Income (BDT)
- Employer Name
- Bank Balance (BDT)
- **Scoring**: (Filled fields / 3) Ã— 10

### 9. Language Proficiency (10 points)
- Add at least 1 language proficiency record (IELTS/TOEFL/etc.)
- **Requirement**: Complete the Languages section

### 10. Background & Security (5 points)
- Add security/background information
- **Requirement**: Complete the Security & Background section

### 11. Phone Numbers (5 points)
- Add at least 1 phone number
- **Requirement**: Add phone number in profile

### 12. Passport Information (10 points)
- Add passport number in profile
- **Requirement**: Fill passport number field

---

## New User Journey

### On Registration
- **Automatic Score**: 10% (Name + Email)
- **Initial Status**: Incomplete profile

### To Reach 50% (Minimum for most services)
Complete any 4 of these sections:
1. âœ… Basic Info (automatic) - 10%
2. Profile Details (fill all 5 fields) - 10%
3. Education (add 1 record) - 10%
4. Work Experience (add 1 record) - 10%
5. Passport (add number) - 10%

**Example**: Registration + Profile Details + Education + Work + Passport = **50%**

### To Reach 100% (Complete Profile)
Fill all 12 sections above.

---

## Where Users See Scores

### Dashboard
- Large banner at top showing overall percentage
- Progress bar with 8 milestone steps (Education, Work, Skills, Travel, Family, Financial, Languages, Security)
- Color-coded:
  - ðŸ”´ Red: 0-49%
  - ðŸŸ¡ Yellow: 50-79%
  - ðŸŸ¢ Green: 80-100%

### Profile Edit Page
- Sidebar widget showing:
  - Overall percentage
  - Completed sections count (e.g., "2 of 11 essential fields completed")
  - Progress bar
  - Section-by-section breakdown with icons

### Profile View Page
- Badge showing completion percentage
- Color-coded indicator

---

## Calculation Logic (Synchronized)

### Backend: `app/Models/User.php`
```php
public function calculateProfileCompletion(): int
{
    $completion = 0;
    // ... 12 section checks ...
    return min(100, $completion);
}
```

### Frontend: `resources/js/Composables/useProfileCompletion.js`
```javascript
const calculateCompletion = computed(() => {
    let score = 0;
    const sections = {
        basic: { score: 0, max: 10 },
        profile: { score: 0, max: 10 },
        // ... 10 more sections ...
    };
    // Calculate score for each section
    return { percentage, sections };
});
```

---

## Service Access Requirements

Some services require minimum profile completion:
- **Basic Services**: 30% (e.g., viewing visa requirements)
- **Application Services**: 50% (e.g., visa applications, flight bookings)
- **Premium Services**: 80% (e.g., consultant matching, job placement)

Configured in: `service_modules` table â†’ `min_profile_completion` column

---

## Smart Suggestions

When profile completion is below 100%, users see smart suggestions:
- "Complete your education to increase profile strength"
- "Add work experience for better visa approval chances"
- "Upload passport scan to unlock more features"

Generated by: `app/Services/SmartSuggestionsService.php`

---

## Database Tables Involved

- `users` - Basic info, name, email
- `user_profiles` - Profile details, passport, financial info
- `user_educations` - Education records
- `user_work_experiences` - Work history
- `user_skill` (pivot) - Skills
- `user_travel_history` - Travel records
- `user_family_members` - Family info
- `user_languages` - Language proficiency
- `user_security_information` - Background checks
- `user_phone_numbers` - Contact numbers

---

## How to Test Locally

1. **New User Registration**:
   ```
   Visit: http://localhost:8000/register
   After registration: Should show 10% (name + email)
   ```

2. **Add Profile Details**:
   ```
   Visit: http://localhost:8000/profile/edit
   Fill: DOB, Gender, Nationality, NID, Address
   Score should increase by up to 10%
   ```

3. **Add Education**:
   ```
   Click "Add Education" button
   Fill degree, institution, dates
   Save - Score increases by 10%
   ```

4. **Continue with other sections** until desired percentage

---

## Known Issues Fixed

âœ… **Fixed**: Dashboard showed 50% while Profile Edit showed 18%  
   - **Cause**: Frontend only checked 3 sections (11 fields)
   - **Solution**: Aligned frontend to match backend's 12-section system

âœ… **Fixed**: New users couldn't see how to get initial score  
   - **Solution**: Name + Email now automatically grants 10%

---

## Future Enhancements

- [ ] Weighted sections (critical fields worth more)
- [ ] Bonus points for verified documents
- [ ] Profile quality score (separate from completion)
- [ ] Section-specific progress tracking
- [ ] Gamification (badges for milestones)

---

**Last Updated**: November 30, 2025  
**Version**: 1.0  
**Applies to**: Local & Production environments
