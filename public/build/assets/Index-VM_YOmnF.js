import{u as R,c as r,f as n,g as o,i as M,j as f,a as t,t as a,m as $,p as v,x as F,v as L,o as i,F as m,q as y,n as N,z as u,k as p,y as V,l as B,A as _}from"./vendor-DUGSf9MG.js";import{A as H}from"./AdminLayout-CRJ9cJUr.js";import{u as P}from"./useBangladeshFormat-DxO2X-Ux.js";import{h as U,H as D,E as w,f as b,l as E,a8 as O}from"./heroicons-BVxQTyTq.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";import"./DateInput-BOMF3vob.js";const z={class:"py-12"},q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},I={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},G={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},J={class:"p-6"},K={class:"flex items-center"},Q={class:"flex-shrink-0 bg-blue-500 rounded-md p-3"},W={class:"ml-4"},X={class:"text-2xl font-semibold text-gray-900"},Y={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Z={class:"p-6"},tt={class:"flex items-center"},et={class:"flex-shrink-0 bg-yellow-500 rounded-md p-3"},st={class:"ml-4"},ot={class:"text-2xl font-semibold text-gray-900"},at={class:"text-xs text-gray-400"},dt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},it={class:"p-6"},rt={class:"flex items-center"},nt={class:"flex-shrink-0 bg-green-500 rounded-md p-3"},lt={class:"ml-4"},ct={class:"text-2xl font-semibold text-gray-900"},xt={class:"text-xs text-gray-400"},mt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ut={class:"p-6"},pt={class:"flex items-center"},gt={class:"flex-shrink-0 bg-purple-500 rounded-md p-3"},ht={class:"ml-4"},ft={class:"text-2xl font-semibold text-gray-900"},vt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},yt={class:"p-6"},_t={class:"flex-1 min-w-[200px]"},wt={class:"relative"},bt={class:"w-48"},kt={class:"flex space-x-2"},St=["disabled"],At={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},jt={class:"p-6"},Ct={key:0},Tt={class:"overflow-x-auto"},Rt={class:"min-w-full divide-y divide-gray-200"},Mt={class:"bg-white divide-y divide-gray-200"},$t={class:"px-6 py-4 whitespace-nowrap"},Ft={class:"flex items-center"},Lt={class:"text-sm font-medium text-gray-900"},Nt={class:"text-sm text-gray-500"},Vt={class:"px-6 py-4"},Bt={class:"text-sm text-gray-900"},Ht={class:"text-xs text-gray-500"},Pt={class:"px-6 py-4 whitespace-nowrap"},Ut={class:"text-sm font-semibold text-gray-900"},Dt={class:"px-6 py-4 whitespace-nowrap"},Et={key:0,class:"text-xs text-red-600 mt-1"},Ot={class:"px-6 py-4 whitespace-nowrap"},zt={class:"text-sm text-gray-500"},qt={class:"text-xs text-gray-400"},It={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Gt={key:0,class:"flex space-x-2"},Jt=["onClick"],Kt=["onClick"],Qt={key:1,class:"text-gray-400"},Wt={class:"mt-6 flex items-center justify-between"},Xt={class:"text-sm text-gray-700"},Yt={class:"flex space-x-2"},Zt=["innerHTML"],te={key:1,class:"text-center py-12"},ee={class:"mt-2 text-sm text-gray-500"},xe={__name:"Index",props:{rewards:Object,filters:Object,globalStats:{type:Object,default:()=>({totalRewards:0,pendingCount:0,pendingAmount:0,approvedCount:0,approvedAmount:0,totalAmount:0})}},setup(d){const g=d,{formatCurrency:c,formatDate:k,formatTime:S}=P(),l=R({search:g.filters.search||"",status:g.filters.status||""}),h=()=>{l.get(route("admin.rewards.index"),{preserveState:!0,preserveScroll:!0})},A=()=>{l.reset(),h()},j=x=>{confirm("Are you sure you want to approve this reward? This will credit the user's wallet.")&&_.post(route("admin.rewards.approve",x),{},{preserveScroll:!0,onSuccess:()=>{}})},C=x=>{const s=prompt("Enter rejection reason (optional):");s!==null&&_.post(route("admin.rewards.reject",x),{reason:s},{preserveScroll:!0,onSuccess:()=>{}})};return(x,s)=>(i(),r(m,null,[n(o(M),{title:"Reward Management"}),n(H,null,{header:f(()=>[...s[2]||(s[2]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Reward Management ",-1)])]),default:f(()=>[t("div",z,[t("div",q,[t("div",I,[t("div",G,[t("div",J,[t("div",K,[t("div",Q,[n(o(U),{class:"h-6 w-6 text-white"})]),t("div",W,[s[3]||(s[3]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Rewards",-1)),t("p",X,a(d.globalStats.totalRewards),1)])])])]),t("div",Y,[t("div",Z,[t("div",tt,[t("div",et,[n(o(D),{class:"h-6 w-6 text-white"})]),t("div",st,[s[4]||(s[4]=t("p",{class:"text-sm font-medium text-gray-500"},"Pending",-1)),t("p",ot,a(d.globalStats.pendingCount),1),t("p",at,a(o(c)(d.globalStats.pendingAmount)),1)])])])]),t("div",dt,[t("div",it,[t("div",rt,[t("div",nt,[n(o(w),{class:"h-6 w-6 text-white"})]),t("div",lt,[s[5]||(s[5]=t("p",{class:"text-sm font-medium text-gray-500"},"Approved",-1)),t("p",ct,a(d.globalStats.approvedCount),1),t("p",xt,a(o(c)(d.globalStats.approvedAmount)),1)])])])]),t("div",mt,[t("div",ut,[t("div",pt,[t("div",gt,[n(o(b),{class:"h-6 w-6 text-white"})]),t("div",ht,[s[6]||(s[6]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Paid",-1)),t("p",ft,a(o(c)(d.globalStats.totalAmount)),1)])])])])]),t("div",vt,[t("div",yt,[t("form",{onSubmit:$(h,["prevent"]),class:"flex flex-wrap gap-4 items-end"},[t("div",_t,[s[7]||(s[7]=t("label",{for:"search",class:"block text-sm font-medium text-gray-700 mb-1"}," Search ",-1)),t("div",wt,[v(t("input",{id:"search","onUpdate:modelValue":s[0]||(s[0]=e=>o(l).search=e),type:"text",placeholder:"Search by user name or email...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[F,o(l).search]]),n(o(E),{class:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})])]),t("div",bt,[s[9]||(s[9]=t("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-1"}," Status ",-1)),v(t("select",{id:"status","onUpdate:modelValue":s[1]||(s[1]=e=>o(l).status=e),class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"},[...s[8]||(s[8]=[t("option",{value:""},"All Statuses",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"approved"},"Approved",-1),t("option",{value:"rejected"},"Rejected",-1),t("option",{value:"paid"},"Paid",-1)])],512),[[L,o(l).status]])]),t("div",kt,[t("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:o(l).processing}," Search ",8,St),t("button",{type:"button",onClick:A,class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300"}," Clear ")])],32)])]),t("div",At,[t("div",jt,[d.rewards.data.length>0?(i(),r("div",Ct,[t("div",Tt,[t("table",Rt,[s[12]||(s[12]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"User"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Created"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",Mt,[(i(!0),r(m,null,y(d.rewards.data,e=>(i(),r("tr",{key:e.id},[t("td",$t,[t("div",Ft,[t("div",null,[t("div",Lt,a(e.user?.name),1),t("div",Nt,a(e.user?.email),1)])])]),t("td",Vt,[t("div",Bt,a(e.type),1),t("div",Ht,a(e.description),1)]),t("td",Pt,[t("div",Ut,a(o(c)(e.amount)),1)]),t("td",Dt,[t("span",{class:u([{"bg-green-100 text-green-800":e.status==="approved"||e.status==="paid","bg-yellow-100 text-yellow-800":e.status==="pending","bg-red-100 text-red-800":e.status==="rejected"},"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},a(e.status.charAt(0).toUpperCase()+e.status.slice(1)),3),e.status==="rejected"&&e.metadata?.rejection_reason?(i(),r("div",Et,a(e.metadata.rejection_reason),1)):N("",!0)]),t("td",Ot,[t("div",zt,[p(a(o(k)(e.created_at))+" ",1),t("div",qt,a(o(S)(e.created_at)),1)])]),t("td",It,[e.status==="pending"?(i(),r("div",Gt,[t("button",{onClick:T=>j(e.id),class:"text-green-600 hover:text-green-900 flex items-center"},[n(o(w),{class:"h-5 w-5 mr-1"}),s[10]||(s[10]=p(" Approve ",-1))],8,Jt),t("button",{onClick:T=>C(e.id),class:"text-red-600 hover:text-red-900 flex items-center"},[n(o(O),{class:"h-5 w-5 mr-1"}),s[11]||(s[11]=p(" Reject ",-1))],8,Kt)])):(i(),r("span",Qt," No actions "))])]))),128))])])]),t("div",Wt,[t("div",Xt," Showing "+a(d.rewards.from)+" to "+a(d.rewards.to)+" of "+a(d.rewards.total)+" rewards ",1),t("div",Yt,[(i(!0),r(m,null,y(d.rewards.links,e=>(i(),r(m,{key:e.label},[e.url?(i(),V(o(B),{key:0,href:e.url,class:u([{"bg-indigo-600 text-white":e.active,"bg-white text-gray-700 hover:bg-gray-50":!e.active},"px-3 py-2 border rounded-md text-sm"]),innerHTML:e.label},null,8,["href","class","innerHTML"])):(i(),r("span",{key:1,class:u([{"bg-indigo-600 text-white":e.active,"bg-white text-gray-700":!e.active},"px-3 py-2 border rounded-md text-sm opacity-50 cursor-not-allowed"]),innerHTML:e.label},null,10,Zt))],64))),128))])])])):(i(),r("div",te,[n(o(b),{class:"mx-auto h-16 w-16 text-gray-400"}),s[13]||(s[13]=t("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"No rewards found",-1)),t("p",ee,a(d.filters.search||d.filters.status?"Try adjusting your filters":"Rewards will appear here when users make referrals"),1)]))])])])])]),_:1})],64))}};export{xe as default};
