import{K as X,r as $,u as I,B as w,c as d,f as x,g as a,i as E,j as B,a as e,l as D,t as s,p as r,n as y,o as i,F as p,q as C,z as j,y as M,k as S,x as f,v as N,s as L,C as V}from"./vendor-DUGSf9MG.js";import{_ as O}from"./AuthenticatedLayout-DdydbOmd.js";import{a as z,af as W,E as A,aq as Y,ay as G,q as K}from"./heroicons-BVxQTyTq.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";const R={class:"min-h-screen bg-gray-50 pb-20"},H={class:"bg-sky-600 text-white px-4 pt-6 pb-24"},J={class:"max-w-4xl mx-auto"},Q={class:"text-sky-100"},Z={class:"max-w-4xl mx-auto px-4 -mt-16 space-y-4"},ee={class:"bg-white rounded-2xl p-5 shadow-xl mb-4"},te={class:"flex items-center justify-between mb-4"},se={class:"flex items-center space-x-3"},oe={class:"bg-sky-100 p-2 rounded-lg"},le={class:"text-sky-700 font-bold text-sm"},ae={class:"font-semibold text-gray-900"},ne={class:"text-xs text-gray-500"},re={class:"text-right"},ie={class:"text-xl font-bold text-sky-600"},de={class:"flex items-center justify-between mb-3"},ce={class:"text-center flex-1"},ue={class:"text-2xl font-bold text-gray-900"},xe={class:"text-xs text-gray-600"},me={class:"text-xs text-gray-500"},ge={class:"flex-1 flex flex-col items-center"},be={class:"text-xs text-gray-500 mt-1"},fe={key:0,class:"text-xs text-green-600 font-medium mt-1"},ye={class:"text-center flex-1"},pe={class:"text-2xl font-bold text-gray-900"},ve={class:"text-xs text-gray-600"},_e={class:"text-xs text-gray-500"},he={class:"pt-3 border-t border-gray-100 flex items-center justify-between text-sm"},ke={class:"font-semibold text-gray-900"},we={class:"pt-2 flex items-center justify-between text-sm"},Be={class:"font-semibold text-gray-900"},Ce={class:"pt-2 flex items-center justify-between text-sm"},je={class:"font-semibold text-gray-900 capitalize"},Se={class:"bg-white rounded-2xl p-4 shadow-lg mb-4"},Ve={class:"flex items-center justify-between"},Ue={class:"flex items-center space-x-2"},Pe={key:1},Fe={class:"bg-white rounded-2xl p-6 shadow-lg"},qe={class:"text-xl font-bold text-gray-900 mb-4 flex items-center"},De={class:"text-sm font-semibold text-gray-700 mb-3"},Ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ae=["onUpdate:modelValue"],Te=["onUpdate:modelValue"],Xe=["onUpdate:modelValue"],$e=["onUpdate:modelValue"],Ie={class:"mt-6 p-4 bg-gray-50 rounded-xl"},Ee={class:"space-y-3"},Me={class:"flex items-center justify-between"},Le={class:"flex items-center space-x-3"},Oe={class:"text-sm font-semibold text-gray-900"},ze={class:"flex items-center justify-between"},We=["value"],Ye={class:"bg-white rounded-2xl p-6 shadow-lg"},Ge={class:"space-y-4"},Ke={class:"space-y-4"},Re={class:"bg-white rounded-2xl p-6 shadow-lg"},He={class:"space-y-3"},Je={class:"flex justify-between text-sm"},Qe={class:"text-gray-600"},Ze={class:"font-semibold text-gray-900"},et={class:"flex justify-between text-sm"},tt={class:"font-semibold text-gray-900"},st={class:"flex justify-between text-sm"},ot={class:"font-semibold text-gray-900"},lt={key:0,class:"flex justify-between text-sm"},at={class:"text-gray-600"},nt={class:"font-semibold text-gray-900"},rt={key:1,class:"flex justify-between text-sm"},it={class:"text-gray-600"},dt={class:"font-semibold text-gray-900"},ct={class:"pt-3 border-t-2 border-gray-200 flex justify-between"},ut={class:"text-2xl font-bold text-sky-600"},xt={class:"bg-white rounded-2xl p-6 shadow-lg"},mt={class:"text-xl font-bold text-gray-900 mb-4 flex items-center"},gt={class:"p-4 bg-sky-50 dark:bg-sky-900/20 rounded-xl mb-4"},bt={class:"flex items-center justify-between"},ft={class:"text-2xl font-bold text-gray-900"},yt={key:0,class:"p-4 bg-red-50 border border-red-200 rounded-xl mb-4"},pt={class:"flex items-center space-x-2 text-red-700"},vt={class:"text-sm text-red-600 mt-1"},_t={key:1,class:"p-4 bg-green-50 border border-green-200 rounded-xl mb-4"},ht={class:"flex items-center space-x-2 text-green-700"},kt={class:"flex space-x-3"},wt=["disabled"],Ft={__name:"Book",props:{route:Object,travelDate:String,passengers:Number,flightClass:String,pricing:Object},setup(l){const g=l,v=X(),c=$(1),n=I({flight_route_id:g.route.id,travel_date:g.travelDate,flight_class:g.flightClass,passengers_count:g.passengers,passengers:Array.from({length:g.passengers},()=>({name:"",passport_number:"",age:"",gender:"male"})),contact_name:v.props.auth.user.name||"",contact_email:v.props.auth.user.email||"",contact_phone:"",special_requests:"",selected_seats:[],extra_baggage_count:0,meal_preferences:[],add_insurance:!1}),u=m=>"à§³ "+Number(m).toLocaleString("en-BD",{minimumFractionDigits:0}),U=m=>new Date("1970-01-01T"+m).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),_=w(()=>{let m=g.pricing.total_amount;return n.extra_baggage_count>0&&(m+=n.extra_baggage_count*2e3),n.add_insurance&&(m+=g.passengers*1500),m}),h=w(()=>v.props.auth.user.wallet?.balance||0),k=w(()=>h.value>=_.value),P=()=>{if(c.value===1&&!n.passengers.every(t=>t.name&&t.passport_number&&t.age&&t.gender)){alert("Please fill all passenger details");return}if(c.value===2&&(!n.contact_name||!n.contact_email||!n.contact_phone)){alert("Please fill all contact details");return}c.value++},F=()=>{c.value--},T=()=>{if(!k.value){alert("Insufficient wallet balance. Please add funds first.");return}n.post(route("flight-booking.book"),{preserveScroll:!0})};return(m,t)=>(i(),d(p,null,[x(a(E),{title:`Book Flight - ${l.route.route_name}`},null,8,["title"]),x(O,null,{default:B(()=>[e("div",R,[e("div",H,[e("div",J,[x(a(D),{href:l.route("flight-booking.index"),class:"inline-flex items-center space-x-2 text-sky-100 hover:text-white mb-4 touch-manipulation"},{default:B(()=>[x(a(z),{class:"h-5 w-5"}),t[6]||(t[6]=e("span",{class:"text-sm font-medium"},"Back to Search",-1))]),_:1},8,["href"]),t[7]||(t[7]=e("h1",{class:"text-2xl font-bold mb-2"},"Complete Your Booking",-1)),e("p",Q,s(l.route.origin_city)+" â†’ "+s(l.route.destination_city),1)])]),e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[e("div",oe,[e("span",le,s(l.route.airline_code),1)]),e("div",null,[e("div",ae,s(l.route.airline_name),1),e("div",ne,s(l.route.flight_number)+" â€¢ "+s(l.route.aircraft_type),1)])]),e("div",re,[e("div",ie,s(u(l.pricing.base_fare)),1),t[8]||(t[8]=e("div",{class:"text-xs text-gray-500"},"per person",-1))])]),e("div",de,[e("div",ce,[e("div",ue,s(l.route.origin_airport_code),1),e("div",xe,s(U(l.route.departure_time)),1),e("div",me,s(l.route.origin_city),1)]),e("div",ge,[x(a(W),{class:"h-5 w-5 text-gray-400"}),e("div",be,s(l.route.flight_duration),1),l.route.is_direct?(i(),d("div",fe,"Direct")):y("",!0)]),e("div",ye,[e("div",pe,s(l.route.destination_airport_code),1),e("div",ve,s(U(l.route.arrival_time)),1),e("div",_e,s(l.route.destination_city),1)])]),e("div",he,[t[9]||(t[9]=e("span",{class:"text-gray-600"},"Travel Date:",-1)),e("span",ke,s(new Date(l.travelDate).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})),1)]),e("div",we,[t[10]||(t[10]=e("span",{class:"text-gray-600"},"Passengers:",-1)),e("span",Be,s(l.passengers),1)]),e("div",Ce,[t[11]||(t[11]=e("span",{class:"text-gray-600"},"Class:",-1)),e("span",je,s(l.flightClass.replace("_"," ")),1)])]),e("div",Se,[e("div",Ve,[(i(),d(p,null,C(3,o=>e("div",{key:o,class:"flex-1 flex items-center"},[e("div",Ue,[e("div",{class:j(["w-8 h-8 rounded-full flex items-center justify-center font-semibold text-sm",c.value>=o?"bg-sky-600 text-white":"bg-gray-200 text-gray-500"])},[c.value>o?(i(),M(a(A),{key:0,class:"h-5 w-5"})):(i(),d("span",Pe,s(o),1))],2),e("span",{class:j(["text-sm font-medium hidden sm:inline",c.value>=o?"text-gray-900":"text-gray-500"])},s(o===1?"Passengers":o===2?"Contact":"Payment"),3)]),o<3?(i(),d("div",{key:0,class:j(["flex-1 h-1 mx-2",c.value>o?"bg-sky-600":"bg-gray-200"])},null,2)):y("",!0)])),64))])]),r(e("div",Fe,[e("h2",qe,[x(a(Y),{class:"h-6 w-6 mr-2 text-sky-600"}),t[12]||(t[12]=S(" Passenger Information ",-1))]),(i(!0),d(p,null,C(a(n).passengers,(o,q)=>(i(),d("div",{key:q,class:"mb-6 pb-6 border-b border-gray-100 last:border-0"},[e("h3",De,"Passenger "+s(q+1),1),e("div",Ne,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Full Name *",-1)),r(e("input",{"onUpdate:modelValue":b=>o.name=b,type:"text",class:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-sky-500 focus:ring-0",placeholder:"As per passport",required:""},null,8,Ae),[[f,o.name]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Passport Number *",-1)),r(e("input",{"onUpdate:modelValue":b=>o.passport_number=b,type:"text",class:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-sky-500 focus:ring-0",placeholder:"ABC123456",required:""},null,8,Te),[[f,o.passport_number]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Age *",-1)),r(e("input",{"onUpdate:modelValue":b=>o.age=b,type:"number",min:"1",max:"120",class:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-sky-500 focus:ring-0",required:""},null,8,Xe),[[f,o.age]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gender *",-1)),r(e("select",{"onUpdate:modelValue":b=>o.gender=b,class:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-sky-500 focus:ring-0"},[...t[16]||(t[16]=[e("option",{value:"male"},"Male",-1),e("option",{value:"female"},"Female",-1)])],8,$e),[[N,o.gender]])])])]))),128)),e("div",Ie,[t[21]||(t[21]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-3"},"Add-ons (Optional)",-1)),e("div",Ee,[e("div",Me,[e("label",Le,[r(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=o=>a(n).add_insurance=o),class:"w-5 h-5 text-sky-600 border-gray-300 rounded focus:ring-sky-500"},null,512),[[L,a(n).add_insurance]]),t[18]||(t[18]=e("span",{class:"text-sm text-gray-700"},"Travel Insurance (à§³1,500 per passenger)",-1))]),e("span",Oe,s(u(l.passengers*1500)),1)]),e("div",ze,[t[20]||(t[20]=e("label",{class:"text-sm text-gray-700"},"Extra Baggage (à§³2,000 per 5kg)",-1)),r(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>a(n).extra_baggage_count=o),class:"px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-sky-500 focus:ring-0 text-sm"},[t[19]||(t[19]=e("option",{value:0},"None",-1)),(i(),d(p,null,C(5,o=>e("option",{key:o,value:o},s(o)+" Ã— 5kg",9,We)),64))],512),[[N,a(n).extra_baggage_count]])])])]),e("button",{onClick:P,class:"w-full mt-6 bg-sky-600 text-white py-4 rounded-xl font-semibold hover:bg-sky-700 transition-all"}," Continue to Contact Details ")],512),[[V,c.value===1]]),r(e("div",Ye,[t[26]||(t[26]=e("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Contact Information",-1)),e("div",Ge,[e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Contact Name *",-1)),r(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>a(n).contact_name=o),type:"text",class:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-sky-500 focus:ring-0",required:""},null,512),[[f,a(n).contact_name]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email Address *",-1)),r(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>a(n).contact_email=o),type:"email",class:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-sky-500 focus:ring-0",required:""},null,512),[[f,a(n).contact_email]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Phone Number *",-1)),r(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>a(n).contact_phone=o),type:"tel",class:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-sky-500 focus:ring-0",placeholder:"+880 1XXX-XXXXXX",required:""},null,512),[[f,a(n).contact_phone]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Special Requests (Optional)",-1)),r(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>a(n).special_requests=o),rows:"3",class:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-sky-500 focus:ring-0",placeholder:"e.g., Wheelchair assistance, special meal, etc."},null,512),[[f,a(n).special_requests]])])]),e("div",{class:"flex space-x-3 mt-6"},[e("button",{onClick:F,class:"flex-1 bg-gray-200 text-gray-700 py-4 rounded-xl font-semibold hover:bg-gray-300 transition-all"}," Back "),e("button",{onClick:P,class:"flex-1 bg-sky-600 text-white py-4 rounded-xl font-semibold hover:bg-sky-700 transition-all"}," Continue to Payment ")])],512),[[V,c.value===2]]),r(e("div",Ke,[e("div",Re,[t[30]||(t[30]=e("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Price Breakdown",-1)),e("div",He,[e("div",Je,[e("span",Qe,"Base Fare ("+s(l.passengers)+" Ã— "+s(u(l.pricing.base_fare))+")",1),e("span",Ze,s(u(l.pricing.subtotal)),1)]),e("div",et,[t[27]||(t[27]=e("span",{class:"text-gray-600"},"Taxes & Fees",-1)),e("span",tt,s(u(l.pricing.taxes_fees)),1)]),e("div",st,[t[28]||(t[28]=e("span",{class:"text-gray-600"},"Booking Fee",-1)),e("span",ot,s(u(l.pricing.booking_fee)),1)]),a(n).extra_baggage_count>0?(i(),d("div",lt,[e("span",at,"Extra Baggage ("+s(a(n).extra_baggage_count)+" Ã— à§³2,000)",1),e("span",nt,s(u(a(n).extra_baggage_count*2e3)),1)])):y("",!0),a(n).add_insurance?(i(),d("div",rt,[e("span",it,"Travel Insurance ("+s(l.passengers)+" Ã— à§³1,500)",1),e("span",dt,s(u(l.passengers*1500)),1)])):y("",!0),e("div",ct,[t[29]||(t[29]=e("span",{class:"font-bold text-gray-900"},"Total Amount",-1)),e("span",ut,s(u(_.value)),1)])])]),e("div",xt,[e("h2",mt,[x(a(G),{class:"h-6 w-6 mr-2 text-sky-600"}),t[31]||(t[31]=S(" Payment Method ",-1))]),e("div",gt,[e("div",bt,[e("div",null,[t[32]||(t[32]=e("div",{class:"text-sm text-gray-600"},"Wallet Balance",-1)),e("div",ft,s(u(h.value)),1)]),t[33]||(t[33]=e("div",{class:"bg-white p-3 rounded-lg"}," ðŸ’³ ",-1))])]),k.value?(i(),d("div",_t,[e("div",ht,[x(a(A),{class:"h-5 w-5"}),t[36]||(t[36]=e("span",{class:"text-sm font-medium"},"Sufficient Balance Available",-1))])])):(i(),d("div",yt,[e("div",pt,[x(a(K),{class:"h-5 w-5"}),t[34]||(t[34]=e("span",{class:"text-sm font-medium"},"Insufficient Balance",-1))]),e("p",vt," You need "+s(u(_.value-h.value))+" more to complete this booking. ",1),x(a(D),{href:l.route("wallet.index"),class:"inline-block mt-3 text-sm font-semibold text-red-700 hover:text-red-800 underline"},{default:B(()=>[...t[35]||(t[35]=[S(" Add Funds to Wallet â†’ ",-1)])]),_:1},8,["href"])]))]),e("div",kt,[e("button",{onClick:F,class:"flex-1 bg-gray-200 text-gray-700 py-4 rounded-xl font-semibold hover:bg-gray-300 transition-all"}," Back "),e("button",{onClick:T,disabled:!k.value||a(n).processing,class:"flex-1 bg-sky-600 hover:bg-sky-700 text-white py-4 rounded-xl font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed"},s(a(n).processing?"Processing...":"Confirm Booking"),9,wt)])],512),[[V,c.value===3]])])])]),_:1})],64))}};export{Ft as default};
