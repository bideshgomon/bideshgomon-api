import{r as f,u as j,w as M,c as n,f as C,g as o,i as I,j as q,a as e,l as T,k as A,m as P,n as u,p as d,o as l,F as v,q as b,t as r,v as _,s as c,x as S}from"./vendor-DUGSf9MG.js";import{A as L}from"./AdminLayout-CRJ9cJUr.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";import"./heroicons-BVxQTyTq.js";import"./DateInput-BOMF3vob.js";import"./useBangladeshFormat-DxO2X-Ux.js";const D={class:"py-8"},E={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},G={class:"mb-8"},R={class:"flex items-center justify-between"},z={class:"bg-white rounded-lg shadow"},H={class:"p-6 space-y-6"},J=["value"],K={key:0,class:"mt-1 text-sm text-red-600"},O={class:"mb-4"},Q={class:"flex items-start"},W={class:"flex items-center h-5"},X={class:"block text-sm font-medium text-gray-700 mb-2"},Y=["value"],Z={key:1,class:"border border-gray-300 rounded-md max-h-60 overflow-y-auto p-3 bg-white"},$=["id","value"],ee=["for"],se={class:"text-gray-500"},te={key:2,class:"mt-2 text-sm text-gray-600"},ie={key:3,class:"mt-1 text-sm text-red-600"},oe={key:0},ne={class:"mb-4"},le={class:"flex items-start"},re={class:"flex items-center h-5"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ae={class:"block text-sm font-medium text-gray-700 mb-2"},ue=["required"],me=["value"],ge={key:1,class:"border border-gray-300 rounded-md max-h-60 overflow-y-auto p-3 bg-white"},ce=["id","value"],pe=["for"],ye={key:2,class:"mt-2 text-sm text-gray-600"},ve={key:3,class:"mt-1 text-sm text-red-600"},xe={key:0,class:"md:col-span-2"},fe=["required"],be=["value"],_e={key:0,class:"mt-1 text-sm text-red-600"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},we={key:0},Ce={key:1},Ae={class:"space-y-4"},Se={class:"flex items-start"},Ve={class:"flex items-center h-5"},he={class:"flex items-start"},qe={class:"flex items-center h-5"},Ue={class:"flex items-start"},Me={class:"flex items-center h-5"},Te={class:"mt-4"},Fe={class:"flex items-start"},Be={class:"flex items-center h-5"},Ne={class:"bg-gray-50 px-6 py-4 flex justify-end space-x-3 rounded-b-lg"},je=["disabled"],Je={__name:"Create",props:{agencies:Array,serviceModules:Array,countries:Array,visaTypes:Array},setup(p){const V=p,h=f(""),x=f([]),y=f(!1),w=f(""),g=f([]),m=f(!1),i=j({agency_id:"",service_module_id:"",service_module_ids:[],country_ids:[],country_id:"",country:"",country_code:"",visa_type_id:"",visa_type:"",assignment_scope:"visa_specific",platform_commission_rate:15,commission_type:"percentage",fixed_commission_amount:null,can_edit_requirements:!0,can_set_fees:!0,can_process_applications:!0,assignment_notes:"",auto_assign_requirements:!0});M(m,a=>{a?(w.value="",i.service_module_id=""):(g.value=[],i.service_module_ids=[])}),M(g,a=>{m.value&&U()});const F=()=>{if(y.value)i.country_ids=x.value,i.country_id="",i.country="",i.country_code="";else{const a=V.countries.find(s=>s.id===parseInt(h.value));a&&(i.country=a.name,i.country_code=a.iso_code_2,i.country_id=a.id,i.country_ids=[])}},U=()=>{if(m.value)i.service_module_ids=g.value,i.service_module_id="";else{const a=V.serviceModules.find(s=>s.id===parseInt(w.value));a&&(i.service_module_id=a.id,i.service_module_ids=[],(a.service_type==="premade"||a.service_type==="api_based")&&(i.assignment_scope="global"))}},B=a=>{const s=a.target.value,t=V.visaTypes.find(k=>k.id===parseInt(s));t&&(i.visa_type_id=t.id,i.visa_type=t.name)},N=()=>{y.value?i.country_ids=x.value:i.country_ids=[],m.value?i.service_module_ids=g.value:i.service_module_ids=[],i.post(route("admin.agency-assignments.store"))};return(a,s)=>(l(),n(v,null,[C(o(I),{title:"Assign Agency to Country"}),C(L,null,{default:q(()=>[e("div",D,[e("div",E,[e("div",G,[e("div",R,[s[19]||(s[19]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Assign Agency to Country"),e("p",{class:"mt-2 text-gray-600"},"Set up agency management for visa applications")],-1)),C(o(T),{href:a.route("admin.agency-assignments.index"),class:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition"},{default:q(()=>[...s[18]||(s[18]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),A(" Back to List ",-1)])]),_:1},8,["href"])])]),e("div",z,[e("form",{onSubmit:P(N,["prevent"])},[e("div",H,[e("div",null,[s[22]||(s[22]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Select Agency",-1)),e("div",null,[s[21]||(s[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Agency *",-1)),d(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>o(i).agency_id=t),required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[s[20]||(s[20]=e("option",{value:""},"Select an agency",-1)),(l(!0),n(v,null,b(p.agencies,t=>(l(),n("option",{key:t.id,value:t.id},r(t.name)+" ("+r(t.email)+") ",9,J))),128))],512),[[_,o(i).agency_id]]),o(i).errors.agency_id?(l(),n("p",K,r(o(i).errors.agency_id),1)):u("",!0)])]),e("div",null,[s[25]||(s[25]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Select Service",-1)),e("div",O,[e("div",Q,[e("div",W,[d(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>m.value=t),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[c,m.value]])]),s[23]||(s[23]=e("div",{class:"ml-3"},[e("label",{class:"font-medium text-gray-900"},"Assign multiple services at once"),e("p",{class:"text-sm text-gray-500"},"Select multiple services to create bulk assignments with same settings")],-1))])]),e("div",null,[e("label",X,r(m.value?"Service Modules *":"Service Module *"),1),m.value?(l(),n("div",Z,[(l(!0),n(v,null,b(p.serviceModules,t=>(l(),n("div",{key:t.id,class:"flex items-center mb-2"},[d(e("input",{id:"service-"+t.id,"onUpdate:modelValue":s[3]||(s[3]=k=>g.value=k),value:t.id,type:"checkbox",class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,$),[[c,g.value]]),e("label",{for:"service-"+t.id,class:"ml-2 text-sm text-gray-700"},[A(r(t.name)+" ",1),e("span",se,"("+r(t.service_type)+")",1)],8,ee)]))),128))])):d((l(),n("select",{key:0,"onUpdate:modelValue":s[2]||(s[2]=t=>w.value=t),onChange:U,required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[s[24]||(s[24]=e("option",{value:""},"Select a service",-1)),(l(!0),n(v,null,b(p.serviceModules,t=>(l(),n("option",{key:t.id,value:t.id},r(t.name)+" ("+r(t.service_type)+") ",9,Y))),128))],544)),[[_,w.value]]),m.value&&g.value.length>0?(l(),n("p",te,r(g.value.length)+" services selected ",1)):u("",!0),o(i).errors.service_module_id?(l(),n("p",ie,r(o(i).errors.service_module_id),1)):u("",!0)])]),e("div",null,[s[29]||(s[29]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Assignment Scope",-1)),e("div",null,[s[27]||(s[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Scope *",-1)),d(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>o(i).assignment_scope=t),required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[...s[26]||(s[26]=[e("option",{value:"global"},"Global (All Countries)",-1),e("option",{value:"country_specific"},"Country Specific",-1),e("option",{value:"visa_specific"},"Visa Type Specific",-1)])],512),[[_,o(i).assignment_scope]]),s[28]||(s[28]=e("p",{class:"mt-1 text-sm text-gray-500"}," Global: Agency handles all applications. Country: Specific to one country. Visa: Specific country + visa type. ",-1))])]),o(i).assignment_scope!=="global"?(l(),n("div",oe,[s[36]||(s[36]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Country & Visa Type",-1)),e("div",ne,[e("div",le,[e("div",re,[d(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>y.value=t),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[c,y.value]])]),s[30]||(s[30]=e("div",{class:"ml-3"},[e("label",{class:"font-medium text-gray-900"},"Assign multiple countries at once"),e("p",{class:"text-sm text-gray-500"},"Select multiple countries to create bulk assignments with same settings")],-1))])]),e("div",de,[e("div",null,[e("label",ae,r(y.value?"Countries *":"Country *"),1),y.value?(l(),n("div",ge,[(l(!0),n(v,null,b(p.countries,t=>(l(),n("div",{key:t.id,class:"flex items-center mb-2"},[d(e("input",{id:"country-"+t.id,"onUpdate:modelValue":s[7]||(s[7]=k=>x.value=k),value:t.id,type:"checkbox",class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,ce),[[c,x.value]]),e("label",{for:"country-"+t.id,class:"ml-2 text-sm text-gray-700"},r(t.name)+" ("+r(t.iso_code_2)+") ",9,pe)]))),128))])):d((l(),n("select",{key:0,"onUpdate:modelValue":s[6]||(s[6]=t=>h.value=t),onChange:F,required:o(i).assignment_scope!=="global",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[s[31]||(s[31]=e("option",{value:""},"Select a country",-1)),(l(!0),n(v,null,b(p.countries,t=>(l(),n("option",{key:t.id,value:t.id},r(t.name)+" ("+r(t.iso_code_2)+") ",9,me))),128))],40,ue)),[[_,h.value]]),y.value&&x.value.length>0?(l(),n("p",ye,r(x.value.length)+" countries selected ",1)):u("",!0),o(i).errors.country?(l(),n("p",ve,r(o(i).errors.country),1)):u("",!0)]),s[35]||(s[35]=A()),e("div",null,[s[32]||(s[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Country Code",-1)),d(e("input",{"onUpdate:modelValue":s[8]||(s[8]=t=>o(i).country_code=t),type:"text",readonly:"",class:"w-full rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[S,o(i).country_code]])]),o(i).assignment_scope==="visa_specific"?(l(),n("div",xe,[s[34]||(s[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visa Type *",-1)),d(e("select",{"onUpdate:modelValue":s[9]||(s[9]=t=>o(i).visa_type_id=t),onChange:B,required:o(i).assignment_scope==="visa_specific",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[s[33]||(s[33]=e("option",{value:""},"Select visa type",-1)),(l(!0),n(v,null,b(p.visaTypes,t=>(l(),n("option",{key:t.id,value:t.id},r(t.name),9,be))),128))],40,fe),[[_,o(i).visa_type_id]]),o(i).errors.visa_type?(l(),n("p",_e,r(o(i).errors.visa_type),1)):u("",!0)])):u("",!0)])])):u("",!0),e("div",null,[s[43]||(s[43]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Commission Settings",-1)),e("div",ke,[e("div",null,[s[38]||(s[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Commission Type *",-1)),d(e("select",{"onUpdate:modelValue":s[10]||(s[10]=t=>o(i).commission_type=t),required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[...s[37]||(s[37]=[e("option",{value:"percentage"},"Percentage",-1),e("option",{value:"fixed"},"Fixed Amount",-1)])],512),[[_,o(i).commission_type]])]),o(i).commission_type==="percentage"?(l(),n("div",we,[s[39]||(s[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Commission Rate (%) *",-1)),d(e("input",{"onUpdate:modelValue":s[11]||(s[11]=t=>o(i).platform_commission_rate=t),type:"number",min:"0",max:"100",step:"0.01",required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., 15"},null,512),[[S,o(i).platform_commission_rate,void 0,{number:!0}]]),s[40]||(s[40]=e("p",{class:"mt-1 text-sm text-gray-500"},"Platform commission on agency earnings",-1))])):u("",!0),o(i).commission_type==="fixed"?(l(),n("div",Ce,[s[41]||(s[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fixed Commission Amount (à§³) *",-1)),d(e("input",{"onUpdate:modelValue":s[12]||(s[12]=t=>o(i).fixed_commission_amount=t),type:"number",min:"0",step:"0.01",required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., 5000"},null,512),[[S,o(i).fixed_commission_amount,void 0,{number:!0}]]),s[42]||(s[42]=e("p",{class:"mt-1 text-sm text-gray-500"},"Fixed amount per application",-1))])):u("",!0)])]),e("div",null,[s[47]||(s[47]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Agency Permissions",-1)),e("div",Ae,[e("div",Se,[e("div",Ve,[d(e("input",{"onUpdate:modelValue":s[13]||(s[13]=t=>o(i).can_edit_requirements=t),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[c,o(i).can_edit_requirements]])]),s[44]||(s[44]=e("div",{class:"ml-3"},[e("label",{class:"font-medium text-gray-900"},"Can Edit Requirements"),e("p",{class:"text-sm text-gray-500"},"Allow agency to modify visa requirements")],-1))]),e("div",he,[e("div",qe,[d(e("input",{"onUpdate:modelValue":s[14]||(s[14]=t=>o(i).can_set_fees=t),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[c,o(i).can_set_fees]])]),s[45]||(s[45]=e("div",{class:"ml-3"},[e("label",{class:"font-medium text-gray-900"},"Can Set Fees"),e("p",{class:"text-sm text-gray-500"},"Allow agency to set their service and processing fees")],-1))]),e("div",Ue,[e("div",Me,[d(e("input",{"onUpdate:modelValue":s[15]||(s[15]=t=>o(i).can_process_applications=t),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[c,o(i).can_process_applications]])]),s[46]||(s[46]=e("div",{class:"ml-3"},[e("label",{class:"font-medium text-gray-900"},"Can Process Applications"),e("p",{class:"text-sm text-gray-500"},"Allow agency to process visa applications")],-1))])])]),e("div",null,[s[50]||(s[50]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Additional Settings",-1)),e("div",null,[s[48]||(s[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Assignment Notes",-1)),d(e("textarea",{"onUpdate:modelValue":s[16]||(s[16]=t=>o(i).assignment_notes=t),rows:"3",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Add any notes about this assignment..."},null,512),[[S,o(i).assignment_notes]])]),e("div",Te,[e("div",Fe,[e("div",Be,[d(e("input",{"onUpdate:modelValue":s[17]||(s[17]=t=>o(i).auto_assign_requirements=t),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[c,o(i).auto_assign_requirements]])]),s[49]||(s[49]=e("div",{class:"ml-3"},[e("label",{class:"font-medium text-gray-900"},"Auto-assign existing requirements"),e("p",{class:"text-sm text-gray-500"},"Automatically assign existing visa requirements for this country to the agency")],-1))])])])]),e("div",Ne,[C(o(T),{href:a.route("admin.agency-assignments.index"),class:"px-4 py-2 bg-white border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition"},{default:q(()=>[...s[51]||(s[51]=[A(" Cancel ",-1)])]),_:1},8,["href"]),e("button",{type:"submit",disabled:o(i).processing,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition disabled:opacity-50"},r(o(i).processing?"Assigning...":"Assign Agency"),9,je)])],32)])])])]),_:1})],64))}};export{Je as default};
