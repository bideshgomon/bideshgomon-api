import{r as j,y as w,j as u,f as m,a as t,g as c,i as B,l as x,k as d,t as o,p as v,c as r,o as i,F as g,q as f,v as _,x as V,z as k,A as h}from"./vendor-DUGSf9MG.js";import{A as S}from"./AdminLayout-CRJ9cJUr.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";import"./heroicons-BVxQTyTq.js";import"./DateInput-BOMF3vob.js";import"./useBangladeshFormat-DxO2X-Ux.js";const T={class:"py-8"},H={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},z={class:"mb-8"},L={class:"flex items-center justify-between"},D={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},N={class:"bg-white rounded-lg shadow p-6"},F={class:"flex items-center"},I={class:"ml-4"},$={class:"text-2xl font-semibold text-gray-900"},U={class:"bg-white rounded-lg shadow p-6"},O={class:"flex items-center"},q={class:"ml-4"},E={class:"text-2xl font-semibold text-gray-900"},P={class:"bg-white rounded-lg shadow p-6"},G={class:"flex items-center"},J={class:"ml-4"},K={class:"text-2xl font-semibold text-gray-900"},Q={class:"bg-white rounded-lg shadow p-6"},R={class:"flex items-center"},W={class:"ml-4"},X={class:"text-2xl font-semibold text-gray-900"},Y={class:"bg-white rounded-lg shadow p-6 mb-6"},Z={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},tt=["value"],et={class:"bg-white rounded-lg shadow overflow-hidden"},st={class:"min-w-full divide-y divide-gray-200"},ot={class:"bg-white divide-y divide-gray-200"},it={class:"px-6 py-4 whitespace-nowrap"},nt={class:"flex items-center"},lt={class:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center"},rt={class:"text-blue-600 font-semibold text-sm"},at={class:"ml-4"},dt={class:"text-sm font-medium text-gray-900"},ct={class:"text-sm text-gray-500"},ut={class:"px-6 py-4 whitespace-nowrap"},mt={class:"text-sm font-medium text-gray-900"},xt={class:"text-sm text-gray-500"},gt={class:"px-6 py-4 whitespace-nowrap"},pt={class:"text-sm text-gray-900"},yt={key:0},vt={key:1},ft={class:"text-xs text-gray-500"},ht={class:"px-6 py-4 whitespace-nowrap"},bt={class:"text-sm text-gray-900"},wt={class:"text-xs text-gray-500"},_t={class:"px-6 py-4 whitespace-nowrap"},kt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},At=["onClick"],Ct=["onClick"],Mt={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},jt={class:"flex items-center justify-between"},Bt={class:"text-sm text-gray-700"},Vt={class:"font-medium"},St={class:"font-medium"},Tt={class:"font-medium"},Ht={class:"flex space-x-2"},zt=["innerHTML"],Lt={key:1,class:"text-center py-12"},Dt={class:"mt-6"},Gt={__name:"Index",props:{assignments:Object,stats:Object,agencies:Array,filters:Object},setup(n){const p=n,a=j({agency_id:p.filters?.agency_id||"",country:p.filters?.country||"",is_active:p.filters?.is_active||""}),y=()=>{h.get(route("admin.agency-assignments.index"),a.value,{preserveState:!0,preserveScroll:!0})},A=l=>{confirm(`Are you sure you want to ${l.is_active?"deactivate":"activate"} this assignment?`)&&h.post(route("admin.agency-assignments.toggle-active",l.id),{},{preserveScroll:!0})},C=l=>{confirm(`Are you sure you want to delete the assignment for ${l.agency.name} - ${l.country}? This will unassign all related visa requirements.`)&&h.delete(route("admin.agency-assignments.destroy",l.id))},b=l=>new Intl.NumberFormat("en-BD").format(l||0);return(l,e)=>(i(),w(S,null,{default:u(()=>[m(c(B),{title:"Agency Country Assignments"}),t("div",T,[t("div",H,[t("div",z,[t("div",L,[e[4]||(e[4]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"Agency Country Assignments"),t("p",{class:"mt-2 text-sm text-gray-600"}," Manage which agencies handle which countries and set platform commission rates ")],-1)),m(c(x),{href:l.route("admin.agency-assignments.create"),class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition duration-150"},{default:u(()=>[...e[3]||(e[3]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),d(" Assign Agency to Country ",-1)])]),_:1},8,["href"])])]),t("div",D,[t("div",N,[t("div",F,[e[6]||(e[6]=t("div",{class:"flex-shrink-0 bg-blue-100 rounded-md p-3"},[t("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",I,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Assignments",-1)),t("p",$,o(n.stats.total_assignments),1)])])]),t("div",U,[t("div",O,[e[8]||(e[8]=t("div",{class:"flex-shrink-0 bg-green-100 rounded-md p-3"},[t("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),t("div",q,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-500"},"Active Assignments",-1)),t("p",E,o(n.stats.active_assignments),1)])])]),t("div",P,[t("div",G,[e[10]||(e[10]=t("div",{class:"flex-shrink-0 bg-purple-100 rounded-md p-3"},[t("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),t("div",J,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-500"},"Active Agencies",-1)),t("p",K,o(n.stats.total_agencies),1)])])]),t("div",Q,[t("div",R,[e[12]||(e[12]=t("div",{class:"flex-shrink-0 bg-yellow-100 rounded-md p-3"},[t("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",W,[e[11]||(e[11]=t("p",{class:"text-sm font-medium text-gray-500"},"Platform Earnings",-1)),t("p",X,"৳"+o(b(n.stats.platform_earnings)),1)])])])]),t("div",Y,[t("div",Z,[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Agency",-1)),v(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.agency_id=s),onChange:y,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[e[13]||(e[13]=t("option",{value:""},"All Agencies",-1)),(i(!0),r(g,null,f(n.agencies,s=>(i(),r("option",{key:s.id,value:s.id},o(s.name),9,tt))),128))],544),[[_,a.value.agency_id]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Country",-1)),v(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.country=s),onInput:y,type:"text",placeholder:"Search by country...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,544),[[V,a.value.country]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),v(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.is_active=s),onChange:y,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[...e[16]||(e[16]=[t("option",{value:""},"All Status",-1),t("option",{value:"1"},"Active",-1),t("option",{value:"0"},"Inactive",-1)])],544),[[_,a.value.is_active]])])])]),t("div",et,[t("table",st,[e[19]||(e[19]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Agency "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Country & Visa Type "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Commission "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Performance "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",ot,[(i(!0),r(g,null,f(n.assignments.data,s=>(i(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",it,[t("div",nt,[t("div",lt,[t("span",rt,o(s.agency.name.substring(0,2).toUpperCase()),1)]),t("div",at,[t("div",dt,o(s.agency.name),1),t("div",ct,o(s.agency.email),1)])])]),t("td",ut,[t("div",mt,o(s.country),1),t("div",xt,o(s.visa_type),1)]),t("td",gt,[t("div",pt,[s.commission_type==="percentage"?(i(),r("span",yt,o(s.platform_commission_rate)+"% ",1)):(i(),r("span",vt," ৳"+o(b(s.fixed_commission_amount)),1))]),t("div",ft,o(s.commission_type),1)]),t("td",ht,[t("div",bt,o(s.total_applications)+" applications",1),t("div",wt,o(s.approval_rate?s.approval_rate.toFixed(1):"0")+"% approval rate ",1)]),t("td",_t,[t("span",{class:k([{"bg-green-100 text-green-800":s.is_active,"bg-gray-100 text-gray-800":!s.is_active},"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},o(s.is_active?"Active":"Inactive"),3)]),t("td",kt,[m(c(x),{href:l.route("admin.agency-assignments.show",s.id),class:"text-blue-600 hover:text-blue-900 mr-3"},{default:u(()=>[...e[18]||(e[18]=[d(" View ",-1)])]),_:1},8,["href"]),t("button",{onClick:M=>A(s),class:"text-yellow-600 hover:text-yellow-900 mr-3"},o(s.is_active?"Deactivate":"Activate"),9,At),t("button",{onClick:M=>C(s),class:"text-red-600 hover:text-red-900"}," Delete ",8,Ct)])]))),128))])]),n.assignments.data.length>0?(i(),r("div",Mt,[t("div",jt,[t("div",Bt,[e[20]||(e[20]=d(" Showing ",-1)),t("span",Vt,o(n.assignments.from),1),e[21]||(e[21]=d(" to ",-1)),t("span",St,o(n.assignments.to),1),e[22]||(e[22]=d(" of ",-1)),t("span",Tt,o(n.assignments.total),1),e[23]||(e[23]=d(" results ",-1))]),t("div",Ht,[(i(!0),r(g,null,f(n.assignments.links,s=>(i(),r(g,{key:s.label},[s.url?(i(),w(c(x),{key:0,href:s.url,class:k([{"bg-blue-600 text-white":s.active,"bg-white text-gray-700 hover:bg-gray-50":!s.active},"px-3 py-2 text-sm font-medium rounded-md border border-gray-300"]),innerHTML:s.label},null,8,["href","class","innerHTML"])):(i(),r("span",{key:1,class:"px-3 py-2 text-sm font-medium rounded-md border border-gray-300 bg-gray-100 text-gray-400 cursor-not-allowed",innerHTML:s.label},null,8,zt))],64))),128))])])])):(i(),r("div",Lt,[e[25]||(e[25]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e[26]||(e[26]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No assignments found",-1)),e[27]||(e[27]=t("p",{class:"mt-1 text-sm text-gray-500"},"Get started by assigning an agency to a country.",-1)),t("div",Dt,[m(c(x),{href:l.route("admin.agency-assignments.create"),class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg"},{default:u(()=>[...e[24]||(e[24]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),d(" Assign Agency ",-1)])]),_:1},8,["href"])])]))])])])]),_:1}))}};export{Gt as default};
