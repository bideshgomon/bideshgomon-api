import{r as k,c as a,f as u,g as m,i as A,j as S,a as t,k as U,p as x,v as f,o,F as p,q as g,t as l,x as b,n as v,z as h,y as V,l as C,A as D}from"./vendor-DUGSf9MG.js";import{A as L}from"./AdminLayout-CRJ9cJUr.js";import{ag as F,i as T,ah as j}from"./heroicons-BVxQTyTq.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";import"./DateInput-BOMF3vob.js";import"./useBangladeshFormat-DxO2X-Ux.js";const N={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 space-y-6"},B={class:"bg-white border border-gray-200 rounded-lg"},E={class:"px-6 py-4 flex items-center justify-between"},I={class:"flex items-center space-x-3"},M={class:"flex-shrink-0"},z={class:"w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center"},H={class:"bg-white rounded-lg border border-gray-200 p-6"},O={class:"flex items-center mb-4"},P={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},R=["value"],$={class:"bg-white rounded-lg border border-gray-200 overflow-hidden"},q={class:"overflow-x-auto p-4"},G={class:"min-w-full divide-y divide-gray-200 text-sm"},J={class:"divide-y divide-gray-100"},K={class:"px-3 py-2 text-gray-600"},Q={class:"px-3 py-2"},W={key:0,class:"font-medium text-gray-900"},X={key:1,class:"text-gray-400"},Y={class:"px-3 py-2"},Z={key:0,class:"font-medium text-gray-900"},tt={key:1,class:"text-gray-400"},et={class:"px-3 py-2 text-gray-700"},st={class:"line-clamp-2 max-w-xs block"},ot={class:"px-3 py-2 text-gray-600"},at={class:"px-3 py-2 text-gray-600"},rt={class:"px-3 py-2 text-gray-600"},lt={class:"px-3 py-2"},nt={key:0},it={key:0,class:"px-4 pb-4 flex flex-wrap gap-2"},bt={__name:"Index",props:{logs:Object,filters:Object,admins:Array},setup(n){const d=n,r=k({status:d.filters?.status||"",admin_id:d.filters?.admin_id||"",target_id:d.filters?.target_id||"",from:d.filters?.from||"",to:d.filters?.to||""});function y(){D.get(route("admin.impersonations.index"),r.value,{preserveState:!0,replace:!0})}function _(){r.value={status:"",admin_id:"",target_id:"",from:"",to:""},y()}function w(){const i=new URLSearchParams(r.value).toString();window.location.href=route("admin.impersonations.export")+(i?"?"+i:"")}const c=i=>i?new Date(i).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—";return(i,s)=>(o(),a(p,null,[u(m(A),{title:"Impersonation Logs"}),u(L,null,{default:S(()=>[t("div",N,[t("div",B,[t("div",E,[t("div",I,[t("div",M,[t("div",z,[u(m(F),{class:"w-6 h-6 text-gray-600"})])]),s[4]||(s[4]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Impersonation Logs"),t("p",{class:"text-sm text-gray-600 mt-1"},"Admin user impersonation audit trail")],-1))]),t("button",{onClick:w,class:"inline-flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-lg transition-colors duration-150"},[u(m(T),{class:"w-4 h-4 mr-2"}),s[5]||(s[5]=U(" Export CSV ",-1))])])]),t("div",H,[t("div",O,[u(m(j),{class:"h-5 w-5 text-gray-500 mr-2"}),s[6]||(s[6]=t("h2",{class:"text-sm font-semibold text-gray-700"},"Filters",-1))]),t("div",P,[t("div",null,[s[8]||(s[8]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Status",-1)),x(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>r.value.status=e),class:"w-full rounded-md border-gray-300 text-sm"},[...s[7]||(s[7]=[t("option",{value:""},"All",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"ended"},"Ended",-1)])],512),[[f,r.value.status]])]),t("div",null,[s[10]||(s[10]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Admin",-1)),x(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>r.value.admin_id=e),class:"w-full rounded-md border-gray-300 text-sm"},[s[9]||(s[9]=t("option",{value:""},"All",-1)),(o(!0),a(p,null,g(n.admins,e=>(o(),a("option",{key:e.id,value:e.id},l(e.name),9,R))),128))],512),[[f,r.value.admin_id]])]),t("div",null,[s[11]||(s[11]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"From Date",-1)),x(t("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=e=>r.value.from=e),class:"w-full rounded-md border-gray-300 text-sm"},null,512),[[b,r.value.from]])]),t("div",null,[s[12]||(s[12]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"To Date",-1)),x(t("input",{type:"date","onUpdate:modelValue":s[3]||(s[3]=e=>r.value.to=e),class:"w-full rounded-md border-gray-300 text-sm"},null,512),[[b,r.value.to]])])]),t("div",{class:"mt-4 flex items-center space-x-3"},[t("button",{onClick:y,class:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors duration-150"},"Apply"),t("button",{onClick:_,class:"px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 transition-colors duration-150"},"Reset")])]),t("div",$,[t("div",q,[t("table",G,[s[14]||(s[14]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-3 py-2 text-left font-semibold text-gray-700"},"ID"),t("th",{class:"px-3 py-2 text-left font-semibold text-gray-700"},"Admin"),t("th",{class:"px-3 py-2 text-left font-semibold text-gray-700"},"Target User"),t("th",{class:"px-3 py-2 text-left font-semibold text-gray-700"},"Purpose"),t("th",{class:"px-3 py-2 text-left font-semibold text-gray-700"},"Started"),t("th",{class:"px-3 py-2 text-left font-semibold text-gray-700"},"Ended"),t("th",{class:"px-3 py-2 text-left font-semibold text-gray-700"},"Duration"),t("th",{class:"px-3 py-2 text-left font-semibold text-gray-700"},"Status")])],-1)),t("tbody",J,[(o(!0),a(p,null,g(n.logs.data,e=>(o(),a("tr",{key:e.id,class:"hover:bg-gray-50"},[t("td",K,l(e.id),1),t("td",Q,[e.impersonator?(o(),a("span",W,l(e.impersonator.name),1)):(o(),a("span",X,"Unknown"))]),t("td",Y,[e.target?(o(),a("span",Z,l(e.target.name),1)):(o(),a("span",tt,"Unknown"))]),t("td",et,[t("span",st,l(e.purpose||"—"),1)]),t("td",ot,l(c(e.started_at)),1),t("td",at,l(e.ended_at?c(e.ended_at):"—"),1),t("td",rt,l(e.duration_minutes!==null?e.duration_minutes+" min":"—"),1),t("td",lt,[t("span",{class:h(["px-2 py-1 rounded-full text-xs font-semibold",{"bg-green-100 text-green-700":e.status==="ended","bg-yellow-100 text-yellow-700":e.status==="active"}])},l(e.status),3)])]))),128)),n.logs.data.length===0?(o(),a("tr",nt,[...s[13]||(s[13]=[t("td",{colspan:"8",class:"px-3 py-6 text-center text-gray-500"},"No impersonation logs found.",-1)])])):v("",!0)])])]),n.logs.links?(o(),a("div",it,[(o(!0),a(p,null,g(n.logs.links,e=>(o(),V(m(C),{key:e.url||e.label,href:e.url||"#",innerHTML:e.label,class:h(["px-3 py-1 text-xs rounded-lg border",e.active?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 hover:bg-gray-50 border-gray-300",e.url?"":"opacity-50 cursor-not-allowed"])},null,8,["href","innerHTML","class"]))),128))])):v("",!0)])])]),_:1})],64))}};export{bt as default};
