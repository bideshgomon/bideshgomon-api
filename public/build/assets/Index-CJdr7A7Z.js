import{u as y,y as g,j as _,a as t,t as d,m as v,c as a,n as m,p as u,g as o,x as p,o as i,v as x,F as w,q as h,z as k}from"./vendor-DUGSf9MG.js";import{A as U}from"./AdminLayout-CRJ9cJUr.js";import{u as B}from"./useBangladeshFormat-DxO2X-Ux.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";import"./heroicons-BVxQTyTq.js";import"./DateInput-BOMF3vob.js";const S={class:"max-w-7xl mx-auto py-8 px-4"},C={class:"grid grid-cols-3 gap-4 mb-8"},N={class:"bg-white rounded shadow p-4"},V={class:"text-2xl font-semibold"},A={class:"bg-white rounded shadow p-4"},D={class:"text-2xl font-semibold"},T={class:"bg-white rounded shadow p-4"},j={class:"text-2xl font-semibold"},F={class:"bg-white shadow rounded-lg p-6 mb-10"},I={key:0,class:"text-xs text-red-600 mt-1"},M={key:0,class:"text-xs text-red-600 mt-1"},z={class:"flex gap-4"},L={class:"flex-1"},O={class:"flex-1"},R={key:0},q={key:0,class:"text-xs text-red-600 mt-1"},E=["disabled"],H={key:1,class:"text-green-600 text-xs"},P={class:"bg-white shadow rounded-lg p-6"},G={key:0,class:"text-sm text-gray-500"},J={key:1,class:"space-y-3"},K={class:"flex items-center gap-2 mb-1"},Q={class:"font-medium text-sm"},W={class:"text-xs text-gray-600"},X={class:"text-sm text-gray-700 mt-1"},Y={class:"text-xs text-gray-500 mt-1"},Z={class:"text-xs text-gray-500"},$={methods:{badgeClass(r){return{"bg-blue-100 text-blue-700":r==="normal","bg-yellow-100 text-yellow-800":r==="high","bg-red-100 text-red-800":r==="critical"}}}},nt=Object.assign($,{__name:"Index",props:{recent:Array,stats:Object},setup(r){const{formatDate:c,formatTime:b}=B(),e=y({title:"",body:"",priority:"normal",scope:"all",user_ids:""});function f(){let n={...e.data()};n.scope==="user_ids"?n.user_ids=n.user_ids.split(",").map(s=>s.trim()).filter(s=>s.length).map(s=>parseInt(s)):delete n.user_ids,e.post(route("admin.notifications.broadcast"),{onSuccess:()=>e.reset("title","body")})}return(n,s)=>(i(),g(U,{title:"Admin Notifications"},{default:_(()=>[t("div",S,[s[17]||(s[17]=t("h1",{class:"text-2xl font-bold mb-6"},"Notifications Center",-1)),t("div",C,[t("div",N,[s[5]||(s[5]=t("p",{class:"text-sm text-gray-500"},"Total",-1)),t("p",V,d(r.stats.total),1)]),t("div",A,[s[6]||(s[6]=t("p",{class:"text-sm text-gray-500"},"Unread",-1)),t("p",D,d(r.stats.unread),1)]),t("div",T,[s[7]||(s[7]=t("p",{class:"text-sm text-gray-500"},"Critical",-1)),t("p",j,d(r.stats.critical),1)])]),t("div",F,[s[15]||(s[15]=t("h2",{class:"text-lg font-semibold mb-4"},"Send Broadcast",-1)),t("form",{onSubmit:v(f,["prevent"]),class:"space-y-4"},[t("div",null,[s[8]||(s[8]=t("label",{class:"text-sm font-medium block mb-1"},"Title",-1)),u(t("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>o(e).title=l),type:"text",class:"w-full border rounded p-2"},null,512),[[p,o(e).title]]),o(e).errors.title?(i(),a("p",I,d(o(e).errors.title),1)):m("",!0)]),t("div",null,[s[9]||(s[9]=t("label",{class:"text-sm font-medium block mb-1"},"Body",-1)),u(t("textarea",{"onUpdate:modelValue":s[1]||(s[1]=l=>o(e).body=l),rows:"4",class:"w-full border rounded p-2"},null,512),[[p,o(e).body]]),o(e).errors.body?(i(),a("p",M,d(o(e).errors.body),1)):m("",!0)]),t("div",z,[t("div",L,[s[11]||(s[11]=t("label",{class:"text-sm font-medium block mb-1"},"Priority",-1)),u(t("select",{"onUpdate:modelValue":s[2]||(s[2]=l=>o(e).priority=l),class:"w-full border rounded p-2"},[...s[10]||(s[10]=[t("option",{value:"normal"},"Normal",-1),t("option",{value:"high"},"High",-1),t("option",{value:"critical"},"Critical",-1)])],512),[[x,o(e).priority]])]),t("div",O,[s[13]||(s[13]=t("label",{class:"text-sm font-medium block mb-1"},"Scope",-1)),u(t("select",{"onUpdate:modelValue":s[3]||(s[3]=l=>o(e).scope=l),class:"w-full border rounded p-2"},[...s[12]||(s[12]=[t("option",{value:"all"},"All Users",-1),t("option",{value:"user_ids"},"Specific User IDs",-1)])],512),[[x,o(e).scope]])])]),o(e).scope==="user_ids"?(i(),a("div",R,[s[14]||(s[14]=t("label",{class:"text-sm font-medium block mb-1"},"User IDs (comma separated)",-1)),u(t("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>o(e).user_ids=l),type:"text",class:"w-full border rounded p-2",placeholder:"e.g. 1,2,5"},null,512),[[p,o(e).user_ids]]),o(e).errors.user_ids?(i(),a("p",q,d(o(e).errors.user_ids),1)):m("",!0)])):m("",!0),t("button",{disabled:o(e).processing,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm disabled:opacity-50"},"Send Broadcast",8,E),o(e).recentlySuccessful?(i(),a("p",H,"Broadcast sent.")):m("",!0)],32)]),t("div",P,[s[16]||(s[16]=t("h2",{class:"text-lg font-semibold mb-4"},"Recent Notifications",-1)),r.recent.length===0?(i(),a("div",G,"No notifications yet.")):(i(),a("ul",J,[(i(!0),a(w,null,h(r.recent,l=>(i(),a("li",{key:l.id,class:"border rounded p-4 flex justify-between"},[t("div",null,[t("div",K,[t("span",{class:k([n.badgeClass(l.priority),"px-2 py-0.5 text-xs font-semibold rounded-full"])},d(l.priority),3),t("h3",Q,d(l.title),1)]),t("p",W,"To: "+d(l.user?.name||"User #"+l.user_id),1),t("p",X,d(l.body),1),t("div",Y,d(o(c)(l.created_at))+" â€¢ "+d(o(b)(l.created_at)),1)]),t("div",Z,d(l.read_at?"Read":"Unread"),1)]))),128))]))])])]),_:1}))}});export{nt as default};
