import{r as D,u as y,y as N,j as k,f as v,a as e,g as i,i as $,c as n,n as u,l as q,k as _,t as s,o as l,z as g,F as h,q as f,m as w,p as C,x as S,A as O}from"./vendor-DUGSf9MG.js";import{_ as z}from"./AuthenticatedLayout-DdydbOmd.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";import"./heroicons-BVxQTyTq.js";const E={class:"py-12"},H={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},I={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},G={class:"p-6"},P={class:"flex items-center justify-between mb-4"},Y={class:"flex items-center gap-2"},J=["disabled"],K={class:"flex items-start justify-between"},Q={class:"flex items-center gap-2 mb-2"},W={class:"font-mono text-sm text-gray-600"},X={class:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded-full"},Z={class:"text-2xl font-bold text-gray-900 mb-2"},ee={class:"flex items-center gap-4 text-sm text-gray-500"},te={key:0},se={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-4"},oe={class:"p-6"},ae={class:"flex items-start gap-4"},ie={class:"flex-shrink-0"},le={class:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold"},ne={class:"flex-1"},re={class:"flex items-center gap-2 mb-2"},de={class:"font-semibold text-gray-900"},ce={class:"text-xs text-gray-500"},ue={class:"prose prose-sm max-w-none text-gray-700"},ge={key:0,class:"mt-4"},me={class:"text-xs font-medium text-gray-700 mb-2"},be={class:"flex flex-wrap gap-2"},he=["href"],fe={class:"p-6"},xe={class:"flex items-start gap-4"},pe={class:"flex-shrink-0"},_e={class:"flex-1"},ye={class:"flex items-center gap-2 mb-2"},ke={class:"font-semibold text-gray-900"},ve={key:0,class:"px-2 py-0.5 text-xs font-semibold bg-green-100 text-green-800 rounded-full"},we={class:"text-xs text-gray-500"},Ce={class:"prose prose-sm max-w-none text-gray-700"},Se={key:0,class:"mt-4"},je={class:"text-xs font-medium text-gray-700 mb-2"},Ae={class:"flex flex-wrap gap-2"},Te=["href"],Be={key:0,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Re={class:"p-6"},Fe={class:"text-lg font-semibold text-gray-900 mb-4"},Le={class:"mb-4"},Me={key:0,class:"mt-1 text-sm text-red-600"},Ue={class:"mb-4"},Ve={class:"mt-1 text-xs text-gray-500"},De={class:"flex justify-end"},Ne=["disabled"],$e={key:0},qe={key:1},Oe={key:1,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mt-6"},ze={class:"text-lg font-semibold text-gray-900 mb-4"},Ee={class:"mb-4"},He={class:"block text-sm font-medium text-gray-700 mb-2"},Ie={class:"flex gap-2"},Ge=["onClick"],Pe={class:"mb-4"},Ye={class:"block text-sm font-medium text-gray-700 mb-2"},Je=["disabled"],st={__name:"Show",props:{ticket:Object},setup(o){const x=o,b=D(!1),d=y({message:"",attachments:[]}),c=y({rating:0,feedback:""}),j=t=>{const r=Array.from(t.target.files);if(r.length>5){alert("Maximum 5 files allowed"),t.target.value="";return}d.attachments=r},A=()=>{d.post(route("support.reply",x.ticket.id),{preserveScroll:!0,onSuccess:()=>{d.reset()}})},T=()=>{confirm("Are you sure you want to close this ticket?")&&(b.value=!0,O.post(route("support.close",x.ticket.id),{},{preserveScroll:!0,onFinish:()=>{b.value=!1}}))},B=()=>{c.post(route("support.rate",x.ticket.id),{preserveScroll:!0})},R=t=>({open:"bg-green-100 text-green-800",in_progress:"bg-blue-100 text-blue-800",awaiting_reply:"bg-yellow-100 text-yellow-800",resolved:"bg-purple-100 text-purple-800",closed:"bg-gray-100 text-gray-800"})[t]||"bg-gray-100 text-gray-800",F=t=>({open:"Open",in_progress:"In Progress",awaiting_reply:"Awaiting Reply",resolved:"Resolved",closed:"Closed"})[t]||t,L=t=>({urgent:"bg-red-100 text-red-800",high:"bg-orange-100 text-orange-800",normal:"bg-blue-100 text-blue-800",low:"bg-gray-100 text-gray-800"})[t]||"bg-gray-100 text-gray-800",M=t=>({urgent:"Urgent",high:"High",normal:"Normal",low:"Low"})[t]||t,U=t=>({technical:"Technical",billing:"Billing",general:"General",service_inquiry:"Service Inquiry",complaint:"Complaint"})[t]||t,p=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(t,r)=>(l(),N(z,null,{default:k(()=>[v(i($),{title:`Ticket #${o.ticket.ticket_number}`},null,8,["title"]),e("div",E,[e("div",H,[e("div",I,[e("div",G,[e("div",P,[v(i(q),{href:t.route("support.index"),class:"text-sm text-gray-600 hover:text-gray-900"},{default:k(()=>[_(" ← "+s(t.__("Back to Tickets")),1)]),_:1},8,["href"]),e("div",Y,[o.ticket.status!=="closed"&&o.ticket.status!=="resolved"?(l(),n("button",{key:0,onClick:T,disabled:b.value,class:g(["px-3 py-1 text-xs font-semibold text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",{"opacity-50 cursor-not-allowed":b.value}])},s(t.__("Close Ticket")),11,J)):u("",!0)])]),e("div",K,[e("div",null,[e("div",Q,[e("span",W,s(o.ticket.ticket_number),1),e("span",{class:g([R(o.ticket.status),"px-2 py-1 text-xs font-semibold rounded-full"])},s(F(o.ticket.status)),3),e("span",{class:g([L(o.ticket.priority),"px-2 py-1 text-xs font-semibold rounded-full"])},s(M(o.ticket.priority)),3),e("span",X,s(U(o.ticket.category)),1)]),e("h1",Z,s(o.ticket.subject),1),e("div",ee,[e("span",null,s(t.__("Created"))+": "+s(p(o.ticket.created_at)),1),o.ticket.assigned_to?(l(),n("span",te,s(t.__("Assigned to"))+": "+s(o.ticket.assigned_to.name),1)):u("",!0)])])])])]),e("div",se,[e("div",oe,[e("div",ae,[e("div",ie,[e("div",le,s(o.ticket.user.name.charAt(0).toUpperCase()),1)]),e("div",ne,[e("div",re,[e("span",de,s(o.ticket.user.name),1),e("span",ce,s(p(o.ticket.created_at)),1)]),e("div",ue,s(o.ticket.message),1),o.ticket.attachments&&o.ticket.attachments.length>0?(l(),n("div",ge,[e("p",me,s(t.__("Attachments"))+":",1),e("div",be,[(l(!0),n(h,null,f(o.ticket.attachments,(a,m)=>(l(),n("a",{key:m,href:`/storage/${a.path}`,target:"_blank",class:"flex items-center gap-2 px-3 py-1 text-xs bg-gray-100 rounded-md hover:bg-gray-200"},[r[2]||(r[2]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)),_(" "+s(a.name),1)],8,he))),128))])])):u("",!0)])])])]),(l(!0),n(h,null,f(o.ticket.replies,a=>(l(),n("div",{key:a.id,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-4"},[e("div",fe,[e("div",xe,[e("div",pe,[e("div",{class:g([a.is_staff_reply?"bg-green-600":"bg-blue-600","w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold"])},s(a.user.name.charAt(0).toUpperCase()),3)]),e("div",_e,[e("div",ye,[e("span",ke,s(a.user.name),1),a.is_staff_reply?(l(),n("span",ve,s(t.__("Staff")),1)):u("",!0),e("span",we,s(p(a.created_at)),1)]),e("div",Ce,s(a.message),1),a.attachments&&a.attachments.length>0?(l(),n("div",Se,[e("p",je,s(t.__("Attachments"))+":",1),e("div",Ae,[(l(!0),n(h,null,f(a.attachments,(m,V)=>(l(),n("a",{key:V,href:`/storage/${m.path}`,target:"_blank",class:"flex items-center gap-2 px-3 py-1 text-xs bg-gray-100 rounded-md hover:bg-gray-200"},[r[3]||(r[3]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)),_(" "+s(m.name),1)],8,Te))),128))])])):u("",!0)])])])]))),128)),o.ticket.status!=="closed"?(l(),n("div",Be,[e("div",Re,[e("h3",Fe,s(t.__("Add Reply")),1),e("form",{onSubmit:w(A,["prevent"])},[e("div",Le,[C(e("textarea",{"onUpdate:modelValue":r[0]||(r[0]=a=>i(d).message=a),rows:"4",class:g(["w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",{"border-red-500":i(d).errors.message}]),placeholder:"Type your reply...",required:""},null,2),[[S,i(d).message]]),i(d).errors.message?(l(),n("p",Me,s(i(d).errors.message),1)):u("",!0)]),e("div",Ue,[e("input",{type:"file",onChange:j,multiple:"",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",class:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),e("p",Ve,s(t.__("Optional: Max 5 files, 10MB each")),1)]),e("div",De,[e("button",{type:"submit",disabled:i(d).processing,class:g(["px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-sm text-white uppercase tracking-widest hover:bg-blue-700 focus:bg-blue-700 active:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition ease-in-out duration-150",{"opacity-50 cursor-not-allowed":i(d).processing}])},[i(d).processing?(l(),n("span",$e,s(t.__("Sending...")),1)):(l(),n("span",qe,s(t.__("Send Reply")),1))],10,Ne)])],32)])])):u("",!0),o.ticket.status==="resolved"&&!o.ticket.satisfaction_rating?(l(),n("div",Oe,[e("h3",ze,s(t.__("Rate Your Experience")),1),e("form",{onSubmit:w(B,["prevent"])},[e("div",Ee,[e("label",He,s(t.__("How satisfied are you with the support?")),1),e("div",Ie,[(l(),n(h,null,f(5,a=>e("button",{key:a,type:"button",onClick:m=>i(c).rating=a,class:g(["text-3xl transition",a<=i(c).rating?"text-yellow-400":"text-gray-300"])}," ★ ",10,Ge)),64))])]),e("div",Pe,[e("label",Ye,s(t.__("Additional Feedback (Optional)")),1),C(e("textarea",{"onUpdate:modelValue":r[1]||(r[1]=a=>i(c).feedback=a),rows:"3",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Tell us more about your experience..."},null,512),[[S,i(c).feedback]])]),e("button",{type:"submit",disabled:!i(c).rating||i(c).processing,class:g(["px-4 py-2 bg-yellow-600 border border-transparent rounded-md font-semibold text-sm text-white uppercase tracking-widest hover:bg-yellow-700 focus:bg-yellow-700 transition ease-in-out duration-150",{"opacity-50 cursor-not-allowed":!i(c).rating||i(c).processing}])},s(t.__("Submit Rating")),11,Je)],32)])):u("",!0)])])]),_:1}))}};export{st as default};
