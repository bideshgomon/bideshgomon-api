import{r as P,u as T,B as p,c as l,f as d,g as s,i as E,j as _,a as t,n as u,t as o,z as D,o as n,F as q,q as V,m as O,k as x,p as y,x as v}from"./vendor-DUGSf9MG.js";import{u as z}from"./useBangladeshFormat-DxO2X-Ux.js";import{_ as Y}from"./AuthenticatedLayout-DdydbOmd.js";import{_ as H}from"./Modal-DEylfiwE.js";import{P as I}from"./PrimaryButton-DTr7DaKh.js";import{_ as L}from"./SecondaryButton-B58W3wCp.js";import{aq as R,s as G,z as J,b as $,f as K,H as W,aQ as X,j as Z}from"./heroicons-BVxQTyTq.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";const tt={class:"flex items-center justify-between"},et={class:"text-sm text-gray-600 mt-1"},st={class:"py-8"},ot={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 space-y-6"},it={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},at={class:"flex items-start justify-between mb-6"},lt={class:"text-sm text-gray-600 mt-1"},nt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},rt={class:"flex items-start gap-3"},dt={class:"flex-shrink-0 p-2 bg-blue-100 rounded-lg"},ut={class:"text-sm font-semibold text-gray-900"},ct={class:"text-xs text-gray-600"},mt={class:"flex items-start gap-3"},gt={class:"flex-shrink-0 p-2 bg-indigo-100 rounded-lg"},pt={class:"text-sm font-semibold text-gray-900"},xt={class:"text-xs text-gray-600"},ft={class:"flex items-start gap-3"},_t={class:"flex-shrink-0 p-2 bg-green-100 rounded-lg"},bt={class:"text-sm font-semibold text-gray-900"},yt={class:"flex items-start gap-3"},vt={class:"flex-shrink-0 p-2 bg-orange-100 rounded-lg"},ht={class:"text-sm font-semibold text-gray-900"},wt={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},qt={class:"flex items-start justify-between mb-4"},kt={class:"text-sm text-gray-600 mt-1"},Qt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},St={class:"flex items-start gap-3"},Ct={class:"flex-shrink-0 p-2 bg-green-100 rounded-lg"},Dt={class:"text-lg font-bold text-gray-900"},Vt={class:"text-xs text-gray-600"},$t={class:"flex items-start gap-3"},jt={class:"flex-shrink-0 p-2 bg-blue-100 rounded-lg"},At={class:"text-lg font-bold text-gray-900"},Ft={class:"flex items-start gap-3"},Ut={class:"flex-shrink-0 p-2 bg-orange-100 rounded-lg"},Nt={class:"text-lg font-bold text-gray-900"},Bt={key:0,class:"mt-4 p-4 bg-gray-50 rounded-lg"},Mt={class:"text-sm text-gray-900"},Pt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Tt={key:0,class:"space-y-4"},Et={class:"flex-shrink-0 w-48"},Ot={class:"text-sm font-medium text-gray-700"},zt={class:"flex-1"},Yt={class:"text-sm text-gray-900"},Ht={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},It={class:"space-y-3"},Lt={class:"flex items-center gap-3"},Rt={class:"text-sm font-medium text-gray-900"},Gt={class:"text-xs text-gray-600"},Jt=["href"],Kt={class:"p-6"},Wt={class:"relative"},Xt={key:0,class:"mt-1 text-sm text-red-600"},Zt={key:0,class:"p-4 bg-gray-50 rounded-lg space-y-2"},te={class:"flex justify-between text-sm"},ee={class:"text-gray-600"},se={class:"font-medium text-gray-900"},oe={class:"flex justify-between text-sm pt-2 border-t border-gray-200"},ie={class:"font-bold text-green-600"},ae={key:0,class:"mt-1 text-sm text-red-600"},le={key:0,class:"mt-1 text-sm text-red-600"},ne={key:0,class:"mt-1 text-sm text-red-600"},re={class:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200"},ve={__name:"Show",props:{application:Object},setup(a){const m=a,{formatDate:f,formatCurrency:b}=z(),h=P(!1),i=T({quoted_amount:"",processing_time_days:30,valid_until:"",quote_notes:""}),k=g=>({pending:"bg-yellow-100 text-yellow-800",quoted:"bg-blue-100 text-blue-800",accepted:"bg-green-100 text-green-800",in_progress:"bg-indigo-100 text-indigo-800",completed:"bg-emerald-100 text-emerald-800",cancelled:"bg-red-100 text-red-800",rejected:"bg-red-100 text-red-800"})[g]||"bg-gray-100 text-gray-800",j=p(()=>m.application.status==="pending"&&(!m.application.quotes||m.application.quotes.length===0)),A=p(()=>m.application.quotes&&m.application.quotes.length>0),c=p(()=>m.application.quotes?.[0]||null),Q=p(()=>m.application.service_module?.platform_commission_rate||10),S=p(()=>i.quoted_amount?(parseFloat(i.quoted_amount)*Q.value/100).toFixed(2):0),F=p(()=>i.quoted_amount?(parseFloat(i.quoted_amount)-parseFloat(S.value)).toFixed(2):0),U=()=>{const g=new Date;g.setDate(g.getDate()+7),i.valid_until=g.toISOString().split("T")[0]},N=()=>{U(),h.value=!0},w=()=>{h.value=!1,i.reset()},B=()=>{i.post(route("agency.quotes.store",m.application.id),{preserveScroll:!0,onSuccess:()=>{w()}})};return(g,e)=>(n(),l(q,null,[d(s(E),{title:`Application ${a.application.application_number}`},null,8,["title"]),d(Y,null,{header:_(()=>[t("div",tt,[t("div",null,[e[4]||(e[4]=t("h2",{class:"text-xl font-semibold text-gray-800"},"Application Details",-1)),t("p",et,o(a.application.application_number),1)]),j.value?(n(),l("button",{key:0,onClick:N,class:"inline-flex items-center gap-x-2 px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors"},[d(s(Z),{class:"h-5 w-5"}),e[5]||(e[5]=x(" Submit Quote ",-1))])):u("",!0)])]),default:_(()=>[t("div",st,[t("div",ot,[t("div",it,[t("div",at,[t("div",null,[e[6]||(e[6]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Application Overview",-1)),t("p",lt,"Submitted on "+o(s(f)(a.application.created_at)),1)]),t("span",{class:D(["inline-flex items-center rounded-full px-3 py-1 text-sm font-semibold",k(a.application.status)])},o(a.application.status),3)]),t("div",nt,[t("div",rt,[t("div",dt,[d(s(R),{class:"h-5 w-5 text-blue-600"})]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-xs text-gray-500 font-medium"},"Applicant",-1)),t("p",ut,o(a.application.user?.name),1),t("p",ct,o(a.application.user?.email),1)])]),t("div",mt,[t("div",gt,[d(s(G),{class:"h-5 w-5 text-indigo-600"})]),t("div",null,[e[8]||(e[8]=t("p",{class:"text-xs text-gray-500 font-medium"},"Service",-1)),t("p",pt,o(a.application.service_module?.name),1),t("p",xt,o(a.application.service_module?.category),1)])]),t("div",ft,[t("div",_t,[d(s(J),{class:"h-5 w-5 text-green-600"})]),t("div",null,[e[9]||(e[9]=t("p",{class:"text-xs text-gray-500 font-medium"},"Destination",-1)),t("p",bt,o(a.application.tourist_visa?.destination_country?.name||"N/A"),1)])]),t("div",yt,[t("div",vt,[d(s($),{class:"h-5 w-5 text-orange-600"})]),t("div",null,[e[10]||(e[10]=t("p",{class:"text-xs text-gray-500 font-medium"},"Submitted",-1)),t("p",ht,o(s(f)(a.application.created_at)),1)])])])]),A.value?(n(),l("div",wt,[t("div",qt,[t("div",null,[e[11]||(e[11]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Your Quote",-1)),t("p",kt,"Submitted on "+o(s(f)(c.value.created_at)),1)]),t("span",{class:D(["inline-flex items-center rounded-full px-3 py-1 text-sm font-semibold",k(c.value.status)])},o(c.value.status),3)]),t("div",Qt,[t("div",St,[t("div",Ct,[d(s(K),{class:"h-5 w-5 text-green-600"})]),t("div",null,[e[12]||(e[12]=t("p",{class:"text-xs text-gray-500 font-medium"},"Quoted Amount",-1)),t("p",Dt,o(s(b)(c.value.quoted_amount)),1),t("p",Vt,"Your earnings: "+o(s(b)(c.value.agency_earnings)),1)])]),t("div",$t,[t("div",jt,[d(s(W),{class:"h-5 w-5 text-blue-600"})]),t("div",null,[e[13]||(e[13]=t("p",{class:"text-xs text-gray-500 font-medium"},"Processing Time",-1)),t("p",At,o(c.value.processing_time_days)+" days",1)])]),t("div",Ft,[t("div",Ut,[d(s($),{class:"h-5 w-5 text-orange-600"})]),t("div",null,[e[14]||(e[14]=t("p",{class:"text-xs text-gray-500 font-medium"},"Valid Until",-1)),t("p",Nt,o(s(f)(c.value.valid_until)),1)])])]),c.value.quote_notes?(n(),l("div",Bt,[e[15]||(e[15]=t("p",{class:"text-xs text-gray-500 font-medium mb-1"},"Quote Notes",-1)),t("p",Mt,o(c.value.quote_notes),1)])):u("",!0)])):u("",!0),t("div",Pt,[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Application Details",-1)),a.application.application_data?(n(),l("div",Tt,[(n(!0),l(q,null,V(a.application.application_data,(r,C)=>(n(),l("div",{key:C,class:"flex items-start gap-3"},[t("div",Et,[t("p",Ot,o(C.replace(/_/g," ").replace(/\b\w/g,M=>M.toUpperCase())),1)]),t("div",zt,[t("p",Yt,o(r||"N/A"),1)])]))),128))])):u("",!0)]),a.application.tourist_visa?.documents?.length>0?(n(),l("div",Ht,[e[17]||(e[17]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Uploaded Documents",-1)),t("div",It,[(n(!0),l(q,null,V(a.application.tourist_visa.documents,r=>(n(),l("div",{key:r.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[t("div",Lt,[d(s(X),{class:"h-5 w-5 text-gray-400"}),t("div",null,[t("p",Rt,o(r.document_type),1),t("p",Gt,"Uploaded "+o(s(f)(r.created_at)),1)])]),r.file_path?(n(),l("a",{key:0,href:`/storage/${r.file_path}`,target:"_blank",class:"text-sm font-medium text-indigo-600 hover:text-indigo-900"}," View ",8,Jt)):u("",!0)]))),128))])])):u("",!0)])]),d(H,{show:h.value,onClose:w},{default:_(()=>[t("div",Kt,[e[25]||(e[25]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Submit Quote",-1)),t("form",{onSubmit:O(B,["prevent"]),class:"space-y-4"},[t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[x(" Quoted Amount "),t("span",{class:"text-red-500"},"*")],-1)),t("div",Wt,[e[18]||(e[18]=t("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"},"à§³",-1)),y(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>s(i).quoted_amount=r),type:"number",step:"0.01",min:"0",required:"",class:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"0.00"},null,512),[[v,s(i).quoted_amount]])]),s(i).errors.quoted_amount?(n(),l("p",Xt,o(s(i).errors.quoted_amount),1)):u("",!0)]),s(i).quoted_amount?(n(),l("div",Zt,[t("div",te,[t("span",ee,"Platform Commission ("+o(Q.value)+"%)",1),t("span",se,o(s(b)(S.value)),1)]),t("div",oe,[e[20]||(e[20]=t("span",{class:"text-gray-900 font-medium"},"Your Earnings",-1)),t("span",ie,o(s(b)(F.value)),1)])])):u("",!0),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[x(" Processing Time (Days) "),t("span",{class:"text-red-500"},"*")],-1)),y(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>s(i).processing_time_days=r),type:"number",min:"1",max:"365",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[v,s(i).processing_time_days]]),s(i).errors.processing_time_days?(n(),l("p",ae,o(s(i).errors.processing_time_days),1)):u("",!0)]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[x(" Quote Valid Until "),t("span",{class:"text-red-500"},"*")],-1)),y(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>s(i).valid_until=r),type:"date",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[v,s(i).valid_until]]),s(i).errors.valid_until?(n(),l("p",le,o(s(i).errors.valid_until),1)):u("",!0)]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Additional Notes (Optional) ",-1)),y(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=r=>s(i).quote_notes=r),rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Any special instructions, conditions, or information for the client..."},null,512),[[v,s(i).quote_notes]]),s(i).errors.quote_notes?(n(),l("p",ne,o(s(i).errors.quote_notes),1)):u("",!0)]),t("div",re,[d(L,{onClick:w,type:"button"},{default:_(()=>[...e[24]||(e[24]=[x(" Cancel ",-1)])]),_:1}),d(I,{type:"submit",disabled:s(i).processing},{default:_(()=>[x(o(s(i).processing?"Submitting...":"Submit Quote"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"])]),_:1})],64))}};export{ve as default};
