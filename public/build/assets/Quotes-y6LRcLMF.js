import{r as y,c as d,f as a,g as o,i as V,j as p,a as t,n as u,t as r,o as i,F as f,q as k,z as _,k as l,l as D,A as w}from"./vendor-DUGSf9MG.js";import{_ as B}from"./AuthenticatedLayout-DdydbOmd.js";import{s as $,ar as C,bA as L,q as R,f as z,H as E,E as A,a8 as j}from"./heroicons-BVxQTyTq.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";const F={class:"flex items-center justify-between"},T={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},q={class:"py-8"},M={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},Y={class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-8"},H={class:"flex"},O={class:"flex-shrink-0"},P={class:"ml-3"},U={class:"text-sm font-medium text-blue-800 dark:text-blue-300"},G={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},I={class:"p-6"},J={class:"flex items-start justify-between mb-4"},K={class:"flex items-center gap-3"},W={class:"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg"},X={class:"text-lg font-bold text-gray-900 dark:text-white"},Z={class:"flex items-center gap-1 mt-1"},tt={class:"text-sm text-gray-600 dark:text-gray-400 ml-1"},et={key:0,class:"flex items-center gap-1 text-green-600 dark:text-green-400 text-xs font-medium"},st={class:"bg-heritage-50 dark:bg-heritage-900/20 rounded-lg p-4 mb-4"},at={class:"flex items-center justify-between"},ot={class:"text-3xl font-bold text-gray-900 dark:text-white"},rt={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},dt={class:"space-y-3 mb-4"},it={class:"flex items-center gap-2 text-sm"},nt={class:"font-medium text-gray-900 dark:text-white"},lt={class:"flex items-center gap-2 text-sm"},ct={class:"font-medium text-gray-900 dark:text-white"},gt={key:0,class:"mb-4"},xt={class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3"},ut={class:"text-sm text-gray-600 dark:text-gray-400"},mt={class:"flex gap-3"},bt=["onClick","disabled"],yt=["onClick"],pt={key:1,class:"mt-3 text-center"},ft={class:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"},ht={key:2,class:"mt-3 text-center"},vt={class:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"},kt={key:0,class:"col-span-full"},_t={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-12 text-center"},wt={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},$t={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 p-6"},Ct={class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},At={class:"flex gap-3"},jt=["disabled"],Qt=["disabled"],zt={__name:"Quotes",props:{application:Object,quotes:Array},setup(n){const h=n,c=y(null),m=y(!1),g=y(!1),Q=x=>{c.value=x},N=()=>{c.value&&(g.value=!0,w.post(`/my-applications/${h.application.id}/quotes/${c.value.id}/accept`,{},{onSuccess:()=>{m.value=!1,g.value=!1},onError:()=>{g.value=!1}}))},S=x=>{confirm("Are you sure you want to reject this quote?")&&w.post(`/my-applications/${h.application.id}/quotes/${x}/reject`)},v=x=>x?.rating||4.5;return(x,e)=>(i(),d(f,null,[a(o(V),{title:"Review Quotes"}),a(B,null,{header:p(()=>[t("div",F,[t("div",null,[e[1]||(e[1]=t("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-200"}," Review Quotes ",-1)),t("p",T,r(n.application.service_module?.name)+" - "+r(n.application.application_number),1)]),a(o(D),{href:`/my-applications/${n.application.id}`,class:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"},{default:p(()=>[...e[2]||(e[2]=[l(" â† Back to Application ",-1)])]),_:1},8,["href"])])]),default:p(()=>[t("div",q,[t("div",M,[t("div",Y,[t("div",H,[t("div",O,[a(o($),{class:"h-5 w-5 text-blue-400"})]),t("div",P,[t("h3",U," You have "+r(n.quotes.length)+" quote"+r(n.quotes.length!==1?"s":"")+" to review ",1),e[3]||(e[3]=t("div",{class:"mt-2 text-sm text-blue-700 dark:text-blue-400"},[t("p",null,"Compare quotes from different agencies and choose the one that best fits your needs.")],-1))])])]),t("div",G,[(i(!0),d(f,null,k(n.quotes,s=>(i(),d("div",{key:s.id,class:_(["bg-white dark:bg-gray-800 rounded-xl shadow-sm border-2 transition-all duration-200",c.value?.id===s.id?"border-indigo-500 shadow-lg":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[t("div",I,[t("div",J,[t("div",K,[t("div",W,[a(o(C),{class:"h-6 w-6 text-indigo-600 dark:text-indigo-400"})]),t("div",null,[t("h3",X,r(s.agency?.name||"Agency"),1),t("div",Z,[(i(),d(f,null,k(5,b=>a(o(L),{key:b,class:_(["h-4 w-4",b<=Math.floor(v(s.agency))?"text-yellow-400":"text-gray-300 dark:text-gray-600"])},null,8,["class"])),64)),t("span",tt,r(v(s.agency).toFixed(1)),1)])])]),s.agency?.verified?(i(),d("div",et,[a(o(R),{class:"h-4 w-4"}),e[4]||(e[4]=l(" Verified ",-1))])):u("",!0)]),t("div",st,[t("div",at,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-1"},"Total Amount",-1)),t("p",ot," $"+r(s.quoted_amount?.toLocaleString()),1),t("p",rt,r(s.currency||"USD"),1)]),a(o(z),{class:"h-12 w-12 text-indigo-400 opacity-50"})])]),t("div",dt,[t("div",it,[a(o(E),{class:"h-4 w-4 text-gray-400"}),e[6]||(e[6]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Valid until:",-1)),t("span",nt,r(new Date(s.valid_until).toLocaleDateString()),1)]),t("div",lt,[a(o($),{class:"h-4 w-4 text-gray-400"}),e[7]||(e[7]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Quote #:",-1)),t("span",ct,r(s.quote_number),1)])]),s.quote_details||s.notes?(i(),d("div",gt,[e[8]||(e[8]=t("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"},"Details",-1)),t("div",xt,[t("p",ut,r(s.notes||"No additional details provided"),1)])])):u("",!0),t("div",mt,[t("button",{onClick:b=>{Q(s),m.value=!0},disabled:s.status!=="pending",class:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white text-sm font-medium rounded-lg transition-colors"},[a(o(A),{class:"h-5 w-5"}),e[9]||(e[9]=l(" Accept Quote ",-1))],8,bt),s.status==="pending"?(i(),d("button",{key:0,onClick:b=>S(s.id),class:"px-4 py-2.5 text-sm font-medium text-red-600 dark:text-red-400 border border-red-300 dark:border-red-700 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"},[a(o(j),{class:"h-5 w-5"})],8,yt)):u("",!0)]),s.status==="accepted"?(i(),d("div",pt,[t("span",ft,[a(o(A),{class:"h-4 w-4"}),e[10]||(e[10]=l(" Accepted ",-1))])])):s.status==="rejected"?(i(),d("div",ht,[t("span",vt,[a(o(j),{class:"h-4 w-4"}),e[11]||(e[11]=l(" Rejected ",-1))])])):u("",!0)])],2))),128)),!n.quotes||n.quotes.length===0?(i(),d("div",kt,[t("div",_t,[a(o(C),{class:"mx-auto h-12 w-12 text-gray-400"}),e[12]||(e[12]=t("h3",{class:"mt-2 text-sm font-semibold text-gray-900 dark:text-white"},"No quotes yet",-1)),e[13]||(e[13]=t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Agencies will submit quotes soon. Check back later. ",-1))])])):u("",!0)])])]),m.value?(i(),d("div",wt,[t("div",$t,[e[17]||(e[17]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," Confirm Quote Acceptance ",-1)),t("p",Ct,[e[14]||(e[14]=l(" You are about to accept the quote from ",-1)),t("strong",null,r(c.value?.agency?.name),1),e[15]||(e[15]=l(" for ",-1)),t("strong",null,"$"+r(c.value?.quoted_amount?.toLocaleString()),1),e[16]||(e[16]=l(". This action cannot be undone. ",-1))]),t("div",At,[t("button",{onClick:N,disabled:g.value,class:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white py-2 rounded-lg font-medium transition-colors"},r(g.value?"Processing...":"Confirm"),9,jt),t("button",{onClick:e[0]||(e[0]=s=>m.value=!1),disabled:g.value,class:"flex-1 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white py-2 rounded-lg font-medium transition-colors"}," Cancel ",8,Qt)])])])):u("",!0)]),_:1})],64))}};export{zt as default};
