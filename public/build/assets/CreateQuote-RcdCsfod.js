import{u as q,y as k,j as y,f as v,a as e,g as i,i as w,l as b,k as m,c as d,n as a,t as l,o,F as Q,q as _,m as R,p as x,x as f}from"./vendor-DUGSf9MG.js";import{_ as D}from"./AuthenticatedLayout-DdydbOmd.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";import"./heroicons-BVxQTyTq.js";const B={class:"py-8"},P={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},V={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},A={class:"lg:col-span-1"},C={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 sticky top-6"},M={class:"space-y-4"},S={class:"font-medium text-gray-900"},T={class:"font-medium text-gray-900"},U={class:"font-medium text-gray-900"},F={key:0},N={class:"font-medium text-gray-900"},z={key:1},j={class:"font-medium text-gray-900"},E={class:"font-medium text-gray-900"},L={class:"font-medium text-gray-900 capitalize"},O={class:"font-medium text-gray-900"},I={key:2},X={key:3},Y={class:"flex flex-wrap gap-2"},$={key:4},H={class:"font-medium text-gray-900 capitalize"},K={key:5},G={class:"text-sm text-gray-700 mt-1"},J={class:"lg:col-span-2"},W={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Z={class:"text-xl font-semibold text-gray-900 mb-6"},ee={key:0,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"},te={class:"flex items-start"},se={class:"text-sm font-medium text-yellow-800"},ie={class:"text-sm text-yellow-700 mt-1"},re={class:"space-y-6"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},oe={key:0,class:"text-red-600 text-sm mt-1"},de={key:0,class:"text-red-600 text-sm mt-1"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ae={key:0,class:"text-red-600 text-sm mt-1"},ue=["min"],ge={key:0,class:"text-red-600 text-sm mt-1"},me={class:"mt-4"},xe={key:0,class:"text-red-600 text-sm mt-1"},fe={key:0,class:"text-red-600 text-sm mt-1"},ce={class:"flex justify-end space-x-4 pt-4 border-t border-gray-200"},ye=["disabled"],ve={key:0},be={key:1},pe={key:2,class:"space-y-4"},he={class:"grid grid-cols-2 gap-4"},qe={class:"font-medium text-gray-900"},ke={class:"font-medium text-gray-900"},we={class:"font-medium text-gray-900"},Qe={class:"font-medium text-gray-900"},_e={class:"text-sm text-gray-700 whitespace-pre-line bg-gray-50 p-4 rounded-lg"},Re={class:"text-sm text-gray-700 whitespace-pre-line bg-gray-50 p-4 rounded-lg"},Se={__name:"CreateQuote",props:{flightRequest:{type:Object,required:!0},existingQuote:{type:Object,default:null}},setup(s){const u=s,r=q({airline_name:u.existingQuote?.airline_name||"",flight_number:u.existingQuote?.flight_number||"",quoted_price:u.existingQuote?.quoted_price||null,price_breakdown:u.existingQuote?.price_breakdown||"",flight_details:u.existingQuote?.flight_details||"",valid_until:u.existingQuote?.valid_until?u.existingQuote.valid_until.split("T")[0]:"",notes:u.existingQuote?.notes||""}),c=g=>new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),p=()=>{const g=new Date;return g.setDate(g.getDate()+1),g.toISOString().split("T")[0]},h=()=>{u.existingQuote&&u.existingQuote.status==="pending"?r.put(route("agency.flight-requests.update-quote",{id:u.flightRequest.id,quoteId:u.existingQuote.id})):r.post(route("agency.flight-requests.store-quote",u.flightRequest.id))};return(g,t)=>(o(),k(D,null,{default:y(()=>[v(i(w),{title:`Submit Quote - ${s.flightRequest.request_reference}`},null,8,["title"]),e("div",B,[e("div",P,[v(i(b),{href:g.route("agency.flight-requests.index"),class:"inline-flex items-center text-blue-600 hover:text-blue-800 mb-6"},{default:y(()=>[...t[7]||(t[7]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),m(" Back to Requests ",-1)])]),_:1},8,["href"]),e("div",V,[e("div",A,[e("div",C,[t[20]||(t[20]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Request Details",-1)),e("div",M,[e("div",null,[t[8]||(t[8]=e("div",{class:"text-sm text-gray-500"},"Reference",-1)),e("div",S,l(s.flightRequest.request_reference),1)]),e("div",null,[t[9]||(t[9]=e("div",{class:"text-sm text-gray-500"},"Customer",-1)),e("div",T,l(s.flightRequest.user.name),1)]),e("div",null,[t[10]||(t[10]=e("div",{class:"text-sm text-gray-500"},"Route",-1)),e("div",U,l(s.flightRequest.route_name),1)]),s.flightRequest.trip_type!=="multi_city"?(o(),d("div",F,[t[11]||(t[11]=e("div",{class:"text-sm text-gray-500"},"Travel Date",-1)),e("div",N,l(c(s.flightRequest.travel_date)),1)])):a("",!0),s.flightRequest.trip_type==="round_trip"?(o(),d("div",z,[t[12]||(t[12]=e("div",{class:"text-sm text-gray-500"},"Return Date",-1)),e("div",j,l(c(s.flightRequest.return_date)),1)])):a("",!0),e("div",null,[t[13]||(t[13]=e("div",{class:"text-sm text-gray-500"},"Passengers",-1)),e("div",E,l(s.flightRequest.passengers_count)+" "+l(s.flightRequest.passengers_count===1?"Person":"People"),1)]),e("div",null,[t[14]||(t[14]=e("div",{class:"text-sm text-gray-500"},"Class",-1)),e("div",L,l(s.flightRequest.flight_class),1)]),e("div",null,[t[15]||(t[15]=e("div",{class:"text-sm text-gray-500"},"Budget",-1)),e("div",O,l(s.flightRequest.formatted_budget),1)]),s.flightRequest.prefer_direct_flights?(o(),d("div",I,[...t[16]||(t[16]=[e("div",{class:"flex items-center text-sm"},[e("svg",{class:"w-5 h-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e("span",{class:"text-gray-700"},"Prefers direct flights")],-1)])])):a("",!0),s.flightRequest.preferred_airlines&&s.flightRequest.preferred_airlines.length>0?(o(),d("div",X,[t[17]||(t[17]=e("div",{class:"text-sm text-gray-500 mb-2"},"Preferred Airlines",-1)),e("div",Y,[(o(!0),d(Q,null,_(s.flightRequest.preferred_airlines,n=>(o(),d("span",{key:n,class:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs"},l(n),1))),128))])])):a("",!0),s.flightRequest.preferred_time?(o(),d("div",$,[t[18]||(t[18]=e("div",{class:"text-sm text-gray-500"},"Preferred Time",-1)),e("div",H,l(s.flightRequest.preferred_time),1)])):a("",!0),s.flightRequest.special_requests?(o(),d("div",K,[t[19]||(t[19]=e("div",{class:"text-sm text-gray-500"},"Special Requests",-1)),e("div",G,l(s.flightRequest.special_requests),1)])):a("",!0)])])]),e("div",J,[e("div",W,[e("h2",Z,l(s.existingQuote?"Edit Your Quote":"Submit Your Quote"),1),s.existingQuote&&s.existingQuote.status!=="pending"?(o(),d("div",ee,[e("div",te,[t[21]||(t[21]=e("svg",{class:"w-5 h-5 text-yellow-600 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),e("div",null,[e("p",se,"Quote "+l(s.existingQuote.status),1),e("p",ie,"This quote has been "+l(s.existingQuote.status)+" and cannot be edited.",1)])])])):a("",!0),!s.existingQuote||s.existingQuote.status==="pending"?(o(),d("form",{key:1,onSubmit:R(h,["prevent"])},[e("div",re,[e("div",null,[t[24]||(t[24]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Flight Information",-1)),e("div",le,[e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[m(" Airline Name "),e("span",{class:"text-red-500"},"*")],-1)),x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>i(r).airline_name=n),type:"text",placeholder:"e.g., Emirates",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},null,512),[[f,i(r).airline_name]]),i(r).errors.airline_name?(o(),d("div",oe,l(i(r).errors.airline_name),1)):a("",!0)]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[m(" Flight Number "),e("span",{class:"text-red-500"},"*")],-1)),x(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>i(r).flight_number=n),type:"text",placeholder:"e.g., EK582",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},null,512),[[f,i(r).flight_number]]),i(r).errors.flight_number?(o(),d("div",de,l(i(r).errors.flight_number),1)):a("",!0)])])]),e("div",null,[t[28]||(t[28]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Pricing",-1)),e("div",ne,[e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[m(" Total Quoted Price (৳) "),e("span",{class:"text-red-500"},"*")],-1)),x(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>i(r).quoted_price=n),type:"number",min:"0",step:"100",placeholder:"e.g., 75000",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},null,512),[[f,i(r).quoted_price,void 0,{number:!0}]]),i(r).errors.quoted_price?(o(),d("div",ae,l(i(r).errors.quoted_price),1)):a("",!0)]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[m(" Valid Until "),e("span",{class:"text-red-500"},"*")],-1)),x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>i(r).valid_until=n),type:"date",min:p(),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},null,8,ue),[[f,i(r).valid_until]]),i(r).errors.valid_until?(o(),d("div",ge,l(i(r).errors.valid_until),1)):a("",!0)])]),e("div",me,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[m(" Price Breakdown "),e("span",{class:"text-red-500"},"*")],-1)),x(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=n=>i(r).price_breakdown=n),rows:"4",placeholder:`Break down the pricing:
Base fare: ৳50,000
Taxes & fees: ৳15,000
Baggage: ৳5,000
Service charge: ৳5,000
Total: ৳75,000`,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},null,512),[[f,i(r).price_breakdown]]),i(r).errors.price_breakdown?(o(),d("div",xe,l(i(r).errors.price_breakdown),1)):a("",!0)])]),e("div",null,[t[29]||(t[29]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Flight Details",-1)),x(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=n=>i(r).flight_details=n),rows:"6",placeholder:`Provide complete flight details:

Departure: DAC 10:30 AM
Arrival: DXB 2:45 PM (same day)
Duration: 5h 15m
Aircraft: Boeing 777-300ER
Layovers: Direct flight (no layovers)
Baggage: 30kg checked + 7kg cabin
Meal: Complimentary

Return (if applicable):
Departure: DXB 8:00 PM
Arrival: DAC 2:15 AM (next day)
...`,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},null,512),[[f,i(r).flight_details]]),i(r).errors.flight_details?(o(),d("div",fe,l(i(r).errors.flight_details),1)):a("",!0)]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Additional Notes (Optional) ",-1)),x(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=n=>i(r).notes=n),rows:"3",placeholder:"Any additional information for the customer...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[f,i(r).notes]])]),e("div",ce,[v(i(b),{href:g.route("agency.flight-requests.index"),class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition"},{default:y(()=>[...t[31]||(t[31]=[m(" Cancel ",-1)])]),_:1},8,["href"]),e("button",{type:"submit",disabled:i(r).processing,class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50"},[i(r).processing?(o(),d("span",be,"Processing...")):(o(),d("span",ve,l(s.existingQuote?"Update Quote":"Submit Quote"),1))],8,ye)])])],32)):s.existingQuote?(o(),d("div",pe,[e("div",he,[e("div",null,[t[32]||(t[32]=e("div",{class:"text-sm text-gray-500"},"Airline",-1)),e("div",qe,l(s.existingQuote.airline_name),1)]),e("div",null,[t[33]||(t[33]=e("div",{class:"text-sm text-gray-500"},"Flight Number",-1)),e("div",ke,l(s.existingQuote.flight_number),1)]),e("div",null,[t[34]||(t[34]=e("div",{class:"text-sm text-gray-500"},"Quoted Price",-1)),e("div",we,l(s.existingQuote.formatted_price),1)]),e("div",null,[t[35]||(t[35]=e("div",{class:"text-sm text-gray-500"},"Valid Until",-1)),e("div",Qe,l(c(s.existingQuote.valid_until)),1)])]),e("div",null,[t[36]||(t[36]=e("div",{class:"text-sm text-gray-500 mb-2"},"Price Breakdown",-1)),e("div",_e,l(s.existingQuote.price_breakdown),1)]),e("div",null,[t[37]||(t[37]=e("div",{class:"text-sm text-gray-500 mb-2"},"Flight Details",-1)),e("div",Re,l(s.existingQuote.flight_details),1)])])):a("",!0)])])])])])]),_:1}))}};export{Se as default};
