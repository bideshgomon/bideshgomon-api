import{B as w,c as n,y as S,n as p,z as y,a as t,G as U,M as C,o as l,u as A,j as k,m as B,p as u,k as b,g as r,x as c,t as m,F as f,q as v,Z as h,v as _,f as V,s as T}from"./vendor-DUGSf9MG.js";import{A as z}from"./AdminLayout-CRJ9cJUr.js";import{_ as M}from"./DateInput-BOMF3vob.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";import"./heroicons-BVxQTyTq.js";import"./useBangladeshFormat-DxO2X-Ux.js";const D=["type","disabled"],E={key:2},O={__name:"Button",props:{variant:{type:String,default:"primary",validator:o=>["primary","secondary","outline","ghost","danger","success"].includes(o)},size:{type:String,default:"md",validator:o=>["sm","md","lg"].includes(o)},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:[Object,Function],default:null},iconOnly:{type:Boolean,default:!1},type:{type:String,default:"button",validator:o=>["button","submit","reset"].includes(o)}},setup(o){const i=o,s=w(()=>{const g=["inline-flex items-center justify-center gap-2","font-semibold transition-all duration-base","focus:outline-none focus:ring-2 focus:ring-offset-2","disabled:opacity-50 disabled:cursor-not-allowed disabled:pointer-events-none","active:scale-95"],e={primary:"bg-brand-red-400 hover:bg-brand-red-600 text-white shadow-sm hover:shadow-brand-red focus:ring-brand-red-400",secondary:"bg-gray-100 hover:bg-gray-200 text-gray-700 shadow-sm focus:ring-gray-300",success:"bg-brand-green-400 hover:bg-brand-green-600 text-white shadow-sm hover:shadow-md focus:ring-brand-green-400",outline:"border-2 border-gray-200 hover:border-brand-red-400 text-gray-700 hover:text-brand-red-400 hover:bg-red-50 focus:ring-brand-red-400",ghost:"text-gray-700 hover:bg-gray-100 active:bg-gray-200 focus:ring-gray-300",danger:"bg-red-600 hover:bg-red-700 text-white shadow-sm hover:shadow-md focus:ring-red-500"},a={sm:i.iconOnly?"w-8 h-8 rounded-md":"h-9 px-4 text-sm rounded-md",md:i.iconOnly?"w-10 h-10 rounded-md":"h-10 px-6 text-base rounded-md",lg:i.iconOnly?"w-12 h-12 rounded-lg":"h-12 px-8 text-lg rounded-lg"};return[...g,e[i.variant],a[i.size]]}),x=w(()=>({sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"})[i.size]);return(g,e)=>(l(),n("button",{type:o.type,disabled:o.disabled||o.loading,class:y(s.value)},[o.loading?(l(),n("svg",{key:0,class:y(["animate-spin",x.value]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[...e[0]||(e[0]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])],2)):o.icon?(l(),S(U(o.icon),{key:1,class:y(x.value)},null,8,["class"])):p("",!0),!o.iconOnly&&!o.loading?(l(),n("span",E,[C(g.$slots,"default")])):p("",!0)],10,D))}},j={class:"container mx-auto px-4 py-8 max-w-4xl"},N={key:0,class:"text-red-500 text-sm mt-1"},F={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},I=["onUpdate:modelValue","value"],Y={class:"text-center"},$={class:"text-2xl mb-1"},L={class:"text-sm font-medium capitalize"},q={key:0,class:"text-red-500 text-sm mt-1"},R={key:0},H=["label"],P=["value"],G={key:0,class:"text-red-500 text-sm mt-1"},Z={class:"space-y-3"},J=["value"],K={class:"font-medium text-gray-900"},Q={class:"text-sm text-gray-600 mt-1"},W={key:0,class:"text-red-500 text-sm mt-1"},X={key:1,class:"bg-gray-50 p-4 rounded-lg"},ee={class:"space-y-3"},te={key:2,class:"bg-gray-50 p-4 rounded-lg"},se={key:0,class:"text-red-500 text-sm mt-1"},ae={class:"border-t pt-4"},re={class:"flex flex-wrap items-center cursor-pointer"},le={key:3,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},oe={class:"space-y-3"},ne={class:"flex flex-wrap justify-end gap-3 pt-4 border-t"},ie=["href"],de=["disabled"],ve={__name:"Edit",props:{campaign:Object,emailTemplates:Array},setup(o){const i=o,s=A({name:i.campaign.name||"",type:i.campaign.type||"email",email_template_id:i.campaign.email_template_id||"",audience_type:i.campaign.audience_type||"all_users",audience_filters:i.campaign.audience_filters||{},recipient_ids:i.campaign.recipient_ids||[],scheduled_at:i.campaign.scheduled_at||"",is_ab_test:i.campaign.is_ab_test||!1,ab_test_config:i.campaign.ab_test_config||{}}),x=()=>{s.put(route("admin.marketing-campaigns.update",i.campaign.id))};return(g,e)=>(l(),S(z,null,{default:k(()=>[t("div",j,[e[34]||(e[34]=t("div",{class:"mb-6"},[t("h1",{class:"text-3xl font-bold text-gray-900"}," Edit Marketing Campaign "),t("p",{class:"text-gray-600 mt-1"}," Update your campaign settings ")],-1)),t("form",{class:"bg-white rounded-lg shadow-sm p-6 space-y-6",onSubmit:B(x,["prevent"])},[t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Campaign Name "),t("span",{class:"text-red-500"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>r(s).name=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",placeholder:"e.g., Summer 2024 Promotion",required:""},null,512),[[c,r(s).name]]),r(s).errors.name?(l(),n("p",N,m(r(s).errors.name),1)):p("",!0)]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Campaign Type "),t("span",{class:"text-red-500"},"*")],-1)),t("div",F,[(l(),n(f,null,v(["email","sms","push","notification"],a=>t("label",{key:a,class:y(["flex items-center justify-center p-4 border-2 rounded-lg cursor-pointer transition",r(s).type===a?"border-blue-600 bg-brand-red/10":"border-gray-300 hover:border-blue-600"])},[u(t("input",{"onUpdate:modelValue":d=>r(s).type=d,type:"radio",value:a,class:"sr-only"},null,8,I),[[h,r(s).type]]),t("div",Y,[t("div",$,m(a==="email"?"ðŸ“§":a==="sms"?"ðŸ’¬":a==="push"?"ðŸ””":"ðŸ“¬"),1),t("div",L,m(a),1)])],2)),64))]),r(s).errors.type?(l(),n("p",q,m(r(s).errors.type),1)):p("",!0)]),r(s).type==="email"?(l(),n("div",R,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Email Template "),t("span",{class:"text-red-500"},"*")],-1)),u(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>r(s).email_template_id=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",required:""},[e[14]||(e[14]=t("option",{value:""}," Select a template ",-1)),(l(!0),n(f,null,v([...new Set(o.emailTemplates.map(a=>a.category))],a=>(l(),n("optgroup",{key:a,label:a},[(l(!0),n(f,null,v(o.emailTemplates.filter(d=>d.category===a),d=>(l(),n("option",{key:d.id,value:d.id},m(d.name),9,P))),128))],8,H))),128))],512),[[_,r(s).email_template_id]]),r(s).errors.email_template_id?(l(),n("p",G,m(r(s).errors.email_template_id),1)):p("",!0)])):p("",!0),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Target Audience "),t("span",{class:"text-red-500"},"*")],-1)),t("div",Z,[(l(),n(f,null,v(["all_users","segment","custom"],a=>t("label",{key:a,class:y(["flex flex-wrap items-start p-4 border-2 rounded-lg cursor-pointer transition",r(s).audience_type===a?"border-blue-600 bg-brand-red/10":"border-gray-300 hover:border-blue-600"])},[u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=d=>r(s).audience_type=d),type:"radio",value:a,class:"mt-1 mr-3"},null,8,J),[[h,r(s).audience_type]]),t("div",null,[t("div",K,m(a==="all_users"?"All Users":a==="segment"?"Segment":"Custom List"),1),t("div",Q,m(a==="all_users"?"Send to all registered users":a==="segment"?"Target specific user segments based on filters":"Upload or select specific recipients"),1)])],2)),64))]),r(s).errors.audience_type?(l(),n("p",W,m(r(s).errors.audience_type),1)):p("",!0)]),r(s).audience_type==="segment"?(l(),n("div",X,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Segment Filters",-1)),t("div",ee,[t("div",null,[e[18]||(e[18]=t("label",{class:"block text-xs text-gray-600 mb-1"},"User Status",-1)),u(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>r(s).audience_filters.status=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg"},[...e[17]||(e[17]=[t("option",{value:""}," Any Status ",-1),t("option",{value:"active"}," Active ",-1),t("option",{value:"inactive"}," Inactive ",-1)])],512),[[_,r(s).audience_filters.status]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-xs text-gray-600 mb-1"},"Has Application",-1)),u(t("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>r(s).audience_filters.has_application=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg"},[...e[19]||(e[19]=[t("option",{value:""}," Any ",-1),t("option",{value:"yes"}," Yes ",-1),t("option",{value:"no"}," No ",-1)])],512),[[_,r(s).audience_filters.has_application]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-xs text-gray-600 mb-1"},"Registered After",-1)),V(M,{modelValue:r(s).audience_filters.registered_after,"onUpdate:modelValue":e[5]||(e[5]=a=>r(s).audience_filters.registered_after=a),placeholder:"DD/MM/YYYY",class:"w-full"},null,8,["modelValue"])])])])):p("",!0),r(s).audience_type==="custom"?(l(),n("div",te,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recipient IDs",-1)),u(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=a=>r(s).recipient_ids_text=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:"4",placeholder:"Enter user IDs separated by commas (e.g., 1, 2, 3, 4)",onInput:e[7]||(e[7]=a=>r(s).recipient_ids=a.target.value.split(",").map(d=>d.trim()).filter(Boolean))},null,544),[[c,r(s).recipient_ids_text]]),e[24]||(e[24]=t("p",{class:"text-xs text-gray-600 mt-1"}," Enter user IDs separated by commas, or upload a CSV file ",-1))])):p("",!0),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Schedule Campaign ",-1)),u(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>r(s).scheduled_at=a),type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"},null,512),[[c,r(s).scheduled_at]]),e[26]||(e[26]=t("p",{class:"text-xs text-gray-600 mt-1"}," Leave empty to save as draft. Set a future date to schedule. ",-1)),r(s).errors.scheduled_at?(l(),n("p",se,m(r(s).errors.scheduled_at),1)):p("",!0)]),t("div",ae,[t("label",re,[u(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>r(s).is_ab_test=a),type:"checkbox",class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-600"},null,512),[[T,r(s).is_ab_test]]),e[27]||(e[27]=t("span",{class:"ml-2 text-sm font-medium text-gray-700"},"Enable A/B Testing",-1))]),e[28]||(e[28]=t("p",{class:"text-xs text-gray-600 mt-1 ml-6"}," Test different versions of your campaign to optimize performance ",-1))]),r(s).is_ab_test?(l(),n("div",le,[e[32]||(e[32]=t("h3",{class:"font-medium text-gray-900 mb-3"}," A/B Test Configuration ",-1)),t("div",oe,[t("div",null,[e[29]||(e[29]=t("label",{class:"block text-xs text-gray-600 mb-1"},"Test Split (%)",-1)),u(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>r(s).ab_test_config.split_percentage=a),type:"number",min:"10",max:"90",class:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"50"},null,512),[[c,r(s).ab_test_config.split_percentage,void 0,{number:!0}]]),e[30]||(e[30]=t("p",{class:"text-xs text-gray-500 mt-1"}," Percentage of users for variant A (remaining for B) ",-1))]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-xs text-gray-600 mb-1"},"Test Duration (hours)",-1)),u(t("input",{"onUpdate:modelValue":e[11]||(e[11]=a=>r(s).ab_test_config.duration_hours=a),type:"number",min:"1",max:"168",class:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"24"},null,512),[[c,r(s).ab_test_config.duration_hours,void 0,{number:!0}]])])])])):p("",!0),t("div",ne,[t("a",{href:g.route("admin.marketing-campaigns.index")},[V(O,{variant:"secondary",as:"span"},{default:k(()=>[...e[33]||(e[33]=[b(" Cancel ",-1)])]),_:1})],8,ie),t("button",{type:"submit",disabled:r(s).processing,class:"px-6 py-2 bg-blue-600 hover:bg-blue-700 transition-colors text-white rounded-lg hover:bg-brand-red-dark transition disabled:opacity-50"},m(r(s).processing?"Updating...":"Update Campaign"),9,de)])],32)])]),_:1}))}};export{ve as default};
