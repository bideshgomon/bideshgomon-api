import{r as f,K as G,B as C,c,f as o,g as r,i as H,j as v,a as e,n as b,l as w,k as u,t as n,p as y,D as J,x as Q,o as p,v as _,F as A,q as W,z as k,A as m}from"./vendor-DUGSf9MG.js";import{A as X}from"./AdminLayout-CRJ9cJUr.js";import{_ as Y}from"./Pagination-Cw5PI-56.js";import{e as $,az as j,i as Z,E as V,aB as E,q as F,a8 as ee,l as te,ah as se,ag as oe,o as re}from"./heroicons-BVxQTyTq.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";import"./DateInput-BOMF3vob.js";import"./useBangladeshFormat-DxO2X-Ux.js";const ie={class:"min-h-screen bg-gray-50 py-8"},le={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ne={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},de={class:"flex items-center justify-between"},ae={class:"flex items-center gap-3"},ue={class:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center"},ge={class:"flex gap-3"},ce={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6"},pe={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-5"},me={class:"flex items-center justify-between"},xe={class:"text-2xl font-bold text-gray-900"},fe={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-5"},ve={class:"flex items-center justify-between"},be={class:"text-2xl font-bold text-green-600"},ye={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-5"},he={class:"flex items-center justify-between"},we={class:"text-2xl font-bold text-red-600"},_e={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-5"},ke={class:"flex items-center justify-between"},Se={class:"text-2xl font-bold text-green-600"},Ue={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-5"},Ce={class:"flex items-center justify-between"},Ae={class:"text-2xl font-bold text-amber-600"},$e={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-5"},je={class:"flex items-center justify-between"},Ve={class:"text-2xl font-bold text-indigo-600"},Ee={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},Fe={class:"flex flex-col lg:flex-row gap-4"},De={class:"flex-1"},Be={class:"relative"},Me={key:0,class:"mt-4 pt-4 border-t border-gray-200"},Ne={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Pe={key:0,class:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 mb-6 flex items-center justify-between"},Ie={class:"text-indigo-900 font-medium"},Oe={class:"flex gap-2"},Re={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},qe={class:"overflow-x-auto"},ze={class:"min-w-full divide-y divide-gray-200"},Ke={class:"bg-gray-50"},Le={class:"px-6 py-3 text-left"},Te=["checked"],Ge={class:"bg-white divide-y divide-gray-200"},He={class:"px-6 py-4 whitespace-nowrap"},Je=["checked","onChange"],Qe={class:"px-6 py-4"},We={class:"flex items-center gap-3"},Xe={class:"h-10 w-10 rounded-full bg-indigo-600 flex items-center justify-center text-white font-semibold"},Ye={class:"font-medium text-gray-900"},Ze={class:"text-sm text-gray-500"},et={class:"px-6 py-4"},tt={class:"text-sm"},st={class:"text-gray-900"},ot={key:0,class:"text-gray-500"},rt={class:"px-6 py-4 whitespace-nowrap"},it={class:"px-6 py-4"},lt={class:"flex flex-col gap-1"},nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},dt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},at=["onClick"],ut={class:"bg-gray-50 px-6 py-4 border-t border-gray-200"},wt={__name:"Index",props:{users:Object,stats:Object,filters:Object},setup(d){const g=d,x=f(g.filters.search||""),l=f([]),h=f(!1),a=f({role:g.filters.role||"",status:g.filters.status||"",email_verified:g.filters.email_verified||"",country_id:g.filters.country_id||""}),D=()=>{l.value.length===g.users.data.length?l.value=[]:l.value=g.users.data.map(i=>i.id)},B=i=>{const t=l.value.indexOf(i);t>-1?l.value.splice(t,1):l.value.push(i)},M=()=>{m.get(route("admin.users.index"),{search:x.value,...a.value},{preserveState:!0,preserveScroll:!0})},N=()=>{m.get(route("admin.users.index"),{search:x.value,...a.value},{preserveState:!0,preserveScroll:!0})},P=()=>{x.value="",a.value={role:"",status:"",email_verified:"",country_id:""},m.get(route("admin.users.index"))},I=()=>{if(l.value.length===0){alert("Please select users to suspend");return}const i=prompt("Enter suspension reason:");i&&confirm(`Suspend ${l.value.length} user(s)?`)&&m.post(route("admin.users.bulk-suspend"),{user_ids:l.value,reason:i},{onSuccess:()=>{l.value=[]}})},O=()=>{if(l.value.length===0){alert("Please select users to unsuspend");return}confirm(`Unsuspend ${l.value.length} user(s)?`)&&m.post(route("admin.users.bulk-unsuspend"),{user_ids:l.value},{onSuccess:()=>{l.value=[]}})},R=()=>{window.location.href=route("admin.users.export",{search:x.value,...a.value})},q=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),S=G(),z=C(()=>S.props.auth?.user?.role?.slug==="admin"),K=C(()=>S.props.auth?.user?.impersonating),U=i=>!z.value||K.value?!1:i.role?.slug!=="admin",L=i=>{if(!U(i))return;const t=prompt(`Impersonate ${i.name}?

Please provide a reason (required for audit trail):`);!t||t.trim()===""||m.post(route("admin.users.impersonate",i.id),{purpose:t.trim()},{preserveScroll:!0,onSuccess:()=>{m.visit(route("dashboard"))},onError:s=>{console.error("Impersonation failed:",s),alert("Failed to impersonate user. "+(s.purpose||"Please try again."))}})};return(i,t)=>(p(),c(A,null,[o(r(H),{title:"User Management"}),o(X,null,{default:v(()=>[e("div",ie,[e("div",le,[e("div",ne,[e("div",de,[e("div",ae,[e("div",ue,[o(r($),{class:"h-6 w-6 text-indigo-600"})]),t[5]||(t[5]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"User Management"),e("p",{class:"text-sm text-gray-600 mt-0.5"},"Manage and moderate platform users")],-1))]),e("div",ge,[o(r(w),{href:i.route("admin.users.create"),class:"bg-indigo-600 text-white hover:bg-indigo-700 px-4 py-2.5 rounded-lg font-medium transition-colors flex items-center gap-2"},{default:v(()=>[o(r(j),{class:"h-5 w-5"}),t[6]||(t[6]=u(" Create User ",-1))]),_:1},8,["href"]),e("button",{onClick:R,class:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 px-4 py-2.5 rounded-lg font-medium transition-colors flex items-center gap-2"},[o(r(Z),{class:"h-5 w-5"}),t[7]||(t[7]=u(" Export CSV ",-1))])])])]),e("div",ce,[e("div",pe,[e("div",me,[e("div",null,[t[8]||(t[8]=e("p",{class:"text-sm font-medium text-gray-600 mb-1"},"Total Users",-1)),e("p",xe,n(d.stats.total),1)]),o(r($),{class:"h-8 w-8 text-indigo-500"})])]),e("div",fe,[e("div",ve,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-600 mb-1"},"Active",-1)),e("p",be,n(d.stats.active),1)]),o(r(V),{class:"h-8 w-8 text-green-500"})])]),e("div",ye,[e("div",he,[e("div",null,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-gray-600 mb-1"},"Suspended",-1)),e("p",we,n(d.stats.suspended),1)]),o(r(E),{class:"h-8 w-8 text-red-500"})])]),e("div",_e,[e("div",ke,[e("div",null,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-gray-600 mb-1"},"Verified",-1)),e("p",Se,n(d.stats.verified),1)]),o(r(F),{class:"h-8 w-8 text-green-500"})])]),e("div",Ue,[e("div",Ce,[e("div",null,[t[12]||(t[12]=e("p",{class:"text-sm font-medium text-gray-600 mb-1"},"Unverified",-1)),e("p",Ae,n(d.stats.unverified),1)]),o(r(ee),{class:"h-8 w-8 text-amber-500"})])]),e("div",$e,[e("div",je,[e("div",null,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-gray-600 mb-1"},"Admins",-1)),e("p",Ve,n(d.stats.admins),1)]),o(r(F),{class:"h-8 w-8 text-indigo-500"})])])]),e("div",Ee,[e("div",Fe,[e("div",De,[e("div",Be,[o(r(te),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-500"}),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>x.value=s),type:"text",onKeyup:J(M,["enter"]),placeholder:"Search by name, email, or phone...",class:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,544),[[Q,x.value]])])]),e("button",{onClick:t[1]||(t[1]=s=>h.value=!h.value),class:"px-5 py-2.5 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors flex items-center justify-center gap-2"},[o(r(se),{class:"h-5 w-5"}),t[14]||(t[14]=u(" Filters ",-1))])]),h.value?(p(),c("div",Me,[e("div",Ne,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Role",-1)),y(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.role=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},[...t[15]||(t[15]=[e("option",{value:""},"All Roles",-1),e("option",{value:"user"},"User",-1),e("option",{value:"admin"},"Admin",-1)])],512),[[_,a.value.role]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),y(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.status=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},[...t[17]||(t[17]=[e("option",{value:""},"All Statuses",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"suspended"},"Suspended",-1)])],512),[[_,a.value.status]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email Verification",-1)),y(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.email_verified=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},[...t[19]||(t[19]=[e("option",{value:""},"All",-1),e("option",{value:"verified"},"Verified",-1),e("option",{value:"unverified"},"Unverified",-1)])],512),[[_,a.value.email_verified]])]),e("div",{class:"flex items-end gap-2"},[e("button",{onClick:N,class:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium"}," Apply "),e("button",{onClick:P,class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium"}," Clear ")])])])):b("",!0)]),l.value.length>0?(p(),c("div",Pe,[e("span",Ie,n(l.value.length)+" user(s) selected",1),e("div",Oe,[e("button",{onClick:I,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium text-sm"},[o(r(E),{class:"h-4 w-4 inline mr-1"}),t[21]||(t[21]=u(" Suspend ",-1))]),e("button",{onClick:O,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium text-sm"},[o(r(V),{class:"h-4 w-4 inline mr-1"}),t[22]||(t[22]=u(" Unsuspend ",-1))])])])):b("",!0),e("div",Re,[e("div",qe,[e("table",ze,[e("thead",Ke,[e("tr",null,[e("th",Le,[e("input",{type:"checkbox",checked:l.value.length===d.users.data.length&&d.users.data.length>0,onChange:D,class:"h-4 w-4 text-indigo-600 rounded border-gray-300 focus:ring-indigo-500"},null,40,Te)]),t[23]||(t[23]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User ",-1)),t[24]||(t[24]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Contact ",-1)),t[25]||(t[25]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Role ",-1)),t[26]||(t[26]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),t[27]||(t[27]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Registered ",-1)),t[28]||(t[28]=e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",Ge,[(p(!0),c(A,null,W(d.users.data,s=>(p(),c("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",He,[e("input",{type:"checkbox",checked:l.value.includes(s.id),onChange:T=>B(s.id),class:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"},null,40,Je)]),e("td",Qe,[e("div",We,[e("div",Xe,n(s.name.charAt(0).toUpperCase()),1),e("div",null,[e("div",Ye,n(s.name),1),e("div",Ze,n(s.country?.name),1)])])]),e("td",et,[e("div",tt,[e("div",st,n(s.email),1),s.phone?(p(),c("div",ot,n(s.phone),1)):b("",!0)])]),e("td",rt,[e("span",{class:k(["px-3 py-1 rounded-full text-xs font-semibold",s.role?.slug==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"])},n(s.role?.name||"N/A"),3)]),e("td",it,[e("div",lt,[e("span",{class:k(["px-3 py-1 rounded-full text-xs font-semibold w-fit",s.suspended_at?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},n(s.suspended_at?"Suspended":"Active"),3),e("span",{class:k(["px-3 py-1 rounded-full text-xs font-semibold w-fit",s.email_verified_at?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},n(s.email_verified_at?"Verified":"Unverified"),3)])]),e("td",nt,n(q(s.created_at)),1),e("td",dt,[o(r(w),{href:i.route("admin.users.show",s.id),class:"text-blue-600 hover:text-blue-900 inline-flex items-center gap-1"},{default:v(()=>[o(r(oe),{class:"h-4 w-4"}),t[29]||(t[29]=u(" View ",-1))]),_:1},8,["href"]),o(r(w),{href:i.route("admin.users.edit",s.id),class:"ml-3 text-indigo-600 hover:text-indigo-900 inline-flex items-center gap-1"},{default:v(()=>[o(r(re),{class:"h-4 w-4"}),t[30]||(t[30]=u(" Edit ",-1))]),_:1},8,["href"]),U(s)?(p(),c("button",{key:0,onClick:T=>L(s),class:"ml-3 text-amber-600 hover:text-amber-800 inline-flex items-center gap-1",type:"button"},[o(r(j),{class:"h-4 w-4"}),t[31]||(t[31]=u(" Impersonate ",-1))],8,at)):b("",!0)])]))),128))])])]),e("div",ut,[o(Y,{links:d.users.links},null,8,["links"])])])])])]),_:1})],64))}};export{wt as default};
