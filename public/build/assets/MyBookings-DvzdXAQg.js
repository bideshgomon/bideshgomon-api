import{r as C,u as N,c as r,f as d,g as n,i as M,j as g,a as t,n as c,l as f,z as m,o as i,F as B,q as P,t as l,y as v,k as y,m as T,p as V,x as U,A}from"./vendor-DUGSf9MG.js";import{_ as R}from"./AuthenticatedLayout-DdydbOmd.js";import{a as Y,af as S,l as z,D as L,F as q}from"./heroicons-BVxQTyTq.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";const O={class:"min-h-screen bg-gray-50 pb-24"},E={class:"bg-sky-600 text-white px-4 pt-6 pb-20"},K={class:"max-w-4xl mx-auto"},G={class:"max-w-4xl mx-auto px-4 -mt-12 space-y-4"},H={class:"bg-white rounded-2xl shadow-lg p-2 flex space-x-2 overflow-x-auto"},I={key:0,class:"space-y-4"},J={class:"p-4 bg-sky-50 dark:bg-sky-900/20 border-b border-sky-100 dark:border-sky-800"},Q={class:"flex items-center justify-between mb-2"},W={class:"font-bold text-gray-900 text-lg"},X={class:"text-right"},Z={class:"font-semibold text-gray-900"},tt={class:"flex items-center space-x-2"},et={class:"p-5"},st={class:"flex items-center justify-between mb-3"},lt={class:"flex items-center space-x-3"},ot={class:"bg-sky-100 p-2 rounded-lg"},nt={class:"text-sky-700 font-bold text-sm"},at={class:"font-semibold text-gray-900 text-sm"},it={class:"text-xs text-gray-500"},rt={class:"text-right"},dt={class:"text-2xl font-bold text-sky-600"},ct={class:"flex items-center justify-between mb-4"},xt={class:"text-center flex-1"},ut={class:"text-2xl font-bold text-gray-900"},gt={class:"text-xs text-gray-600"},ft={class:"text-xs text-gray-500"},mt={class:"flex-1 flex flex-col items-center"},yt={class:"text-xs text-gray-500 mt-1"},bt={key:0,class:"text-xs text-green-600 font-medium mt-1"},ht={class:"text-center flex-1"},_t={class:"text-2xl font-bold text-gray-900"},pt={class:"text-xs text-gray-600"},vt={class:"text-xs text-gray-500"},wt={class:"grid grid-cols-2 gap-3 p-3 bg-gray-50 rounded-xl text-sm mb-4"},kt={class:"font-semibold text-gray-900"},Ct={class:"font-semibold text-gray-900"},Bt={class:"font-semibold text-gray-900 capitalize"},St={class:"font-semibold text-gray-900"},Dt={class:"flex space-x-3"},Ft=["onClick"],jt={key:0,class:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-xl"},$t={class:"flex items-center justify-between text-sm"},Nt={class:"font-bold text-blue-900"},Mt={key:0,class:"text-xs text-blue-600 mt-1"},Pt={key:1,class:"bg-white rounded-2xl shadow-lg p-12 text-center"},Tt={class:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},Vt={class:"text-gray-600 mb-6"},Ut={key:2,class:"flex justify-center space-x-3"},At={class:"bg-white rounded-2xl max-w-md w-full shadow-2xl"},Rt={class:"p-6"},Yt={class:"flex items-center justify-between mb-4"},zt={key:0,class:"mb-4"},Lt={class:"p-4 bg-yellow-50 border border-yellow-200 rounded-xl mb-4"},qt={class:"flex items-start space-x-2"},Ot={class:"text-sm"},Et={class:"text-yellow-700"},Kt={class:"mb-4"},Gt={class:"flex space-x-3"},Ht=["disabled"],se={__name:"MyBookings",props:{bookings:Object,filter:String},setup(a){const _=C(!1),x=C(null),u=N({cancellation_reason:""}),b=o=>{A.get(route("flight-booking.my-bookings",{filter:o}),{},{preserveState:!0,preserveScroll:!0})},p=o=>"à§³ "+Number(o).toLocaleString("en-BD",{minimumFractionDigits:0}),w=o=>new Date(o).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),k=o=>new Date("1970-01-01T"+o).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),D=o=>{x.value=o,_.value=!0},h=()=>{_.value=!1,x.value=null,u.reset()},F=()=>{if(!u.cancellation_reason){alert("Please provide a reason for cancellation");return}u.post(route("flight-booking.cancel",x.value.id),{preserveScroll:!0,onSuccess:()=>{h()}})},j=o=>({pending:"bg-yellow-100 text-yellow-800 border-yellow-200",confirmed:"bg-green-100 text-green-800 border-green-200",cancelled:"bg-red-100 text-red-800 border-red-200",completed:"bg-blue-100 text-blue-800 border-blue-200"})[o]||"bg-gray-100 text-gray-800 border-gray-200",$=o=>({pending:"bg-yellow-100 text-yellow-700",paid:"bg-green-100 text-green-700",failed:"bg-red-100 text-red-700",refunded:"bg-blue-100 text-blue-700"})[o]||"bg-gray-100 text-gray-700";return(o,e)=>(i(),r(B,null,[d(n(M),{title:"My Flight Bookings"}),d(R,null,{default:g(()=>[t("div",O,[t("div",E,[t("div",K,[d(n(f),{href:o.route("flight-booking.index"),class:"inline-flex items-center space-x-2 text-sky-100 hover:text-white mb-4 touch-manipulation"},{default:g(()=>[d(n(Y),{class:"h-5 w-5"}),e[5]||(e[5]=t("span",{class:"text-sm font-medium"},"Back to Search",-1))]),_:1},8,["href"]),e[6]||(e[6]=t("h1",{class:"text-3xl font-bold mb-2"},"My Flight Bookings",-1)),e[7]||(e[7]=t("p",{class:"text-sky-100"},"View and manage your flight reservations",-1))])]),t("div",G,[t("div",H,[t("button",{onClick:e[0]||(e[0]=s=>b("all")),class:m(["flex-1 min-w-[80px] px-4 py-3 rounded-xl text-sm font-semibold transition-all touch-manipulation",a.filter==="all"?"bg-sky-600 text-white shadow-md":"text-gray-600 hover:bg-gray-50"])}," All ",2),t("button",{onClick:e[1]||(e[1]=s=>b("upcoming")),class:m(["flex-1 min-w-[80px] px-4 py-3 rounded-xl text-sm font-semibold transition-all touch-manipulation",a.filter==="upcoming"?"bg-sky-600 text-white shadow-md":"text-gray-600 hover:bg-gray-50"])}," Upcoming ",2),t("button",{onClick:e[2]||(e[2]=s=>b("past")),class:m(["flex-1 min-w-[80px] px-4 py-3 rounded-xl text-sm font-semibold transition-all touch-manipulation",a.filter==="past"?"bg-sky-600 text-white shadow-md":"text-gray-600 hover:bg-gray-50"])}," Past ",2),t("button",{onClick:e[3]||(e[3]=s=>b("cancelled")),class:m(["flex-1 min-w-[80px] px-4 py-3 rounded-xl text-sm font-semibold transition-all touch-manipulation",a.filter==="cancelled"?"bg-sky-600 text-white shadow-md":"text-gray-600 hover:bg-gray-50"])}," Cancelled ",2)]),a.bookings.data.length>0?(i(),r("div",I,[(i(!0),r(B,null,P(a.bookings.data,s=>(i(),r("div",{key:s.id,class:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all"},[t("div",J,[t("div",Q,[t("div",null,[e[8]||(e[8]=t("div",{class:"text-xs text-gray-600"},"Booking Reference",-1)),t("div",W,l(s.booking_reference),1)]),t("div",X,[e[9]||(e[9]=t("div",{class:"text-xs text-gray-600"},"PNR Number",-1)),t("div",Z,l(s.pnr_number||"Pending"),1)])]),t("div",tt,[t("span",{class:m(["px-3 py-1 rounded-full text-xs font-semibold border",j(s.status)])},l(s.status.toUpperCase()),3),t("span",{class:m(["px-3 py-1 rounded-full text-xs font-semibold",$(s.payment_status)])},l(s.payment_status.toUpperCase()),3)])]),t("div",et,[t("div",st,[t("div",lt,[t("div",ot,[t("span",nt,l(s.flight_route.airline_code),1)]),t("div",null,[t("div",at,l(s.flight_route.airline_name),1),t("div",it,l(s.flight_route.flight_number),1)])]),t("div",rt,[t("div",dt,l(p(s.total_amount)),1)])]),t("div",ct,[t("div",xt,[t("div",ut,l(s.flight_route.origin_airport_code),1),t("div",gt,l(k(s.flight_route.departure_time)),1),t("div",ft,l(s.flight_route.origin_city),1)]),t("div",mt,[d(n(S),{class:"h-5 w-5 text-gray-400"}),t("div",yt,l(s.flight_route.flight_duration),1),s.flight_route.is_direct?(i(),r("div",bt,"Direct")):c("",!0)]),t("div",ht,[t("div",_t,l(s.flight_route.destination_airport_code),1),t("div",pt,l(k(s.flight_route.arrival_time)),1),t("div",vt,l(s.flight_route.destination_city),1)])]),t("div",wt,[t("div",null,[e[10]||(e[10]=t("span",{class:"text-gray-600"},"Travel Date:",-1)),t("div",kt,l(w(s.travel_date)),1)]),t("div",null,[e[11]||(e[11]=t("span",{class:"text-gray-600"},"Passengers:",-1)),t("div",Ct,l(s.passengers_count),1)]),t("div",null,[e[12]||(e[12]=t("span",{class:"text-gray-600"},"Class:",-1)),t("div",Bt,l(s.flight_class.replace("_"," ")),1)]),t("div",null,[e[13]||(e[13]=t("span",{class:"text-gray-600"},"Booked On:",-1)),t("div",St,l(w(s.created_at)),1)])]),t("div",Dt,[d(n(f),{href:o.route("flight-booking.booking-details",s.id),class:"flex-1 bg-sky-600 text-white text-center py-3 rounded-xl font-semibold hover:bg-sky-700 transition-all text-sm"},{default:g(()=>[...e[14]||(e[14]=[y(" View Details ",-1)])]),_:1},8,["href"]),s.ticket_issued&&s.status==="confirmed"?(i(),v(n(f),{key:0,href:o.route("flight-booking.download-ticket",s.id),class:"flex-1 bg-green-600 text-white text-center py-3 rounded-xl font-semibold hover:bg-green-700 transition-all text-sm"},{default:g(()=>[...e[15]||(e[15]=[y(" Download Ticket ",-1)])]),_:1},8,["href"])):c("",!0),s.can_cancel?(i(),r("button",{key:1,onClick:It=>D(s),class:"flex-1 bg-red-600 text-white py-3 rounded-xl font-semibold hover:bg-red-700 transition-all text-sm"}," Cancel Booking ",8,Ft)):c("",!0)]),s.status==="cancelled"&&s.refund_amount?(i(),r("div",jt,[t("div",$t,[e[16]||(e[16]=t("span",{class:"text-blue-700 font-medium"},"Refund Amount:",-1)),t("span",Nt,l(p(s.refund_amount)),1)]),s.cancellation_reason?(i(),r("div",Mt," Reason: "+l(s.cancellation_reason),1)):c("",!0)])):c("",!0)])]))),128))])):(i(),r("div",Pt,[t("div",Tt,[d(n(z),{class:"h-10 w-10 text-gray-400"})]),e[18]||(e[18]=t("h3",{class:"text-xl font-bold text-gray-900 mb-2"},"No Bookings Found",-1)),t("p",Vt,l(a.filter==="upcoming"?"You don't have any upcoming flights.":a.filter==="past"?"You don't have any past flights.":a.filter==="cancelled"?"You don't have any cancelled bookings.":"You haven't booked any flights yet."),1),d(n(f),{href:o.route("flight-booking.index"),class:"inline-flex items-center px-6 py-3 bg-sky-600 hover:bg-sky-700 text-white rounded-xl font-semibold transition-all shadow-md"},{default:g(()=>[e[17]||(e[17]=y(" Search Flights ",-1)),d(n(S),{class:"h-5 w-5 ml-2"})]),_:1},8,["href"])])),a.bookings.data.length>0&&(a.bookings.prev_page_url||a.bookings.next_page_url)?(i(),r("div",Ut,[a.bookings.prev_page_url?(i(),v(n(f),{key:0,href:a.bookings.prev_page_url,class:"px-5 py-3 bg-white text-gray-700 rounded-xl font-semibold hover:bg-gray-50 shadow-md transition-all"},{default:g(()=>[...e[19]||(e[19]=[y(" Previous ",-1)])]),_:1},8,["href"])):c("",!0),a.bookings.next_page_url?(i(),v(n(f),{key:1,href:a.bookings.next_page_url,class:"px-5 py-3 bg-white text-gray-700 rounded-xl font-semibold hover:bg-gray-50 shadow-md transition-all"},{default:g(()=>[...e[20]||(e[20]=[y(" Next ",-1)])]),_:1},8,["href"])):c("",!0)])):c("",!0)])]),_.value?(i(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:T(h,["self"])},[t("div",At,[t("div",Rt,[t("div",Yt,[e[21]||(e[21]=t("h3",{class:"text-xl font-bold text-gray-900"},"Cancel Booking",-1)),t("button",{onClick:h,class:"text-gray-400 hover:text-gray-600 transition-colors"},[d(n(L),{class:"h-6 w-6"})])]),x.value?(i(),r("div",zt,[t("div",Lt,[t("div",qt,[d(n(q),{class:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),t("div",Ot,[e[22]||(e[22]=t("p",{class:"text-yellow-900 font-medium mb-1"},"Cancellation Fee Applicable",-1)),t("p",Et," A "+l(x.value.flight_route.cancellation_fee_percentage)+"% cancellation fee will be deducted. You'll receive a refund of approximately "+l(p(x.value.total_amount*(1-x.value.flight_route.cancellation_fee_percentage/100)))+". ",1)])])]),t("div",Kt,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Reason for Cancellation * ",-1)),V(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>n(u).cancellation_reason=s),rows:"4",class:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-sky-500 focus:ring-0",placeholder:"Please tell us why you're cancelling this booking...",required:""},null,512),[[U,n(u).cancellation_reason]])])])):c("",!0),t("div",Gt,[t("button",{onClick:h,class:"flex-1 px-4 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition-all"}," Keep Booking "),t("button",{onClick:F,disabled:n(u).processing,class:"flex-1 px-4 py-3 bg-red-600 text-white rounded-xl font-semibold hover:bg-red-700 transition-all disabled:opacity-50"},l(n(u).processing?"Cancelling...":"Cancel Booking"),9,Ht)])])])])):c("",!0)]),_:1})],64))}};export{se as default};
