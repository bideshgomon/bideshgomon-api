import{r as p,B as J,c as a,f as i,g as d,i as O,j as $,a as e,k as x,t as l,n as c,p as w,D as E,x as z,o,F as _,q as j,v as S,z as V,y as P,G as U,l as R,A as D}from"./vendor-DUGSf9MG.js";import{A as K}from"./AdminLayout-CRJ9cJUr.js";import{i as q,l as G,ah as I,v as F,g as Q,b as W,E as M,s as X,ag as Y,H as Z,a8 as ee}from"./heroicons-BVxQTyTq.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";import"./DateInput-BOMF3vob.js";import"./useBangladeshFormat-DxO2X-Ux.js";const te={class:"min-h-screen bg-gray-50 pb-12"},se={class:"bg-white border-b border-gray-200 px-4 py-8 sm:px-6 lg:px-8"},le={class:"max-w-7xl mx-auto"},oe={class:"flex items-center justify-between"},ne={class:"grid grid-cols-2 md:grid-cols-6 gap-3 mt-8"},re={class:"bg-gray-50 border border-gray-200 rounded-xl p-3"},ae={class:"text-2xl font-bold text-gray-900 mt-1"},ie={class:"bg-yellow-50 border border-yellow-200 rounded-xl p-3"},de={class:"text-2xl font-bold text-yellow-900 mt-1"},ue={class:"bg-blue-50 border border-blue-200 rounded-xl p-3"},ce={class:"text-2xl font-bold text-blue-900 mt-1"},xe={class:"bg-purple-50 border border-purple-200 rounded-xl p-3"},ge={class:"text-2xl font-bold text-purple-900 mt-1"},me={class:"bg-red-50 border border-red-200 rounded-xl p-3"},pe={class:"text-2xl font-bold text-red-900 mt-1"},be={class:"bg-green-50 border border-green-200 rounded-xl p-3"},ve={class:"text-2xl font-bold text-green-900 mt-1"},fe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-6"},ye={class:"bg-white rounded-2xl shadow-sm p-6 mb-6"},he={class:"flex flex-col md:flex-row gap-4"},we={class:"flex-1 relative"},_e={key:0,class:"ml-2 px-2 py-0.5 bg-blue-600 text-white text-xs rounded-full"},ke={key:0,class:"mt-4 pt-4 border-t border-gray-200"},je={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Se=["value"],Ce={key:0,class:"bg-blue-50 rounded-xl p-4 mb-6 flex items-center justify-between"},Ae={class:"text-sm font-medium text-blue-900"},$e={class:"flex gap-2"},Ve={class:"space-y-4"},Pe={key:0,class:"bg-white rounded-2xl shadow-sm p-12 text-center"},Ue={class:"flex items-start gap-4"},Re=["checked","onChange"],De={class:"flex-1"},Fe={class:"flex items-start justify-between mb-3"},Me={class:"flex-1"},Be={class:"flex items-center gap-3 mb-2"},He={class:"text-lg font-bold text-gray-900"},Le={key:0,class:"px-3 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full"},Ne={class:"text-gray-600 text-sm mb-3"},Te={class:"flex flex-wrap items-center gap-4 text-sm text-gray-600 mb-3"},Je={class:"flex items-center"},Oe={class:"flex items-center"},Ee={key:0,class:"flex items-center"},ze={class:"flex items-center gap-2 text-sm"},Ke={class:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full"},qe={class:"px-3 py-1 bg-blue-50 text-blue-700 rounded-full"},Ge={key:0,class:"px-3 py-1 bg-purple-50 text-purple-700 rounded-full flex items-center gap-1"},Ie={key:1,class:"mt-8 flex items-center justify-between"},Qe={class:"text-sm text-gray-700"},We={class:"flex items-center space-x-2"},at={__name:"Index",props:{applications:Object,jobs:Array,filters:Object,stats:Object},setup(r){const y=r,b=p(y.filters.search||""),g=p(y.filters.job_id||""),m=p(y.filters.status||""),v=p(y.filters.payment_status||""),k=p(!1),u=p([]),f=()=>{D.get(route("admin.applications.index"),{search:b.value,job_id:g.value,status:m.value,payment_status:v.value},{preserveState:!0,replace:!0})},B=()=>{b.value="",g.value="",m.value="",v.value="",f()},C=J(()=>b.value||g.value||m.value||v.value),H=n=>{const t=u.value.indexOf(n);t>-1?u.value.splice(t,1):u.value.push(n)},h=n=>{if(u.value.length===0){alert("Please select applications to update");return}const t=prompt("Add admin notes (optional):");confirm(`Update ${u.value.length} application(s) to ${n}?`)&&D.post(route("admin.applications.bulk-update-status"),{application_ids:u.value,status:n,admin_notes:t||null},{onSuccess:()=>u.value=[]})},L=()=>{const n=new URLSearchParams({job_id:g.value,status:m.value});window.location.href=route("admin.applications.export")+"?"+n.toString()},N=n=>({pending:"bg-yellow-100 text-yellow-700",reviewed:"bg-blue-100 text-blue-700",shortlisted:"bg-purple-100 text-purple-700",rejected:"bg-red-100 text-red-700",hired:"bg-green-100 text-green-700"})[n]||"bg-gray-100 text-gray-700",T=n=>{switch(n){case"hired":return M;case"rejected":return ee;case"pending":return Z;default:return F}},A=n=>n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return(n,t)=>(o(),a(_,null,[i(d(O),{title:"Job Applications Management"}),i(K,null,{default:$(()=>[e("div",te,[e("div",se,[e("div",le,[e("div",oe,[t[10]||(t[10]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Job Applications"),e("p",{class:"mt-2 text-gray-600"},"Review and manage all job applications")],-1)),e("button",{onClick:L,class:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 transition-all shadow-sm"},[i(d(q),{class:"h-5 w-5 mr-2"}),t[9]||(t[9]=x(" Export CSV ",-1))])]),e("div",ne,[e("div",re,[t[11]||(t[11]=e("div",{class:"text-gray-600 text-xs font-medium"},"Total",-1)),e("div",ae,l(r.stats.total),1)]),e("div",ie,[t[12]||(t[12]=e("div",{class:"text-yellow-700 text-xs font-medium"},"Pending",-1)),e("div",de,l(r.stats.pending),1)]),e("div",ue,[t[13]||(t[13]=e("div",{class:"text-blue-700 text-xs font-medium"},"Reviewed",-1)),e("div",ce,l(r.stats.reviewed),1)]),e("div",xe,[t[14]||(t[14]=e("div",{class:"text-purple-700 text-xs font-medium"},"Shortlisted",-1)),e("div",ge,l(r.stats.shortlisted),1)]),e("div",me,[t[15]||(t[15]=e("div",{class:"text-red-700 text-xs font-medium"},"Rejected",-1)),e("div",pe,l(r.stats.rejected),1)]),e("div",be,[t[16]||(t[16]=e("div",{class:"text-green-700 text-xs font-medium"},"Hired",-1)),e("div",ve,l(r.stats.hired),1)])])])]),e("div",fe,[e("div",ye,[e("div",he,[e("div",we,[i(d(G),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>b.value=s),onKeyup:E(f,["enter"]),type:"text",placeholder:"Search by applicant name or email...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,544),[[z,b.value]])]),e("button",{onClick:t[1]||(t[1]=s=>k.value=!k.value),class:"inline-flex items-center px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors"},[i(d(I),{class:"h-5 w-5 mr-2"}),t[17]||(t[17]=x(" Filters ",-1)),C.value?(o(),a("span",_e,"Active")):c("",!0)])]),k.value?(o(),a("div",ke,[e("div",je,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Job Posting",-1)),w(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>g.value=s),onChange:f,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[t[18]||(t[18]=e("option",{value:""},"All Jobs",-1)),(o(!0),a(_,null,j(r.jobs,s=>(o(),a("option",{key:s.id,value:s.id},l(s.title)+" - "+l(s.company_name),9,Se))),128))],544),[[S,g.value]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),w(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>m.value=s),onChange:f,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...t[20]||(t[20]=[e("option",{value:""},"All Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"reviewed"},"Reviewed",-1),e("option",{value:"shortlisted"},"Shortlisted",-1),e("option",{value:"rejected"},"Rejected",-1),e("option",{value:"hired"},"Hired",-1)])],544),[[S,m.value]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Payment Status",-1)),w(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>v.value=s),onChange:f,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...t[22]||(t[22]=[e("option",{value:""},"All Payments",-1),e("option",{value:"paid"},"Paid",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"failed"},"Failed",-1)])],544),[[S,v.value]])])]),C.value?(o(),a("button",{key:0,onClick:B,class:"mt-4 text-sm text-blue-600 hover:text-blue-700 font-medium"}," Clear all filters ")):c("",!0)])):c("",!0)]),u.value.length>0?(o(),a("div",Ce,[e("span",Ae,l(u.value.length)+" application(s) selected",1),e("div",$e,[e("button",{onClick:t[5]||(t[5]=s=>h("reviewed")),class:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors"}," Mark Reviewed "),e("button",{onClick:t[6]||(t[6]=s=>h("shortlisted")),class:"px-4 py-2 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition-colors"}," Shortlist "),e("button",{onClick:t[7]||(t[7]=s=>h("rejected")),class:"px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors"}," Reject "),e("button",{onClick:t[8]||(t[8]=s=>h("hired")),class:"px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors"}," Mark Hired ")])])):c("",!0),e("div",Ve,[r.applications.data.length===0?(o(),a("div",Pe,[i(d(F),{class:"h-16 w-16 text-gray-400 mx-auto mb-4"}),t[24]||(t[24]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"No applications found",-1)),t[25]||(t[25]=e("p",{class:"text-gray-600"},"Try adjusting your filters",-1))])):c("",!0),(o(!0),a(_,null,j(r.applications.data,s=>(o(),a("div",{key:s.id,class:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-shadow p-6"},[e("div",Ue,[e("input",{type:"checkbox",checked:u.value.includes(s.id),onChange:Xe=>H(s.id),class:"mt-1 h-5 w-5 text-blue-600 rounded border-gray-300 focus:ring-blue-500"},null,40,Re),e("div",De,[e("div",Fe,[e("div",Me,[e("div",Be,[e("h3",He,l(s.user?.name||"Unknown User"),1),e("span",{class:V([N(s.status),"px-3 py-1 text-xs font-semibold rounded-full flex items-center gap-1"])},[(o(),P(U(T(s.status)),{class:"h-3 w-3"})),x(" "+l(s.status),1)],2),s.payment_status==="paid"?(o(),a("span",Le," âœ“ Paid ")):c("",!0)]),e("p",Ne,l(s.user?.email),1),e("div",Te,[e("div",Je,[i(d(Q),{class:"h-4 w-4 mr-1"}),x(" "+l(s.job_posting?.title),1)]),e("div",Oe,[i(d(W),{class:"h-4 w-4 mr-1"}),x(" Applied "+l(A(s.submitted_at||s.created_at)),1)]),s.reviewed_at?(o(),a("div",Ee,[i(d(M),{class:"h-4 w-4 mr-1"}),x(" Reviewed "+l(A(s.reviewed_at)),1)])):c("",!0)]),e("div",ze,[e("span",Ke,l(s.job_posting?.company_name),1),e("span",qe,l(s.job_posting?.country?.name),1),s.user_cv?(o(),a("span",Ge,[i(d(X),{class:"h-3 w-3"}),t[26]||(t[26]=x(" CV Attached ",-1))])):c("",!0)])]),i(d(R),{href:n.route("admin.applications.show",s.id),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details"},{default:$(()=>[i(d(Y),{class:"h-5 w-5"})]),_:1},8,["href"])])])])]))),128))]),r.applications.data.length>0?(o(),a("div",Ie,[e("div",Qe," Showing "+l(r.applications.from)+" to "+l(r.applications.to)+" of "+l(r.applications.total)+" applications ",1),e("div",We,[(o(!0),a(_,null,j(r.applications.links,s=>(o(),P(U(s.url?d(R):"span"),{key:s.label,href:s.url||void 0,class:V(["px-4 py-2 text-sm rounded-lg font-medium",s.active?"bg-blue-600 text-white":s.url?"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300":"bg-gray-100 text-gray-400 cursor-not-allowed"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])):c("",!0)])])]),_:1})],64))}};export{at as default};
