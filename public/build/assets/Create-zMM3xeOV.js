import{u as I,r as k,B as R,c as i,f as w,g as r,i as j,j as S,a as e,l as L,k as d,p as u,o as n,z as O,F as y,q as x,t as a,C as D,m as N,n as p,v as C,x as f}from"./vendor-DUGSf9MG.js";import{A as z}from"./AdminLayout-CRJ9cJUr.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";import"./heroicons-BVxQTyTq.js";import"./DateInput-BOMF3vob.js";import"./useBangladeshFormat-DxO2X-Ux.js";const q={class:"py-12"},G={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},H={class:"mb-8"},P={class:"flex items-center justify-between mb-4"},F={class:"flex gap-2"},J={class:"relative"},K={class:"absolute right-0 z-10 mt-2 w-80 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},W={class:"py-1"},$=["onClick"],X={class:"flex items-start gap-3"},Q={class:"flex-shrink-0 mt-0.5"},Y={class:"inline-flex items-center rounded-full px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800"},Z={class:"flex-1 min-w-0"},ee={class:"font-medium text-gray-900 truncate"},te={class:"text-xs text-gray-500 mt-0.5"},se={class:"bg-white shadow-sm rounded-lg p-6"},oe=["value"],re={key:0,class:"mt-1 text-sm text-red-600"},ie=["value"],ne={key:0,class:"mt-1 text-xs text-gray-500"},ae={key:1,class:"mt-1 text-sm text-red-600"},le=["value"],de={key:0,class:"mt-1 text-sm text-red-600"},ue={key:0,class:"mt-1 text-sm text-gray-500"},ce={key:2,class:"mt-1 text-sm text-red-600"},me=["value"],pe={key:0,class:"mt-1 text-sm text-red-600"},ge={class:"relative"},ye={class:"flex items-center justify-end space-x-3 pt-4 border-t"},ve=["disabled"],xe={key:0},fe={key:1},Ae={__name:"Create",props:{agencies:Array,serviceModules:Array,countries:Array,resourceTypes:Object},setup(g){const c=g,s=I({agency_id:"",service_module_id:"",resource_type:"university",resource_name:"",resource_code:"",country_id:"",city:"",description:"",special_commission_rate:"",metadata:{}}),M=k(!1),b=k(""),_=k(!0),U=[{name:"Harvard University - Student Visa",data:{resource_type:"university",resource_name:"Harvard University",resource_code:"HARV-001",city:"Cambridge, Massachusetts",description:"World-renowned Ivy League university offering undergraduate and graduate programs across various disciplines. Partner agency handles all student visa applications for this institution.",special_commission_rate:"25"}},{name:"Oxford International School - Study Abroad",data:{resource_type:"school",resource_name:"Oxford International School",resource_code:"OIS-UK-2024",city:"Oxford",description:"Premium international school with A-Level and IB programs. Exclusive partnership for international student admissions and visa processing.",special_commission_rate:"20"}},{name:"British Council Language Centre",data:{resource_type:"language_center",resource_name:"British Council English Language Centre",resource_code:"BC-ENG-001",city:"London",description:"Official British Council language training center. Agency has exclusive rights for IELTS preparation courses and student visa applications.",special_commission_rate:"15"}},{name:"Global Tech Training Institute",data:{resource_type:"training_institute",resource_name:"Global Tech Training Institute",resource_code:"GTTI-2024",city:"Toronto",description:"Professional IT training institute offering coding bootcamps and certification programs. Exclusive partner for international student enrollment.",special_commission_rate:"18"}},{name:"JobsGlobal Portal - Work Visa",data:{resource_type:"job_portal",resource_name:"JobsGlobal International",resource_code:"JG-INT-001",city:"Dubai",description:"Premium job portal connecting skilled workers with international employers. Exclusive agency for visa sponsorship applications.",special_commission_rate:"30"}}],B=l=>{if(Object.keys(l.data).forEach(t=>{s[t]=l.data[t]}),!s.agency_id&&c.agencies.length>0&&(s.agency_id=c.agencies[0].id),!s.service_module_id&&c.serviceModules.length>0&&(s.service_module_id=c.serviceModules[0].id),!s.country_id&&c.countries.length>0){const o={"Cambridge, Massachusetts":"United States",Oxford:"United Kingdom",London:"United Kingdom",Toronto:"Canada",Dubai:"United Arab Emirates"}[l.data.city],m=c.countries.find(A=>A.name===o);m?s.country_id=m.id:s.country_id=c.countries[0].id}setTimeout(()=>{h()},100)},V=()=>{s.reset(),b.value="",_.value=!0},v=k(!1),T=R(()=>c.serviceModules.find(l=>l.id===s.service_module_id)),h=async()=>{if(!(!s.service_module_id||!s.resource_type||!s.resource_name)){M.value=!0;try{const t=await(await fetch(route("admin.agency-resources.check-availability"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({service_module_id:s.service_module_id,resource_type:s.resource_type,resource_name:s.resource_name})})).json();_.value=t.available,b.value=t.message}catch(l){console.error("Error checking availability:",l)}finally{M.value=!1}}},E=()=>{s.post(route("admin.agency-resources.store"),{preserveScroll:!0})};return(l,t)=>(n(),i(y,null,[w(r(j),{title:"Add Agency Resource"}),w(z,null,{default:S(()=>[e("div",q,[e("div",G,[e("div",H,[e("div",P,[w(r(L),{href:l.route("admin.agency-resources.index"),class:"text-sm text-gray-600 hover:text-gray-900 inline-flex items-center transition"},{default:S(()=>[...t[10]||(t[10]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),d(" Back to Resources ",-1)])]),_:1},8,["href"]),e("div",F,[e("button",{type:"button",onClick:V,class:"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-700 border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},[...t[11]||(t[11]=[e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})],-1),d(" Clear ",-1)])]),e("div",J,[e("button",{type:"button",onClick:t[0]||(t[0]=o=>v.value=!v.value),class:"inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-700 transition"},[t[13]||(t[13]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})],-1)),t[14]||(t[14]=d(" Demo Data ",-1)),(n(),i("svg",{class:O(["ml-1.5 h-5 w-5 transition-transform",{"rotate-180":v.value}]),fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...t[12]||(t[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"},null,-1)])],2))]),u(e("div",K,[e("div",W,[t[15]||(t[15]=e("div",{class:"px-4 py-2 border-b border-gray-200"},[e("p",{class:"text-xs font-medium text-gray-900"},"Select Demo Resource"),e("p",{class:"text-xs text-gray-500"},"Choose a sample to auto-fill the form")],-1)),(n(),i(y,null,x(U,(o,m)=>e("button",{key:m,type:"button",onClick:A=>{B(o),v.value=!1},class:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 border-b border-gray-100 last:border-0 transition-colors"},[e("div",X,[e("div",Q,[e("span",Y,a(g.resourceTypes[o.data.resource_type]),1)]),e("div",Z,[e("p",ee,a(o.data.resource_name),1),e("p",te,a(o.data.city),1)])])],8,$)),64))])],512),[[D,v.value]])])])]),t[16]||(t[16]=e("h2",{class:"text-3xl font-bold text-gray-900"},"Add Exclusive Resource",-1)),t[17]||(t[17]=e("p",{class:"mt-1 text-sm text-gray-600"},"Assign an exclusive resource (university, school, etc.) to an agency",-1))]),e("div",se,[e("form",{onSubmit:N(E,["prevent"]),class:"space-y-6"},[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d(" Agency "),e("span",{class:"text-red-500"},"*")],-1)),u(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>r(s).agency_id=o),required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[18]||(t[18]=e("option",{value:""},"Select Agency",-1)),(n(!0),i(y,null,x(g.agencies,o=>(n(),i("option",{key:o.id,value:o.id},a(o.name)+" ("+a(o.email)+") ",9,oe))),128))],512),[[C,r(s).agency_id]]),r(s).errors.agency_id?(n(),i("p",re,a(r(s).errors.agency_id),1)):p("",!0)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d(" Service Type "),e("span",{class:"text-red-500"},"*")],-1)),u(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>r(s).service_module_id=o),onChange:h,required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[20]||(t[20]=e("option",{value:""},"Select Service (Exclusive Resource Only)",-1)),(n(!0),i(y,null,x(g.serviceModules,o=>(n(),i("option",{key:o.id,value:o.id},a(o.name),9,ie))),128))],544),[[C,r(s).service_module_id]]),T.value?(n(),i("p",ne," Commission Rate: "+a(T.value.platform_commission_rate)+"% ",1)):p("",!0),r(s).errors.service_module_id?(n(),i("p",ae,a(r(s).errors.service_module_id),1)):p("",!0)]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d(" Resource Type "),e("span",{class:"text-red-500"},"*")],-1)),u(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>r(s).resource_type=o),onChange:h,required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(n(!0),i(y,null,x(g.resourceTypes,(o,m)=>(n(),i("option",{key:m,value:m},a(o),9,le))),128))],544),[[C,r(s).resource_type]]),r(s).errors.resource_type?(n(),i("p",de,a(r(s).errors.resource_type),1)):p("",!0)]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d(" Resource Name "),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>r(s).resource_name=o),onBlur:h,type:"text",required:"",placeholder:"e.g., Harvard University, Oxford International School",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,544),[[f,r(s).resource_name]]),M.value?(n(),i("p",ue,"Checking availability...")):b.value?(n(),i("p",{key:1,class:O([_.value?"text-green-600":"text-red-600","mt-1 text-sm font-medium"])},a(b.value),3)):p("",!0),r(s).errors.resource_name?(n(),i("p",ce,a(r(s).errors.resource_name),1)):p("",!0)]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Resource Code (Optional) ",-1)),u(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>r(s).resource_code=o),type:"text",placeholder:"University code, school ID, etc.",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[f,r(s).resource_code]]),t[25]||(t[25]=e("p",{class:"mt-1 text-xs text-gray-500"},"Internal identifier for the resource",-1))]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d(" Country "),e("span",{class:"text-red-500"},"*")],-1)),u(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>r(s).country_id=o),required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[26]||(t[26]=e("option",{value:""},"Select Country",-1)),(n(!0),i(y,null,x(g.countries,o=>(n(),i("option",{key:o.id,value:o.id},a(o.name)+" ("+a(o.iso_code_2)+") ",9,me))),128))],512),[[C,r(s).country_id]]),r(s).errors.country_id?(n(),i("p",pe,a(r(s).errors.country_id),1)):p("",!0)]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," City (Optional) ",-1)),u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>r(s).city=o),type:"text",placeholder:"e.g., Cambridge, Boston",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[f,r(s).city]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Description (Optional) ",-1)),u(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=o=>r(s).description=o),rows:"3",placeholder:"Additional details about this resource...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[f,r(s).description]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Special Commission Rate (Optional) ",-1)),e("div",ge,[u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>r(s).special_commission_rate=o),type:"number",step:"0.01",min:"0",max:"100",placeholder:"Leave empty to use default",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[f,r(s).special_commission_rate]]),t[30]||(t[30]=e("span",{class:"absolute right-3 top-2 text-gray-500"},"%",-1))]),t[32]||(t[32]=e("p",{class:"mt-1 text-xs text-gray-500"}," Override the default commission rate for this specific resource ",-1))]),t[34]||(t[34]=e("div",{class:"bg-gray-50 border border-gray-200 rounded-lg p-4"},[e("div",{class:"flex"},[e("svg",{class:"w-5 h-5 text-gray-400 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),e("div",{class:"text-sm text-gray-700"},[e("strong",null,"Exclusive Resource Model:"),d(" Only ONE agency can own each resource. When a user applies to this resource (e.g., Harvard University), they will be directed exclusively to the assigned agency. This requires admin approval. ")])])],-1)),e("div",ye,[w(r(L),{href:l.route("admin.agency-resources.index"),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},{default:S(()=>[...t[33]||(t[33]=[d(" Cancel ",-1)])]),_:1},8,["href"]),e("button",{type:"submit",disabled:r(s).processing||!_.value,class:"px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 transition disabled:opacity-50 disabled:cursor-not-allowed"},[r(s).processing?(n(),i("span",xe,"Creating...")):(n(),i("span",fe,"Create Resource Assignment"))],8,ve)])],32)])])])]),_:1})],64))}};export{Ae as default};
