import{r as y,y as S,j as w,f as v,a as e,g as b,i as U,c as r,n as m,l as V,k as _,t as a,z as j,o as i,F as A,q as N,p as g,x as p,m as B,v as M,A as k}from"./vendor-DUGSf9MG.js";import{A as C}from"./AdminLayout-CRJ9cJUr.js";import{a as D,r as F}from"./heroicons-BVxQTyTq.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";import"./DateInput-BOMF3vob.js";import"./useBangladeshFormat-DxO2X-Ux.js";const z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},E={class:"bg-white rounded-lg shadow-md p-6 mb-8"},L={class:"flex items-start justify-between"},T={class:"text-2xl font-bold text-gray-900"},$={class:"text-gray-600"},O={class:"text-sm text-gray-500 mt-2"},G={class:"mt-4 grid grid-cols-3 gap-4"},K={class:"font-medium"},P={class:"font-medium"},H={class:"font-medium"},J={key:0,class:"mt-4 p-4 bg-gray-50 rounded-md"},Q={class:"text-sm text-gray-700 mt-1"},W={class:"mt-4"},X={class:"text-sm text-gray-500"},Y={key:0,class:"text-sm text-gray-500"},Z={class:"bg-white rounded-lg shadow-md p-6 mb-8"},I={class:"space-y-4"},ee={class:"flex items-start justify-between"},te={class:"flex items-start flex-1"},se={class:"flex-1"},oe={class:"flex items-center"},ae={class:"font-medium text-gray-900"},ne={class:"text-sm text-gray-500 mt-1"},ie={class:"text-xs text-gray-400 mt-1"},re={key:0,class:"mt-2 p-3 bg-red-50 rounded"},de={class:"text-sm text-red-700 mt-1"},le={key:1,class:"mt-2 p-3 bg-blue-50 rounded"},ue={class:"text-sm text-blue-700 mt-1"},me={key:2,class:"mt-4 space-y-3"},ce=["onUpdate:modelValue"],ge={key:0},xe=["onUpdate:modelValue"],ve={class:"flex space-x-3"},be=["onClick"],pe=["onClick"],ye=["href"],fe={key:0,class:"bg-white rounded-lg shadow-md p-6"},he={key:0},we={class:"bg-yellow-50 p-4 rounded-md"},_e={class:"text-sm text-yellow-900"},je=["disabled"],Me={__name:"Show",props:{request:Object,documents:Array,agency:Object},setup(o){const c=o,d=y({status:c.request.status,admin_notes:c.request.admin_notes||"",rejection_reason:c.request.rejection_reason||""}),l=y({});c.documents.forEach(n=>{l.value[n.id]={status:"pending",notes:"",rejection_reason:""}});const x=y(!1),q=()=>{x.value=!0,k.post(route("admin.agency-verification.update-status",c.request.id),d.value,{onFinish:()=>x.value=!1})},f=(n,t)=>{if(t==="rejected"&&!l.value[n].rejection_reason){alert("Please provide a rejection reason"),l.value[n].status="rejected";return}k.post(route("admin.agency-verification.update-document-status",n),{status:t,...l.value[n]})},h=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),R=n=>{if(!n)return"Unknown";const t=1024,s=["Bytes","KB","MB","GB"],u=Math.floor(Math.log(n)/Math.log(t));return Math.round(n/Math.pow(t,u)*100)/100+" "+s[u]};return(n,t)=>(i(),S(C,null,{default:w(()=>[v(b(U),{title:"Review Verification Request"}),e("div",z,[v(b(V),{href:n.route("admin.agency-verification.index"),class:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-6"},{default:w(()=>[v(b(D),{class:"h-4 w-4 mr-1"}),t[3]||(t[3]=_(" Back to Verification Requests ",-1))]),_:1},8,["href"]),e("div",E,[e("div",L,[e("div",null,[e("h1",T,a(o.agency.name),1),e("p",$,a(o.agency.company_name),1),e("p",O,a(o.agency.email)+" â€¢ "+a(o.agency.phone),1)]),e("span",{class:j(["px-4 py-2 rounded-full text-sm font-medium",o.request.status==="approved"?"bg-green-100 text-green-800":o.request.status==="rejected"?"bg-red-100 text-red-800":o.request.status==="under_review"?"bg-blue-100 text-blue-800":o.request.status==="requires_changes"?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"])},a(o.request.status.replace("_"," ").toUpperCase()),3)]),e("div",G,[e("div",null,[t[4]||(t[4]=e("p",{class:"text-sm text-gray-500"},"Business Type",-1)),e("p",K,a(o.agency.business_type||"N/A"),1)]),e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm text-gray-500"},"Established",-1)),e("p",P,a(o.agency.established_year||"N/A"),1)]),e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm text-gray-500"},"License Number",-1)),e("p",H,a(o.agency.license_number||"N/A"),1)])]),o.request.message?(i(),r("div",J,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-gray-900"},"Agency Message:",-1)),e("p",Q,a(o.request.message),1)])):m("",!0),e("div",W,[e("p",X,"Submitted: "+a(h(o.request.submitted_at)),1),o.request.reviewed_at?(i(),r("p",Y," Reviewed: "+a(h(o.request.reviewed_at))+" by "+a(o.request.reviewer.name),1)):m("",!0)])]),e("div",Z,[t[12]||(t[12]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Submitted Documents",-1)),e("div",I,[(i(!0),r(A,null,N(o.documents,s=>(i(),r("div",{key:s.id,class:"border rounded-lg p-4"},[e("div",ee,[e("div",te,[v(b(F),{class:"h-6 w-6 text-gray-400 mr-3 mt-1"}),e("div",se,[e("div",oe,[e("h3",ae,a(s.document_name),1),e("span",{class:j(["ml-3 px-2 py-1 text-xs rounded-full",s.status==="approved"?"bg-green-100 text-green-800":s.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},a(s.status),3)]),e("p",ne,a(s.document_type.replace("_"," ")),1),e("p",ie,a(R(s.file_size)),1),s.status==="rejected"&&s.rejection_reason?(i(),r("div",re,[t[8]||(t[8]=e("p",{class:"text-sm text-red-900"},"Rejection Reason:",-1)),e("p",de,a(s.rejection_reason),1)])):m("",!0),s.notes?(i(),r("div",le,[t[9]||(t[9]=e("p",{class:"text-sm text-blue-900"},"Notes:",-1)),e("p",ue,a(s.notes),1)])):m("",!0),s.status==="pending"?(i(),r("div",me,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),g(e("textarea",{"onUpdate:modelValue":u=>l.value[s.id].notes=u,rows:"2",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Any notes about this document..."},null,8,ce),[[p,l.value[s.id].notes]])]),l.value[s.id].status==="rejected"?(i(),r("div",ge,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Rejection Reason *",-1)),g(e("textarea",{"onUpdate:modelValue":u=>l.value[s.id].rejection_reason=u,rows:"2",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Explain why this document is being rejected..."},null,8,xe),[[p,l.value[s.id].rejection_reason]])])):m("",!0),e("div",ve,[e("button",{onClick:u=>f(s.id,"approved"),class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700"}," Approve ",8,be),e("button",{onClick:u=>f(s.id,"rejected"),class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700"}," Reject ",8,pe)])])):m("",!0)])]),e("a",{href:`/storage/${s.file_path}`,target:"_blank",class:"ml-4 text-indigo-600 hover:text-indigo-800 text-sm font-medium"}," View ",8,ye)])]))),128))])]),o.request.status!=="approved"?(i(),r("div",fe,[t[18]||(t[18]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Update Request Status",-1)),e("form",{onSubmit:B(q,["prevent"]),class:"space-y-4"},[e("div",null,[t[14]||(t[14]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-1"},"New Status",-1)),g(e("select",{id:"status","onUpdate:modelValue":t[0]||(t[0]=s=>d.value.status=s),required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[...t[13]||(t[13]=[e("option",{value:"under_review"},"Under Review",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"rejected"},"Rejected",-1),e("option",{value:"requires_changes"},"Requires Changes",-1)])],512),[[M,d.value.status]])]),e("div",null,[t[15]||(t[15]=e("label",{for:"admin_notes",class:"block text-sm font-medium text-gray-700 mb-1"},"Admin Notes",-1)),g(e("textarea",{id:"admin_notes","onUpdate:modelValue":t[1]||(t[1]=s=>d.value.admin_notes=s),rows:"4",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Internal notes about this verification..."},null,512),[[p,d.value.admin_notes]])]),d.value.status==="rejected"?(i(),r("div",he,[t[16]||(t[16]=e("label",{for:"rejection_reason",class:"block text-sm font-medium text-gray-700 mb-1"},"Rejection Reason *",-1)),g(e("textarea",{id:"rejection_reason","onUpdate:modelValue":t[2]||(t[2]=s=>d.value.rejection_reason=s),rows:"4",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Explain why the verification is being rejected..."},null,512),[[p,d.value.rejection_reason]])])):m("",!0),e("div",we,[e("p",_e,[t[17]||(t[17]=e("strong",null,"Note:",-1)),_(" The agency will be notified via email about this status change. "+a(d.value.status==="approved"?"Approving will mark all submitted documents as approved and give the agency a verified badge.":""),1)])]),e("button",{type:"submit",disabled:x.value,class:"w-full px-4 py-3 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50"},a(x.value?"Updating...":"Update Status"),9,je)],32)])):m("",!0)])]),_:1}))}};export{Me as default};
