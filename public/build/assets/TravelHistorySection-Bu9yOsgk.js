import{r as f,u as W,E as z,w as Y,c as m,a as e,f as o,g as r,j as g,k as T,F as x,q as b,t as i,m as J,p as h,o as u,v as E,x as K,b as C,A as U,n as $}from"./vendor-DUGSf9MG.js";import{F as Q}from"./FlowButton-B_7IFJCy.js";import{_ as n,a as d}from"./InputLabel-BE_Q-CXj.js";import{P as X}from"./PrimaryButton-DTr7DaKh.js";import{_ as B}from"./SecondaryButton-B58W3wCp.js";import{_ as c}from"./TextInput-DuChkXJz.js";import{_ as Z}from"./Modal-DEylfiwE.js";import{z as D,j as M,b as S,p as ee}from"./heroicons-BVxQTyTq.js";/* empty css                                                                   */import"./_plugin-vue_export-helper-DlAUqK2U.js";const te={class:"mb-rhythm-lg"},se={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},oe={class:"flex items-center gap-3"},re={class:"w-10 h-10 rounded-xl bg-indigo-600 flex items-center justify-center shadow-sm"},ae={class:"space-y-4"},le={key:0,class:"text-center py-8"},ne={key:1,class:"text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-300"},de={class:"mt-6"},ie={key:2,class:"space-y-4"},me={class:"p-4 sm:p-6"},ue={class:"flex items-start justify-between gap-3 mb-3"},ce={class:"flex-1 min-w-0"},pe={class:"flex items-center gap-2 mb-1"},ye={class:"text-base sm:text-lg font-bold text-gray-900 truncate"},ge={class:"text-sm sm:text-base text-emerald-600 font-semibold"},fe={class:"flex-shrink-0 inline-flex items-center px-2.5 py-1 bg-emerald-100 text-emerald-800 text-xs font-medium rounded-full"},ve={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-3 text-sm text-gray-600"},_e={class:"flex items-center gap-1.5"},xe={class:"flex items-center gap-1.5"},be={class:"flex items-center gap-1.5 font-medium text-emerald-600 sm:col-span-2"},he={key:0,class:"flex flex-wrap gap-2 mb-3"},we={class:"px-2.5 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-full"},ke={key:1,class:"text-sm text-gray-600 leading-relaxed"},Ve={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},Ae={class:"flex gap-2"},Te=["onClick"],Ee=["onClick"],Ce={class:"p-6"},Ue={class:"text-lg font-semibold text-gray-900 mb-4"},De={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Me={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},He=["value"],je={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Fe=["value"],ze={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},$e=["value"],Be={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Se={class:"flex items-center justify-end space-x-3 mt-6 pt-4 border-t"},Je={__name:"TravelHistorySection",props:{travelHistory:Array},setup(N){const w=N,v=f(w.travelHistory||[]),y=f(!1),k=f(!1),V=f(null),L=f(!1),s=W({user_passport_id:"",user_visa_history_id:"",country:"",city:"",purpose:"tourism",entry_date:"",exit_date:"",duration_days:"",visa_type_used:"",accommodation_type:"hotel",accommodation_address:"",transportation_mode:"air",entry_port:"",exit_port:"",sponsoring_organization:"",travel_companions:"",incidents_or_violations:"",notes:""}),H={tourism:"Tourism",business:"Business",education:"Education",family:"Family Visit",medical:"Medical",transit:"Transit"},R={hotel:"Hotel",hostel:"Hostel",airbnb:"Airbnb/Rental",family:"Family/Friends",company:"Company Accommodation",university:"University Housing",other:"Other"},O={air:"Air (Flight)",land:"Land (Bus/Car/Train)",sea:"Sea (Ship/Ferry)"};z(()=>{v.value=w.travelHistory||[]}),Y(()=>w.travelHistory,l=>{v.value=l||[]});const A=()=>{s.reset(),s.clearErrors(),y.value=!0},P=l=>{V.value=l,Object.keys(s.data()).forEach(t=>{s[t]=l[t]||""}),s.clearErrors(),k.value=!0},_=()=>{y.value=!1,k.value=!1,V.value=null,s.reset(),s.clearErrors()},j=()=>{if(s.entry_date&&s.exit_date){const l=new Date(s.entry_date),t=new Date(s.exit_date),a=Math.abs(t-l);s.duration_days=Math.ceil(a/(1e3*60*60*24))}},q=async()=>{try{await C.post(route("profile.travel-history.store"),s.data()),_(),U.reload({only:["travelHistory"]})}catch(l){l.response?.data?.errors&&Object.keys(l.response.data.errors).forEach(t=>{s.setError(t,l.response.data.errors[t][0])})}},I=async()=>{try{await C.put(route("profile.travel-history.update",V.value.id),s.data()),_(),U.reload({only:["travelHistory"]})}catch(l){l.response?.data?.errors&&Object.keys(l.response.data.errors).forEach(t=>{s.setError(t,l.response.data.errors[t][0])})}},G=async l=>{if(confirm("Are you sure you want to delete this travel record?"))try{await C.delete(route("profile.travel-history.destroy",l)),U.reload({only:["travelHistory"]})}catch(t){alert(t.response?.data?.message||"Failed to delete travel record")}},F=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return z(()=>{loadTravelHistory()}),(l,t)=>(u(),m("section",null,[e("header",te,[e("div",se,[e("div",oe,[e("div",re,[o(r(D),{class:"w-6 h-6 text-white"})]),t[16]||(t[16]=e("div",null,[e("h2",{class:"font-display font-bold text-xl text-gray-800"},"Travel History"),e("p",{class:"text-xs text-gray-500"}," International travel history for visa applications ")],-1))]),o(Q,{onClick:A,variant:"primary"},{"icon-left":g(()=>[o(r(M),{class:"w-4 h-4"})]),default:g(()=>[t[17]||(t[17]=e("span",{class:"hidden sm:inline"},"Add Travel",-1)),t[18]||(t[18]=e("span",{class:"sm:hidden"},"Add",-1))]),_:1})])]),e("div",ae,[L.value?(u(),m("div",le,[...t[19]||(t[19]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),e("p",{class:"mt-2 text-sm text-gray-500"},"Loading travel history...",-1)])])):v.value.length===0?(u(),m("div",ne,[o(r(D),{class:"mx-auto h-16 w-16 md:h-20 md:w-20 text-gray-400"}),t[21]||(t[21]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No travel history",-1)),t[22]||(t[22]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by adding your first travel record",-1)),e("div",de,[o(B,{onClick:A},{default:g(()=>[o(r(M),{class:"w-5 h-5 md:w-6 md:h-6 mr-2"}),t[20]||(t[20]=T(" Add Your First Travel ",-1))]),_:1})])])):(u(),m("div",ie,[(u(!0),m(x,null,b(v.value,a=>(u(),m("div",{key:a.id,class:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow"},[t[26]||(t[26]=e("div",{class:"h-1 bg-gradient-to-r from-emerald-500 to-teal-500"},null,-1)),e("div",me,[e("div",ue,[e("div",ce,[e("div",pe,[o(r(D),{class:"w-6 h-6 md:w-7 md:h-7 text-emerald-600 flex-shrink-0"}),e("h3",ye,i(a.country),1)]),e("p",ge,i(a.city),1)]),e("span",fe,i(H[a.purpose]||a.purpose),1)]),e("div",ve,[e("div",_e,[o(r(S),{class:"w-4 h-4 flex-shrink-0"}),e("span",null,i(F(a.entry_date)),1)]),e("div",xe,[o(r(S),{class:"w-4 h-4 flex-shrink-0"}),e("span",null,i(F(a.exit_date)),1)]),e("div",be,[t[23]||(t[23]=e("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",null,i(a.duration_days)+" days",1)])]),a.visa_type_used?(u(),m("div",he,[e("span",we,i(a.visa_type_used),1)])):$("",!0),a.notes?(u(),m("p",ke,i(a.notes),1)):$("",!0)]),e("div",Ve,[e("div",Ae,[e("button",{onClick:p=>P(a),class:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 rounded-lg font-medium text-sm transition-colors"},[...t[24]||(t[24]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),e("span",null,"Edit",-1)])],8,Te),e("button",{onClick:p=>G(a.id),class:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-white border border-red-300 text-red-600 hover:bg-red-50 rounded-lg font-medium text-sm transition-colors"},[o(r(ee),{class:"h-5 w-5"}),t[25]||(t[25]=e("span",null,"Delete",-1))],8,Ee)])])]))),128)),e("button",{onClick:A,class:"w-full inline-flex items-center justify-center gap-2 px-6 py-4 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white font-semibold rounded-xl shadow-md hover:shadow-lg transition-all duration-200 text-base"},[o(r(M),{class:"h-5 w-5"}),t[27]||(t[27]=e("span",null,"ADD MORE TRAVEL",-1))])]))]),o(Z,{show:y.value||k.value,onClose:_,"max-width":"2xl"},{default:g(()=>[e("div",Ce,[e("h2",Ue,i(y.value?"Add Travel Record":"Edit Travel Record"),1),e("form",{onSubmit:t[15]||(t[15]=J(a=>y.value?q():I(),["prevent"])),class:"space-y-4"},[e("div",De,[e("div",null,[o(n,{for:"country",value:"Country Visited *"}),o(c,{id:"country",type:"text",class:"mt-1 block w-full",modelValue:r(s).country,"onUpdate:modelValue":t[0]||(t[0]=a=>r(s).country=a),placeholder:"e.g., United Arab Emirates",required:""},null,8,["modelValue"]),o(d,{class:"mt-2",message:r(s).errors.country},null,8,["message"])]),e("div",null,[o(n,{for:"city",value:"City"}),o(c,{id:"city",type:"text",class:"mt-1 block w-full",modelValue:r(s).city,"onUpdate:modelValue":t[1]||(t[1]=a=>r(s).city=a),placeholder:"e.g., Dubai"},null,8,["modelValue"]),o(d,{class:"mt-2",message:r(s).errors.city},null,8,["message"])])]),e("div",Me,[e("div",null,[o(n,{for:"purpose",value:"Purpose *"}),h(e("select",{id:"purpose","onUpdate:modelValue":t[2]||(t[2]=a=>r(s).purpose=a),class:"mt-1 block w-full border-gray-300 focus:border-emerald-500 focus:ring-emerald-500 rounded-md shadow-sm"},[(u(),m(x,null,b(H,(a,p)=>e("option",{key:p,value:p},i(a),9,He)),64))],512),[[E,r(s).purpose]]),o(d,{class:"mt-2",message:r(s).errors.purpose},null,8,["message"])]),e("div",null,[o(n,{for:"entry_date",value:"Entry Date *"}),o(c,{id:"entry_date",type:"date",class:"mt-1 block w-full",modelValue:r(s).entry_date,"onUpdate:modelValue":t[3]||(t[3]=a=>r(s).entry_date=a),onChange:j,required:""},null,8,["modelValue"]),o(d,{class:"mt-2",message:r(s).errors.entry_date},null,8,["message"])]),e("div",null,[o(n,{for:"exit_date",value:"Exit Date *"}),o(c,{id:"exit_date",type:"date",class:"mt-1 block w-full",modelValue:r(s).exit_date,"onUpdate:modelValue":t[4]||(t[4]=a=>r(s).exit_date=a),onChange:j,required:""},null,8,["modelValue"]),o(d,{class:"mt-2",message:r(s).errors.exit_date},null,8,["message"])])]),e("div",je,[e("div",null,[o(n,{for:"duration_days",value:"Duration (Days) *"}),o(c,{id:"duration_days",type:"number",class:"mt-1 block w-full bg-gray-50",modelValue:r(s).duration_days,"onUpdate:modelValue":t[5]||(t[5]=a=>r(s).duration_days=a),readonly:""},null,8,["modelValue"]),t[28]||(t[28]=e("p",{class:"mt-1 text-xs text-gray-500"},"Auto-calculated from entry and exit dates",-1)),o(d,{class:"mt-2",message:r(s).errors.duration_days},null,8,["message"])]),e("div",null,[o(n,{for:"accommodation_type",value:"Accommodation Type"}),h(e("select",{id:"accommodation_type","onUpdate:modelValue":t[6]||(t[6]=a=>r(s).accommodation_type=a),class:"mt-1 block w-full border-gray-300 focus:border-emerald-500 focus:ring-emerald-500 rounded-md shadow-sm"},[(u(),m(x,null,b(R,(a,p)=>e("option",{key:p,value:p},i(a),9,Fe)),64))],512),[[E,r(s).accommodation_type]]),o(d,{class:"mt-2",message:r(s).errors.accommodation_type},null,8,["message"])])]),e("div",null,[o(n,{for:"accommodation_address",value:"Accommodation Address"}),o(c,{id:"accommodation_address",type:"text",class:"mt-1 block w-full",modelValue:r(s).accommodation_address,"onUpdate:modelValue":t[7]||(t[7]=a=>r(s).accommodation_address=a),placeholder:"Full address where you stayed"},null,8,["modelValue"]),o(d,{class:"mt-2",message:r(s).errors.accommodation_address},null,8,["message"])]),e("div",ze,[e("div",null,[o(n,{for:"transportation_mode",value:"Transportation"}),h(e("select",{id:"transportation_mode","onUpdate:modelValue":t[8]||(t[8]=a=>r(s).transportation_mode=a),class:"mt-1 block w-full border-gray-300 focus:border-emerald-500 focus:ring-emerald-500 rounded-md shadow-sm"},[(u(),m(x,null,b(O,(a,p)=>e("option",{key:p,value:p},i(a),9,$e)),64))],512),[[E,r(s).transportation_mode]]),o(d,{class:"mt-2",message:r(s).errors.transportation_mode},null,8,["message"])]),e("div",null,[o(n,{for:"entry_port",value:"Entry Port"}),o(c,{id:"entry_port",type:"text",class:"mt-1 block w-full",modelValue:r(s).entry_port,"onUpdate:modelValue":t[9]||(t[9]=a=>r(s).entry_port=a),placeholder:"e.g., Dubai International Airport"},null,8,["modelValue"]),o(d,{class:"mt-2",message:r(s).errors.entry_port},null,8,["message"])]),e("div",null,[o(n,{for:"exit_port",value:"Exit Port"}),o(c,{id:"exit_port",type:"text",class:"mt-1 block w-full",modelValue:r(s).exit_port,"onUpdate:modelValue":t[10]||(t[10]=a=>r(s).exit_port=a),placeholder:"e.g., Dubai International Airport"},null,8,["modelValue"]),o(d,{class:"mt-2",message:r(s).errors.exit_port},null,8,["message"])])]),e("div",Be,[e("div",null,[o(n,{for:"visa_type_used",value:"Visa Type Used"}),o(c,{id:"visa_type_used",type:"text",class:"mt-1 block w-full",modelValue:r(s).visa_type_used,"onUpdate:modelValue":t[11]||(t[11]=a=>r(s).visa_type_used=a),placeholder:"e.g., Tourist Visa, Work Visa"},null,8,["modelValue"]),o(d,{class:"mt-2",message:r(s).errors.visa_type_used},null,8,["message"])]),e("div",null,[o(n,{for:"sponsoring_organization",value:"Sponsoring Organization"}),o(c,{id:"sponsoring_organization",type:"text",class:"mt-1 block w-full",modelValue:r(s).sponsoring_organization,"onUpdate:modelValue":t[12]||(t[12]=a=>r(s).sponsoring_organization=a),placeholder:"Company or organization that sponsored"},null,8,["modelValue"]),o(d,{class:"mt-2",message:r(s).errors.sponsoring_organization},null,8,["message"])])]),e("div",null,[o(n,{for:"travel_companions",value:"Travel Companions"}),o(c,{id:"travel_companions",type:"text",class:"mt-1 block w-full",modelValue:r(s).travel_companions,"onUpdate:modelValue":t[13]||(t[13]=a=>r(s).travel_companions=a),placeholder:"Names of people you traveled with"},null,8,["modelValue"]),o(d,{class:"mt-2",message:r(s).errors.travel_companions},null,8,["message"])]),e("div",null,[o(n,{for:"notes",value:"Additional Notes"}),h(e("textarea",{id:"notes","onUpdate:modelValue":t[14]||(t[14]=a=>r(s).notes=a),rows:"3",class:"mt-1 block w-full border-gray-300 focus:border-emerald-500 focus:ring-emerald-500 rounded-md shadow-sm",placeholder:"Any additional information about this trip..."},null,512),[[K,r(s).notes]]),o(d,{class:"mt-2",message:r(s).errors.notes},null,8,["message"])]),e("div",Se,[o(B,{onClick:_,type:"button"},{default:g(()=>[...t[29]||(t[29]=[T(" Cancel ",-1)])]),_:1}),o(X,{disabled:r(s).processing},{default:g(()=>[T(i(y.value?"Add Travel Record":"Update Travel Record"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"])]))}};export{Je as default};
