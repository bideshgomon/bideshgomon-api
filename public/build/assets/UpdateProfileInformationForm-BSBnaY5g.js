import{K as h,r as w,u as P,E as k,c as u,a as s,f as o,g as t,j as p,n as v,o as c,p as V,k as b,l as F,C as S,N as C,t as U,m as E}from"./vendor-DUGSf9MG.js";import{_ as i,a as m}from"./InputLabel-BE_Q-CXj.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as d}from"./TextInput-DuChkXJz.js";import{_ as N}from"./RhythmicCard-C3WPuz9Q.js";import{F as B}from"./FlowButton-B_7IFJCy.js";import{aI as M}from"./heroicons-BVxQTyTq.js";/* empty css                                                                   */const T={class:"mb-6"},A={class:"flex items-center gap-3 mb-2"},z={class:"w-10 h-10 rounded-xl bg-blue-600 flex items-center justify-center shadow-sm"},D={class:"space-y-4 p-3 md:p-4 bg-blue-50 border border-blue-200 rounded-lg"},L={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},O={key:0},j={class:"mt-2 text-sm md:text-base text-gray-800"},R={class:"mt-2 text-sm md:text-base font-medium text-green-600"},$={class:"hidden md:flex items-center gap-4 mt-rhythm-lg"},q={key:0,class:"text-sm text-green-600 font-medium"},G={class:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4 shadow-2xl z-30 safe-area-bottom"},H=["disabled"],K={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Y={__name:"UpdateProfileInformationForm",props:{mustVerifyEmail:{type:Boolean},status:{type:String},userProfile:{type:Object,default:()=>({})}},setup(f){const l=f,x=h().props.auth.user,_=w("");console.log("UpdateProfileInformationForm - userProfile prop:",l.userProfile),console.log("UpdateProfileInformationForm - first_name:",l.userProfile?.first_name),console.log("UpdateProfileInformationForm - last_name:",l.userProfile?.last_name);const e=P({first_name:l.userProfile?.first_name||"",middle_name:l.userProfile?.middle_name||"",last_name:l.userProfile?.last_name||"",name_as_per_passport:l.userProfile?.name_as_per_passport||"",email:x.email});console.log("UpdateProfileInformationForm - form initialized:",{first_name:e.first_name,middle_name:e.middle_name,last_name:e.last_name,name_as_per_passport:e.name_as_per_passport});const g=()=>{const n=[e.first_name,e.middle_name,e.last_name].filter(a=>a&&a.trim());e.name_as_per_passport=n.join(" ").toUpperCase()};k(()=>{!e.first_name&&l.userProfile?.first_name&&(e.first_name=l.userProfile.first_name||"",e.middle_name=l.userProfile.middle_name||"",e.last_name=l.userProfile.last_name||"",e.name_as_per_passport=l.userProfile.name_as_per_passport||"",console.log("Form hydrated from userProfile onMounted:",{first_name:e.first_name,middle_name:e.middle_name,last_name:e.last_name,name_as_per_passport:e.name_as_per_passport}))});const y=()=>{console.log("=== SUBMIT FUNCTION CALLED ==="),console.log("Form data:",{first_name:e.first_name,middle_name:e.middle_name,last_name:e.last_name,name_as_per_passport:e.name_as_per_passport,email:e.email}),console.log("Route URL:",route("profile.update")),console.log("Form processing:",e.processing),_.value="";try{console.log("Calling form.patch...");const n=e.patch(route("profile.update"),{preserveScroll:!0,onBefore:()=>{console.log("onBefore callback triggered")},onStart:()=>{console.log("onStart callback triggered")},onProgress:a=>{console.log("onProgress:",a)},onSuccess:a=>{console.log("onSuccess callback triggered",a),_.value=""},onError:a=>{console.error("onError callback triggered",a),_.value="Failed to update profile information. Please check the form and try again."},onCancel:()=>{console.log("onCancel callback triggered")},onFinish:()=>{console.log("onFinish callback triggered")}});console.log("form.patch() returned:",n)}catch(n){console.error("Exception in form.patch():",n)}};return(n,a)=>(c(),u("section",null,[s("header",T,[s("div",A,[s("div",z,[o(t(M),{class:"h-6 w-6 text-white"})]),a[5]||(a[5]=s("div",null,[s("h2",{class:"font-display font-bold text-xl text-gray-800"}," Profile Information "),s("p",{class:"text-xs text-gray-500"},"Update your account details")],-1))])]),s("form",{onSubmit:E(y,["prevent"]),class:"mt-4 md:mt-6"},[o(N,{variant:"light",class:"space-y-rhythm-md"},{default:p(()=>[s("div",D,[a[7]||(a[7]=s("div",{class:"flex items-center text-sm text-blue-800"},[s("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),s("span",{class:"font-medium"},"Enter your name exactly as it appears on your passport")],-1)),s("div",L,[s("div",null,[o(i,{for:"first_name",value:"First Name *"}),o(d,{id:"first_name",type:"text",class:"mt-1 block w-full uppercase py-3 px-4 text-base rounded-lg touch-manipulation",modelValue:t(e).first_name,"onUpdate:modelValue":a[0]||(a[0]=r=>t(e).first_name=r),onInput:g,required:"",placeholder:"FIRST",autocomplete:"given-name"},null,8,["modelValue"]),o(m,{class:"mt-2",message:t(e).errors.first_name},null,8,["message"])]),s("div",null,[o(i,{for:"middle_name",value:"Middle Name (Optional)"}),o(d,{id:"middle_name",type:"text",class:"mt-1 block w-full uppercase py-3 px-4 text-base rounded-lg touch-manipulation",modelValue:t(e).middle_name,"onUpdate:modelValue":a[1]||(a[1]=r=>t(e).middle_name=r),onInput:g,placeholder:"MIDDLE",autocomplete:"additional-name"},null,8,["modelValue"]),o(m,{class:"mt-2",message:t(e).errors.middle_name},null,8,["message"])]),s("div",null,[o(i,{for:"last_name",value:"Last Name *"}),o(d,{id:"last_name",type:"text",class:"mt-1 block w-full uppercase py-3 px-4 text-base rounded-lg touch-manipulation",modelValue:t(e).last_name,"onUpdate:modelValue":a[2]||(a[2]=r=>t(e).last_name=r),onInput:g,required:"",placeholder:"LAST",autocomplete:"family-name"},null,8,["modelValue"]),o(m,{class:"mt-2",message:t(e).errors.last_name},null,8,["message"])])]),s("div",null,[o(i,{for:"name_as_per_passport",value:"Full Name (As Per Passport)"}),o(d,{id:"name_as_per_passport",type:"text",class:"mt-1 block w-full uppercase font-medium bg-gray-100 py-3 px-4 text-base rounded-lg",modelValue:t(e).name_as_per_passport,"onUpdate:modelValue":a[3]||(a[3]=r=>t(e).name_as_per_passport=r),readonly:"",placeholder:"AUTO-GENERATED FROM ABOVE"},null,8,["modelValue"]),a[6]||(a[6]=s("p",{class:"mt-1 text-xs text-gray-500"},"This will be auto-generated based on the fields above",-1)),o(m,{class:"mt-2",message:t(e).errors.name_as_per_passport},null,8,["message"])])]),s("div",null,[o(i,{for:"email",value:"Email"}),o(d,{id:"email",type:"email",class:"mt-1 block w-full py-3 px-4 text-base rounded-lg touch-manipulation",modelValue:t(e).email,"onUpdate:modelValue":a[4]||(a[4]=r=>t(e).email=r),required:"",autocomplete:"username"},null,8,["modelValue"]),o(m,{class:"mt-2",message:t(e).errors.email},null,8,["message"])]),f.mustVerifyEmail&&t(x).email_verified_at===null?(c(),u("div",O,[s("p",j,[a[9]||(a[9]=b(" Your email address is unverified. ",-1)),o(t(F),{href:n.route("verification.send"),method:"post",as:"button",class:"rounded-md text-sm md:text-base text-gray-600 underline hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},{default:p(()=>[...a[8]||(a[8]=[b(" Click here to re-send the verification email. ",-1)])]),_:1},8,["href"])]),V(s("div",R," A new verification link has been sent to your email address. ",512),[[S,f.status==="verification-link-sent"]])])):v("",!0),s("div",$,[o(B,{type:"submit",disabled:t(e).processing,loading:t(e).processing},{default:p(()=>[...a[10]||(a[10]=[b(" Save Changes ",-1)])]),_:1},8,["disabled","loading"]),o(C,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:p(()=>[t(e).recentlySuccessful?(c(),u("p",q," ✓ Saved successfully! ")):v("",!0)]),_:1})])]),_:1}),s("div",G,[s("button",{onClick:y,disabled:t(e).processing,class:"w-full bg-indigo-600 hover:bg-indigo-700 active:bg-indigo-800 disabled:bg-gray-400 text-white font-bold py-4 px-6 rounded-xl shadow-lg transition-all duration-200 active:scale-98 touch-manipulation flex items-center justify-center gap-2",type:"button"},[t(e).processing?(c(),u("svg",K,[...a[11]||(a[11]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):v("",!0),s("span",null,U(t(e).processing?"Saving...":t(e).recentlySuccessful?"✓ Saved!":"Save Changes"),1)],8,H)]),a[12]||(a[12]=s("div",{class:"md:hidden h-24"},null,-1))],32)]))}},te=I(Y,[["__scopeId","data-v-5ffc1b93"]]);export{te as default};
