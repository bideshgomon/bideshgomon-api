import{r as f,B as L,y as M,j as c,f as x,a as e,g as u,i as N,c as r,n as h,t as l,l as p,z as y,k as b,p as v,x as F,o as a,F as w,q as _,v as I,s as Q,A as q}from"./vendor-DUGSf9MG.js";import{A as z}from"./AdminLayout-CRJ9cJUr.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";import"./heroicons-BVxQTyTq.js";import"./DateInput-BOMF3vob.js";import"./useBangladeshFormat-DxO2X-Ux.js";const H={class:"py-8"},O={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},P={class:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8"},E={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},$={class:"text-2xl font-bold text-gray-900"},G={class:"bg-yellow-50 rounded-lg shadow-sm border border-yellow-200 p-6"},J={class:"text-2xl font-bold text-yellow-900"},K={class:"bg-blue-50 rounded-lg shadow-sm border border-blue-200 p-6"},W={class:"text-2xl font-bold text-blue-900"},X={class:"bg-purple-50 rounded-lg shadow-sm border border-purple-200 p-6"},Y={class:"text-2xl font-bold text-purple-900"},Z={class:"bg-green-50 rounded-lg shadow-sm border border-green-200 p-6"},ee={class:"text-2xl font-bold text-green-900"},te={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},se={class:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0"},le={class:"flex space-x-2"},oe={class:"flex space-x-2"},ae={key:0,class:"mt-4 flex items-center space-x-4"},re={class:"text-sm text-gray-600"},de=["value"],ie=["disabled"],ne={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},ue={class:"min-w-full divide-y divide-gray-200"},ge={class:"bg-gray-50"},ce={class:"px-6 py-3 text-left"},xe=["checked"],pe={class:"bg-white divide-y divide-gray-200"},ye={class:"px-6 py-4"},me=["value"],be={class:"px-6 py-4 whitespace-nowrap"},fe={class:"text-sm font-medium text-gray-900"},he={class:"px-6 py-4 whitespace-nowrap"},ve={class:"text-sm text-gray-900"},we={class:"text-xs text-gray-500"},_e={class:"px-6 py-4 whitespace-nowrap"},ke={class:"text-sm text-gray-900"},qe={class:"px-6 py-4 whitespace-nowrap"},Ae={class:"text-sm text-gray-900"},Re={class:"px-6 py-4 whitespace-nowrap"},Ce={class:"text-sm text-gray-900"},Se={class:"px-6 py-4 whitespace-nowrap"},Me={class:"px-6 py-4 whitespace-nowrap"},Ie={key:0,class:"text-sm text-gray-900"},Ve={key:1,class:"text-sm text-gray-400"},je={class:"px-6 py-4 whitespace-nowrap"},Be={key:0,class:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium"},Ue={key:1,class:"text-xs text-gray-400"},De={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},Te=["onClick"],Le={key:0,class:"mt-6"},Ne={class:"flex justify-between items-center"},Fe={class:"text-sm text-gray-600"},Qe={class:"flex space-x-2"},ze={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},He={class:"bg-white rounded-lg p-6 max-w-md w-full"},Oe={class:"text-sm text-gray-600 mb-4"},Pe=["value"],Ee={class:"flex justify-end space-x-3"},$e=["disabled"],st={__name:"Index",props:{flightRequests:{type:Object,required:!0},agencies:{type:Array,required:!0},filter:{type:String,default:"all"},search:{type:String,default:""},stats:{type:Object,required:!0}},setup(o){const m=o,k=f(m.search),i=f([]),g=f(""),n=f({show:!1,request:null,agencyId:""}),A=L(()=>m.flightRequests.data.length>0&&i.value.length===m.flightRequests.data.length),V=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),j=()=>{q.get(route("admin.flight-requests.index"),{filter:m.filter,search:k.value})},B=()=>{A.value?i.value=[]:i.value=m.flightRequests.data.map(d=>d.id)},R=()=>{i.value=[],g.value=""},U=()=>{!g.value||i.value.length===0||q.post(route("admin.flight-requests.bulk-assign"),{request_ids:i.value,agency_id:g.value},{onSuccess:()=>{R()}})},D=d=>{n.value={show:!0,request:d,agencyId:""}},C=()=>{n.value={show:!1,request:null,agencyId:""}},T=()=>{n.value.agencyId&&q.post(route("admin.flight-requests.assign",n.value.request.id),{agency_id:n.value.agencyId},{onSuccess:()=>{C()}})};return(d,t)=>(a(),M(z,null,{default:c(()=>[x(u(N),{title:"Flight Requests Management"}),e("div",H,[e("div",O,[t[26]||(t[26]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Flight Requests Management"),e("p",{class:"mt-2 text-gray-600"},"Manage and assign flight requests to agencies")],-1)),e("div",P,[e("div",E,[t[4]||(t[4]=e("div",{class:"text-sm text-gray-500 mb-1"},"Total Requests",-1)),e("div",$,l(o.stats.total),1)]),e("div",G,[t[5]||(t[5]=e("div",{class:"text-sm text-yellow-700 mb-1"},"Pending",-1)),e("div",J,l(o.stats.pending),1)]),e("div",K,[t[6]||(t[6]=e("div",{class:"text-sm text-blue-700 mb-1"},"Assigned",-1)),e("div",W,l(o.stats.assigned),1)]),e("div",X,[t[7]||(t[7]=e("div",{class:"text-sm text-purple-700 mb-1"},"Quoted",-1)),e("div",Y,l(o.stats.quoted),1)]),e("div",Z,[t[8]||(t[8]=e("div",{class:"text-sm text-green-700 mb-1"},"Completed",-1)),e("div",ee,l(o.stats.completed),1)])]),e("div",te,[e("div",se,[e("div",le,[x(u(p),{href:d.route("admin.flight-requests.index"),class:y(["px-4 py-2 rounded-lg text-sm font-medium transition",o.filter==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},{default:c(()=>[...t[9]||(t[9]=[b(" All ",-1)])]),_:1},8,["href","class"]),x(u(p),{href:d.route("admin.flight-requests.index",{filter:"pending"}),class:y(["px-4 py-2 rounded-lg text-sm font-medium transition",o.filter==="pending"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},{default:c(()=>[...t[10]||(t[10]=[b(" Pending ",-1)])]),_:1},8,["href","class"]),x(u(p),{href:d.route("admin.flight-requests.index",{filter:"assigned"}),class:y(["px-4 py-2 rounded-lg text-sm font-medium transition",o.filter==="assigned"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},{default:c(()=>[...t[11]||(t[11]=[b(" Assigned ",-1)])]),_:1},8,["href","class"]),x(u(p),{href:d.route("admin.flight-requests.index",{filter:"quoted"}),class:y(["px-4 py-2 rounded-lg text-sm font-medium transition",o.filter==="quoted"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},{default:c(()=>[...t[12]||(t[12]=[b(" Quoted ",-1)])]),_:1},8,["href","class"])]),e("div",oe,[v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>k.value=s),type:"text",placeholder:"Search by reference, route, user...",class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[F,k.value]]),e("button",{onClick:j,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"}," Search ")])]),i.value.length>0?(a(),r("div",ae,[e("span",re,l(i.value.length)+" selected",1),v(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>g.value=s),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[t[13]||(t[13]=e("option",{value:""},"Select agency...",-1)),(a(!0),r(w,null,_(o.agencies,s=>(a(),r("option",{key:s.id,value:s.id},l(s.name),9,de))),128))],512),[[I,g.value]]),e("button",{onClick:U,disabled:!g.value,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:opacity-50"}," Bulk Assign ",8,ie),e("button",{onClick:R,class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition"}," Clear ")])):h("",!0)]),e("div",ne,[e("table",ue,[e("thead",ge,[e("tr",null,[e("th",ce,[e("input",{type:"checkbox",onChange:B,checked:A.value,class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,40,xe)]),t[14]||(t[14]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Reference ",-1)),t[15]||(t[15]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User ",-1)),t[16]||(t[16]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Route ",-1)),t[17]||(t[17]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date ",-1)),t[18]||(t[18]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Budget ",-1)),t[19]||(t[19]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),t[20]||(t[20]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Assigned To ",-1)),t[21]||(t[21]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Quotes ",-1)),t[22]||(t[22]=e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",pe,[(a(!0),r(w,null,_(o.flightRequests.data,s=>(a(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",ye,[v(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=S=>i.value=S),value:s.id,class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,8,me),[[Q,i.value]])]),e("td",be,[e("div",fe,l(s.request_reference),1)]),e("td",he,[e("div",ve,l(s.user.name),1),e("div",we,l(s.user.email),1)]),e("td",_e,[e("div",ke,l(s.route_name),1)]),e("td",qe,[e("div",Ae,l(V(s.travel_date)),1)]),e("td",Re,[e("div",Ce,l(s.formatted_budget),1)]),e("td",Se,[e("span",{class:y([s.status_color,"px-2 py-1 rounded-full text-xs font-medium border"])},l(s.status.replace("_"," ").toUpperCase()),3)]),e("td",Me,[s.assigned_to?(a(),r("div",Ie,l(s.assigned_to.name),1)):(a(),r("div",Ve,"Not assigned"))]),e("td",je,[s.quotes_count>0?(a(),r("span",Be,l(s.quotes_count),1)):(a(),r("span",Ue,"0"))]),e("td",De,[x(u(p),{href:d.route("admin.flight-requests.show",s.id),class:"text-blue-600 hover:text-blue-900"},{default:c(()=>[...t[23]||(t[23]=[b(" View ",-1)])]),_:1},8,["href"]),s.status==="pending"?(a(),r("button",{key:0,onClick:S=>D(s),class:"text-green-600 hover:text-green-900"}," Assign ",8,Te)):h("",!0)])]))),128))])])]),o.flightRequests.data.length>0?(a(),r("div",Le,[e("div",Ne,[e("div",Fe," Showing "+l(o.flightRequests.from)+" to "+l(o.flightRequests.to)+" of "+l(o.flightRequests.total)+" requests ",1),e("div",Qe,[(a(!0),r(w,null,_(o.flightRequests.links,s=>(a(),M(u(p),{key:s.label,href:s.url,class:y(["px-4 py-2 border rounded-lg text-sm",s.active?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])])):h("",!0),n.value.show?(a(),r("div",ze,[e("div",He,[t[25]||(t[25]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Assign Request",-1)),e("p",Oe," Assign request "+l(n.value.request?.request_reference)+" to an agency ",1),v(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>n.value.agencyId=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4"},[t[24]||(t[24]=e("option",{value:""},"Select agency...",-1)),(a(!0),r(w,null,_(o.agencies,s=>(a(),r("option",{key:s.id,value:s.id},l(s.name)+" ("+l(s.email)+") ",9,Pe))),128))],512),[[I,n.value.agencyId]]),e("div",Ee,[e("button",{onClick:C,class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition"}," Cancel "),e("button",{onClick:T,disabled:!n.value.agencyId,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50"}," Assign ",8,$e)])])])):h("",!0)])])]),_:1}))}};export{st as default};
