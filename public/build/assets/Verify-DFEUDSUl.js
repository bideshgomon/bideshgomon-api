import{u as k,r as j,y as C,j as D,a as e,f as h,t as o,c as i,o as l,n as u,F as v,q as _,g as d,k as b,p as F,x as P,m as B,l as M,z as U}from"./vendor-DUGSf9MG.js";import{A as N}from"./AdminLayout-CRJ9cJUr.js";import{_ as T}from"./Modal-DEylfiwE.js";import{u as L}from"./useBangladeshFormat-DxO2X-Ux.js";import{ag as S,D as O}from"./heroicons-BVxQTyTq.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";import"./DateInput-BOMF3vob.js";const z={class:"max-w-7xl mx-auto py-8 px-4"},H={class:"grid grid-cols-3 gap-4 mb-8"},W={class:"bg-white shadow rounded p-4"},q={class:"text-2xl font-semibold"},E={class:"bg-white shadow rounded p-4"},I={class:"text-2xl font-semibold"},G={class:"bg-white shadow rounded p-4"},J={class:"text-2xl font-semibold"},K={class:"bg-white shadow rounded-lg p-6 mb-10"},Q={key:0,class:"text-center py-8 text-sm text-gray-500"},X={key:1,class:"overflow-x-auto"},Y={class:"min-w-full divide-y divide-gray-200"},Z={class:"divide-y divide-gray-200 bg-white"},ee={class:"px-3 py-2 text-sm"},te={class:"px-3 py-2 text-sm font-medium"},se={class:"px-3 py-2 text-sm"},ne={class:"px-3 py-2 text-sm"},oe={class:"px-3 py-2 text-sm text-right space-x-2"},le=["onClick"],ae=["onClick","disabled"],ie={class:"inline-block"},re={class:"mt-2 bg-white border rounded p-3 w-64 shadow"},de=["onClick","disabled"],ue={key:0,class:"mt-4 flex items-center justify-between"},xe={class:"text-sm text-gray-600"},pe={class:"flex gap-1"},ce={class:"bg-white shadow rounded-lg p-6"},me={key:0,class:"text-center py-8 text-sm text-gray-500"},ge={key:1,class:"overflow-x-auto"},ye={class:"min-w-full divide-y divide-gray-200"},fe={class:"divide-y divide-gray-200 bg-white"},he={class:"px-3 py-2 text-sm"},ve={class:"px-3 py-2 text-sm font-medium"},_e={class:"px-3 py-2 text-sm"},be={key:0,class:"text-xs text-red-600 mt-1"},we={class:"px-3 py-2 text-sm"},ke={class:"px-3 py-2 text-sm"},je={class:"p-6"},Ce={class:"flex items-center justify-between mb-4"},De={key:0,class:"text-sm text-gray-600 mt-1"},Ue={key:0,class:"bg-gray-100 rounded-lg p-4 min-h-[500px] flex items-center justify-center"},Ve=["src","alt"],$e=["src"],Ae={key:2,class:"text-center"},Re=["href"],Fe={class:"mt-6 flex items-center justify-between"},Pe={key:0,class:"text-sm text-gray-600"},Be={class:"flex gap-3"},Me=["disabled"],Ne={methods:{badgeClass(r){return{"bg-yellow-100 text-yellow-800":r==="pending","bg-green-100 text-green-800":r==="approved","bg-red-100 text-red-800":r==="rejected"}}}},Ge=Object.assign(Ne,{__name:"Verify",props:{pending:Object,recent:Array,counts:Object},setup(r){const m=k({}),x=k({reason:""}),{formatDate:g}=L(),a=j(null),y=j(!1);function V(n){a.value=n,y.value=!0}function p(){y.value=!1,a.value=null}function w(n){m.post(route("admin.documents.approve",n.id))}function $(n){x.post(route("admin.documents.reject",n.id),{onSuccess:()=>x.reset("reason")})}function f(n){return!n||!n.file_path?"":n.file_path.startsWith("http://")||n.file_path.startsWith("https://")?n.file_path:`/storage/documents/${n.file_path.replace(/^documents\//,"")}`}function A(n){return n?/\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(n):!1}function R(n){return n?/\.pdf$/i.test(n):!1}return(n,t)=>(l(),C(N,{title:"Verify Documents"},{default:D(()=>[e("div",z,[t[15]||(t[15]=e("h1",{class:"text-2xl font-bold mb-6"},"Document Verification",-1)),e("div",H,[e("div",W,[t[2]||(t[2]=e("p",{class:"text-sm text-gray-500"},"Pending",-1)),e("p",q,o(r.counts.pending),1)]),e("div",E,[t[3]||(t[3]=e("p",{class:"text-sm text-gray-500"},"Approved",-1)),e("p",I,o(r.counts.approved),1)]),e("div",G,[t[4]||(t[4]=e("p",{class:"text-sm text-gray-500"},"Rejected",-1)),e("p",J,o(r.counts.rejected),1)])]),e("div",K,[t[8]||(t[8]=e("h2",{class:"text-lg font-semibold mb-4"},"Pending Documents",-1)),r.pending.data.length===0?(l(),i("div",Q,"No pending documents.")):(l(),i("div",X,[e("table",Y,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"bg-gray-50"},[e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"User"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Filename"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Uploaded"),e("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Z,[(l(!0),i(v,null,_(r.pending.data,s=>(l(),i("tr",{key:s.id},[e("td",ee,o(s.user?.name||"User #"+s.user_id),1),e("td",te,o(s.document_type.replace("_"," ")),1),e("td",se,o(s.original_filename),1),e("td",ne,o(d(g)(s.created_at)),1),e("td",oe,[e("button",{onClick:c=>V(s),class:"bg-blue-600 hover:bg-blue-700 text-white text-xs px-3 py-1 rounded inline-flex items-center gap-1"},[h(d(S),{class:"h-3 w-3"}),t[5]||(t[5]=b(" View ",-1))],8,le),e("button",{onClick:c=>w(s),disabled:d(m).processing,class:"bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1 rounded"},"Approve",8,ae),e("details",ie,[t[6]||(t[6]=e("summary",{class:"cursor-pointer bg-red-600 hover:bg-red-700 text-white text-xs px-3 py-1 rounded inline-block"},"Reject",-1)),e("div",re,[F(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=c=>d(x).reason=c),rows:"3",class:"w-full border rounded p-2 text-sm",placeholder:"Reason"},null,512),[[P,d(x).reason]]),e("button",{onClick:B(c=>$(s),["prevent"]),disabled:d(x).processing,class:"mt-2 w-full bg-red-600 hover:bg-red-700 text-white text-xs px-3 py-1 rounded"},"Confirm Reject",8,de)])])])]))),128))])]),r.pending.links.length>3?(l(),i("div",ue,[e("div",xe,"Showing "+o(r.pending.data.length)+" of "+o(r.pending.total),1),e("div",pe,[(l(!0),i(v,null,_(r.pending.links,s=>(l(),C(d(M),{key:s.url+s.label,href:s.url,innerHTML:s.label,class:U(["px-2 py-1 rounded text-xs",s.active?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"])},null,8,["href","innerHTML","class"]))),128))])])):u("",!0)]))]),e("div",ce,[t[10]||(t[10]=e("h2",{class:"text-lg font-semibold mb-4"},"Recently Reviewed",-1)),r.recent.length===0?(l(),i("div",me,"No reviewed documents yet.")):(l(),i("div",ge,[e("table",ye,[t[9]||(t[9]=e("thead",null,[e("tr",{class:"bg-gray-50"},[e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"User"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Reviewed By"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Reviewed At")])],-1)),e("tbody",fe,[(l(!0),i(v,null,_(r.recent,s=>(l(),i("tr",{key:s.id},[e("td",he,o(s.user?.name||"User #"+s.user_id),1),e("td",ve,o(s.document_type.replace("_"," ")),1),e("td",_e,[e("span",{class:U([n.badgeClass(s.status),"px-2 py-1 rounded-full text-xs font-semibold"])},o(s.status),3),s.rejection_reason?(l(),i("div",be,o(s.rejection_reason),1)):u("",!0)]),e("td",we,o(s.reviewer?.name||"—"),1),e("td",ke,o(s.reviewed_at?d(g)(s.reviewed_at):"—"),1)]))),128))])])]))]),h(T,{show:y.value,onClose:p,"max-width":"4xl"},{default:D(()=>[e("div",je,[e("div",Ce,[e("div",null,[t[11]||(t[11]=e("h2",{class:"text-xl font-semibold text-gray-900"},"Document Preview",-1)),a.value?(l(),i("p",De,o(a.value.document_type.replace("_"," "))+" - "+o(a.value.original_filename),1)):u("",!0)]),e("button",{onClick:p,class:"text-gray-400 hover:text-gray-600"},[h(d(O),{class:"h-6 w-6"})])]),a.value?(l(),i("div",Ue,[A(a.value.original_filename)?(l(),i("img",{key:0,src:f(a.value),alt:a.value.original_filename,class:"max-w-full max-h-[600px] object-contain rounded shadow-lg"},null,8,Ve)):R(a.value.original_filename)?(l(),i("iframe",{key:1,src:f(a.value),class:"w-full h-[600px] rounded shadow-lg bg-white",frameborder:"0"},null,8,$e)):(l(),i("div",Ae,[t[12]||(t[12]=e("p",{class:"text-gray-600 mb-4"},"Preview not available for this file type",-1)),e("a",{href:f(a.value),target:"_blank",download:"",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Download "+o(a.value.original_filename),9,Re)]))])):u("",!0),e("div",Fe,[a.value?(l(),i("div",Pe,[e("p",null,[t[13]||(t[13]=e("strong",null,"User:",-1)),b(" "+o(a.value.user?.name||"User #"+a.value.user_id),1)]),e("p",null,[t[14]||(t[14]=e("strong",null,"Uploaded:",-1)),b(" "+o(d(g)(a.value.created_at)),1)])])):u("",!0),e("div",Be,[a.value?(l(),i("button",{key:0,onClick:t[1]||(t[1]=s=>{w(a.value),p()}),disabled:d(m).processing,class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg"}," Approve Document ",8,Me)):u("",!0),e("button",{onClick:p,class:"bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg"}," Close ")])])])]),_:1},8,["show"])])]),_:1}))}});export{Ge as default};
