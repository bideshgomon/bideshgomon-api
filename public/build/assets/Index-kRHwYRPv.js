import{r as y,u as P,c as m,f as d,g as a,i as W,j as i,a as e,l as C,k as r,p as b,D as G,x as D,v as N,o as l,F as M,q as U,t as o,n as c,z as X,y as L,A as T}from"./vendor-DUGSf9MG.js";import{A as Y}from"./AdminLayout-CRJ9cJUr.js";import{_ as F}from"./Modal-DEylfiwE.js";import{D as O}from"./DangerButton-DKYA0XiA.js";import{_ as V}from"./SecondaryButton-B58W3wCp.js";import{P as Z}from"./PrimaryButton-DTr7DaKh.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";import"./heroicons-BVxQTyTq.js";import"./DateInput-BOMF3vob.js";import"./useBangladeshFormat-DxO2X-Ux.js";const ee={class:"py-12"},te={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},se={class:"mb-8 flex justify-between items-center"},oe={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},re={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ne=["value"],ae={class:"bg-white shadow-sm rounded-lg overflow-hidden"},ie={class:"min-w-full divide-y divide-gray-200"},le={class:"bg-white divide-y divide-gray-200"},de={class:"px-6 py-4"},ue={class:"text-sm font-medium text-gray-900"},me={class:"text-sm text-gray-500"},pe={class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800"},ce={class:"px-6 py-4"},ge={class:"text-sm text-gray-900"},xe={class:"text-sm text-gray-500"},ye={class:"px-6 py-4 text-sm text-gray-900"},fe={class:"px-6 py-4"},ve={class:"text-sm text-gray-900"},be={key:0,class:"text-sm text-gray-500"},_e={class:"px-6 py-4"},he={key:0,class:"mt-1"},we={class:"px-6 py-4"},ke={class:"text-sm text-gray-900"},Ce={key:0,class:"text-xs text-gray-500"},Ae={class:"px-6 py-4 text-right text-sm font-medium"},je={class:"flex items-center justify-end gap-3"},Se=["onClick"],Re=["onClick"],De=["onClick"],Me={key:0},Te={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},Fe={class:"flex items-center justify-between"},Ve={class:"text-sm text-gray-700"},Be={class:"flex space-x-2"},Pe={class:"p-6"},Ne={class:"text-sm text-gray-600 mb-4"},Ue={class:"font-medium"},Le={class:"font-medium"},Oe={class:"mb-4"},$e={class:"flex justify-end gap-3"},Ee={class:"p-6"},Ie={class:"text-sm text-gray-600 mb-4"},qe={class:"font-medium"},ze={class:"font-medium"},Ke={class:"mb-4"},He={key:0,class:"mt-1 text-sm text-red-600"},Je={class:"flex justify-end gap-3"},Qe={class:"p-6"},We={class:"text-sm text-gray-600 mb-4"},Ge={class:"font-medium"},Xe={class:"flex justify-end gap-3"},mt={__name:"Index",props:{resources:Object,filters:Object},setup(p){const A=p,_=y(A.filters?.status||""),h=y(A.filters?.resource_type||""),w=y(A.filters?.search||""),j=y(!1),S=y(!1),R=y(!1),u=y(null),f=P({admin_notes:""}),x=P({admin_notes:""}),B={university:"University",school:"School",language_center:"Language Center",training_institute:"Training Institute",job_portal:"Job Portal",other:"Other"},k=()=>{T.get(route("admin.agency-resources.index"),{status:_.value,resource_type:h.value,search:w.value},{preserveState:!0,preserveScroll:!0})},$=()=>{_.value="",h.value="",w.value="",T.get(route("admin.agency-resources.index"))},E=n=>{u.value=n,f.admin_notes="",j.value=!0},I=n=>{u.value=n,x.admin_notes="",S.value=!0},q=n=>{u.value=n,R.value=!0},g=()=>{j.value=!1,S.value=!1,R.value=!1,u.value=null},z=()=>{f.post(route("admin.agency-resources.approve",u.value.id),{preserveScroll:!0,onSuccess:()=>{g()}})},K=()=>{x.post(route("admin.agency-resources.reject",u.value.id),{preserveScroll:!0,onSuccess:()=>{g()}})},H=()=>{T.delete(route("admin.agency-resources.destroy",u.value.id),{preserveScroll:!0,onSuccess:()=>{g()}})},J=n=>n.is_active?n.is_approved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",Q=n=>n.is_active?n.is_approved?"Approved":"Pending":"Inactive";return(n,t)=>(l(),m(M,null,[d(a(W),{title:"Agency Resources"}),d(Y,null,{default:i(()=>[e("div",ee,[e("div",te,[e("div",se,[t[6]||(t[6]=e("div",null,[e("h2",{class:"text-3xl font-bold text-gray-900"},"Agency Resources"),e("p",{class:"mt-1 text-sm text-gray-600"},"Manage exclusive resource assignments (universities, schools, etc.)")],-1)),d(a(C),{href:n.route("admin.agency-resources.create"),class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 transition"},{default:i(()=>[...t[5]||(t[5]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),r(" Add Resource ",-1)])]),_:1},8,["href"])]),e("div",oe,[e("div",re,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search",-1)),b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>w.value=s),onKeyup:G(k,["enter"]),type:"text",placeholder:"Resource name, agency...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,544),[[D,w.value]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>_.value=s),onChange:k,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[...t[8]||(t[8]=[e("option",{value:""},"All Status",-1),e("option",{value:"pending"},"Pending Approval",-1),e("option",{value:"approved"},"Approved",-1)])],544),[[N,_.value]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Resource Type",-1)),b(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>h.value=s),onChange:k,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[10]||(t[10]=e("option",{value:""},"All Types",-1)),(l(),m(M,null,U(B,(s,v)=>e("option",{key:v,value:v},o(s),9,ne)),64))],544),[[N,h.value]])]),e("div",{class:"flex items-end gap-2"},[e("button",{onClick:k,class:"flex-1 px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition"}," Apply "),e("button",{onClick:$,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition"}," Clear ")])])]),e("div",ae,[e("table",ie,[t[15]||(t[15]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Resource"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Agency"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Service"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Location"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Commission"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",le,[(l(!0),m(M,null,U(p.resources.data,s=>(l(),m("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",de,[e("div",ue,o(s.resource_name),1),e("div",me,[e("span",pe,o(B[s.resource_type]),1)])]),e("td",ce,[e("div",ge,o(s.agency?.name),1),e("div",xe,o(s.agency?.email),1)]),e("td",ye,o(s.service_module?.name),1),e("td",fe,[e("div",ve,o(s.country?.name),1),s.city?(l(),m("div",be,o(s.city),1)):c("",!0)]),e("td",_e,[e("span",{class:X([J(s),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},o(Q(s)),3),s.is_primary_owner?(l(),m("div",he,[...t[12]||(t[12]=[e("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800"}," Primary Owner ",-1)])])):c("",!0)]),e("td",we,[e("div",ke,o(s.special_commission_rate||"—")+"%",1),s.special_commission_rate?c("",!0):(l(),m("div",Ce,"Uses default rate"))]),e("td",Ae,[e("div",je,[s.is_approved?c("",!0):(l(),m("button",{key:0,onClick:v=>E(s),class:"text-green-600 hover:text-green-900 font-medium"}," Approve ",8,Se)),s.is_approved?c("",!0):(l(),m("button",{key:1,onClick:v=>I(s),class:"text-red-600 hover:text-red-900 font-medium"}," Reject ",8,Re)),d(a(C),{href:n.route("admin.agency-resources.edit",s.id),class:"text-gray-600 hover:text-gray-900 font-medium transition"},{default:i(()=>[...t[13]||(t[13]=[r(" Edit ",-1)])]),_:1},8,["href"]),e("button",{onClick:v=>q(s),class:"text-red-600 hover:text-red-900 font-medium transition"}," Delete ",8,De)])])]))),128)),p.resources.data.length===0?(l(),m("tr",Me,[...t[14]||(t[14]=[e("td",{colspan:"7",class:"px-6 py-12 text-center text-gray-500"}," No resources found. Start by adding an exclusive resource assignment. ",-1)])])):c("",!0)])]),p.resources.data.length>0?(l(),m("div",Te,[e("div",Fe,[e("div",Ve," Showing "+o(p.resources.from)+" to "+o(p.resources.to)+" of "+o(p.resources.total)+" results ",1),e("div",Be,[p.resources.prev_page_url?(l(),L(a(C),{key:0,href:p.resources.prev_page_url,class:"px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50"},{default:i(()=>[...t[16]||(t[16]=[r(" Previous ",-1)])]),_:1},8,["href"])):c("",!0),p.resources.next_page_url?(l(),L(a(C),{key:1,href:p.resources.next_page_url,class:"px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50"},{default:i(()=>[...t[17]||(t[17]=[r(" Next ",-1)])]),_:1},8,["href"])):c("",!0)])])])):c("",!0)]),d(F,{show:j.value,onClose:g},{default:i(()=>[e("div",Pe,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Approve Resource Assignment",-1)),e("p",Ne,[t[18]||(t[18]=r(" Approve ",-1)),e("span",Ue,o(u.value?.resource_name),1),t[19]||(t[19]=r(" for ",-1)),e("span",Le,o(u.value?.agency?.name),1),t[20]||(t[20]=r("? ",-1))]),e("div",Oe,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Admin Notes (Optional)",-1)),b(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>a(f).admin_notes=s),rows:"3",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Add any notes about this approval..."},null,512),[[D,a(f).admin_notes]])]),e("div",$e,[d(V,{onClick:g},{default:i(()=>[...t[22]||(t[22]=[r("Cancel",-1)])]),_:1}),d(Z,{onClick:z,disabled:a(f).processing},{default:i(()=>[...t[23]||(t[23]=[r("Approve",-1)])]),_:1},8,["disabled"])])])]),_:1},8,["show"]),d(F,{show:S.value,onClose:g},{default:i(()=>[e("div",Ee,[t[31]||(t[31]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Reject Resource Assignment",-1)),e("p",Ie,[t[25]||(t[25]=r(" Reject ",-1)),e("span",qe,o(u.value?.resource_name),1),t[26]||(t[26]=r(" for ",-1)),e("span",ze,o(u.value?.agency?.name),1),t[27]||(t[27]=r("? ",-1))]),e("div",Ke,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reason for Rejection *",-1)),b(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>a(x).admin_notes=s),rows:"3",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500",placeholder:"Explain why this resource is being rejected...",required:""},null,512),[[D,a(x).admin_notes]]),a(x).errors.admin_notes?(l(),m("p",He,o(a(x).errors.admin_notes),1)):c("",!0)]),e("div",Je,[d(V,{onClick:g},{default:i(()=>[...t[29]||(t[29]=[r("Cancel",-1)])]),_:1}),d(O,{onClick:K,disabled:a(x).processing||!a(x).admin_notes},{default:i(()=>[...t[30]||(t[30]=[r("Reject",-1)])]),_:1},8,["disabled"])])])]),_:1},8,["show"]),d(F,{show:R.value,onClose:g},{default:i(()=>[e("div",Qe,[t[36]||(t[36]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Delete Resource Assignment",-1)),e("p",We,[t[32]||(t[32]=r(" Are you sure you want to delete ",-1)),e("span",Ge,o(u.value?.resource_name),1),t[33]||(t[33]=r("? This action cannot be undone. ",-1))]),t[37]||(t[37]=e("div",{class:"bg-red-50 border border-red-200 rounded-md p-4 mb-4"},[e("p",{class:"text-sm text-red-800"}," ⚠️ Warning: This will permanently remove the resource assignment. ")],-1)),e("div",Xe,[d(V,{onClick:g},{default:i(()=>[...t[34]||(t[34]=[r("Cancel",-1)])]),_:1}),d(O,{onClick:H},{default:i(()=>[...t[35]||(t[35]=[r("Delete Permanently",-1)])]),_:1})])])]),_:1},8,["show"])])])]),_:1})],64))}};export{mt as default};
