import{r as v,c as s,f as y,g as _,i as z,j as C,a as e,n as u,l as H,k as g,t as n,z as E,o as i,m as P,p as f,F as b,q as M,v as j,x as k,b as A,A as D}from"./vendor-DUGSf9MG.js";import{_ as T}from"./AuthenticatedLayout-DdydbOmd.js";import"./ApplicationLogo-C-JvH4va.js";import"./SlowConnectionWarning-Bjc2MtGl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-CzeJHxXq.js";import"./heroicons-BVxQTyTq.js";const U={class:"py-6 sm:py-12"},L={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},F={class:"mb-6 sm:mb-8"},q={class:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4"},I={class:"mt-2 text-sm text-gray-600"},O={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},R={class:"p-6 sm:p-8"},$={key:0,class:"space-y-6"},J={class:"border-b border-gray-200 pb-6"},W={class:"flex items-center gap-2"},G={class:"text-lg font-semibold text-gray-900"},K={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},Q={class:"flex items-center gap-2"},X={class:"text-base text-gray-900"},Y={class:"flex items-center gap-2"},Z={class:"text-base text-gray-900"},ee={class:"flex items-center gap-2"},te={class:"text-base text-gray-900"},oe={class:"flex items-center gap-2"},se={class:"text-base text-gray-900"},ie={class:"flex items-center gap-2"},ne={class:"text-base text-gray-900"},ae={class:"border-t border-gray-200 pt-6"},re={key:0,class:"text-base text-gray-900 whitespace-pre-wrap"},le={key:1,class:"text-base text-gray-400 italic"},de={key:0,class:"border-t border-gray-200 pt-6"},ue={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},ce={class:"text-sm text-gray-900 whitespace-pre-wrap"},pe=["value"],me={key:0,class:"mt-2 text-sm text-red-600"},ge=["min"],fe={key:0,class:"mt-2 text-sm text-red-600"},ve={key:0,class:"mt-2 text-sm text-red-600"},xe=["value"],ye={key:0,class:"mt-2 text-sm text-red-600"},be={key:0,class:"mt-2 text-sm text-red-600"},ke={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex flex-col-reverse sm:flex-row gap-3 sm:justify-between"},we={class:"flex flex-col-reverse sm:flex-row gap-3"},he={class:"flex flex-col-reverse sm:flex-row gap-3"},_e=["disabled"],Ce={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},Me={key:0,class:"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4"},je={class:"flex"},Ae={class:"ml-3"},De={class:"text-sm text-yellow-700"},Pe={__name:"Show",props:{application:Object,countries:Array,canEdit:Boolean,canDelete:Boolean},setup(o){const l=o,p=v(!1),m=v(!1),r=v({}),d=v({destination_country_id:l.application.destination_country_id,intended_travel_date:l.application.intended_travel_date||"",duration_days:l.application.duration_days||"",profession:l.application.profession||"",user_notes:l.application.user_notes||""}),V=["Student","Job Holder","Business Person"],B={pending:"bg-gray-100 text-gray-800",submitted:"bg-blue-100 text-blue-800",processing:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-600"},S={pending:"Pending",submitted:"Submitted",processing:"Processing",approved:"Approved",rejected:"Rejected",cancelled:"Cancelled"},w=()=>{p.value=!p.value,p.value||(d.value={destination_country_id:l.application.destination_country_id,intended_travel_date:l.application.intended_travel_date||"",duration_days:l.application.duration_days||"",profession:l.application.profession||"",user_notes:l.application.user_notes||""},r.value={})},h=async()=>{m.value=!0,r.value={};try{await A.put(route("api.work-visa-applications.update",l.application.id),d.value),D.reload({only:["application"]}),p.value=!1}catch(c){c.response&&c.response.status===422?r.value=c.response.data.errors||{}:(console.error("Error updating application:",c),alert("Failed to update application. Please try again."))}finally{m.value=!1}},N=async()=>{if(confirm("Are you sure you want to delete this application? This action cannot be undone."))try{await A.delete(route("api.work-visa-applications.destroy",l.application.id)),D.visit(route("profile.work-visa.index"))}catch(c){console.error("Error deleting application:",c),alert("Failed to delete application. Please try again.")}},x=c=>c?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not specified";return(c,t)=>(i(),s(b,null,[y(_(z),{title:"Work Visa Application Details"}),y(T,null,{default:C(()=>[e("div",U,[e("div",L,[e("div",F,[y(_(H),{href:c.route("profile.work-visa.index"),class:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-4"},{default:C(()=>[...t[5]||(t[5]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),g(" Back to Applications ",-1)])]),_:1},8,["href"]),e("div",q,[e("div",null,[t[6]||(t[6]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-gray-900"},"Application Details",-1)),e("p",I,"Reference: "+n(o.application.application_reference),1)]),e("span",{class:E(["px-4 py-2 rounded-full text-sm font-medium inline-flex items-center w-fit",B[o.application.status]||"bg-gray-100 text-gray-800"])},n(S[o.application.status]||o.application.status),3)])]),e("div",O,[e("div",R,[p.value?(i(),s("form",{key:1,onSubmit:P(h,["prevent"]),class:"space-y-6"},[e("div",null,[t[22]||(t[22]=e("label",{for:"destination_country_id",class:"block text-sm font-medium text-gray-700 mb-2"},[g(" Destination Country "),e("span",{class:"text-red-500"},"*")],-1)),f(e("select",{id:"destination_country_id","onUpdate:modelValue":t[0]||(t[0]=a=>d.value.destination_country_id=a),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:""},[t[21]||(t[21]=e("option",{value:""},"Select destination country",-1)),(i(!0),s(b,null,M(o.countries,a=>(i(),s("option",{key:a.id,value:a.id},n(a.name),9,pe))),128))],512),[[j,d.value.destination_country_id]]),r.value.destination_country_id?(i(),s("p",me,n(r.value.destination_country_id[0]),1)):u("",!0)]),e("div",null,[t[23]||(t[23]=e("label",{for:"intended_travel_date",class:"block text-sm font-medium text-gray-700 mb-2"}," Intended Travel Date ",-1)),f(e("input",{type:"date",id:"intended_travel_date","onUpdate:modelValue":t[1]||(t[1]=a=>d.value.intended_travel_date=a),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",min:new Date().toISOString().split("T")[0]},null,8,ge),[[k,d.value.intended_travel_date]]),r.value.intended_travel_date?(i(),s("p",fe,n(r.value.intended_travel_date[0]),1)):u("",!0)]),e("div",null,[t[24]||(t[24]=e("label",{for:"duration_days",class:"block text-sm font-medium text-gray-700 mb-2"}," Duration (Days) ",-1)),f(e("input",{type:"number",id:"duration_days","onUpdate:modelValue":t[2]||(t[2]=a=>d.value.duration_days=a),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",min:"1",max:"365",placeholder:"e.g., 14"},null,512),[[k,d.value.duration_days]]),r.value.duration_days?(i(),s("p",ve,n(r.value.duration_days[0]),1)):u("",!0)]),e("div",null,[t[26]||(t[26]=e("label",{for:"profession",class:"block text-sm font-medium text-gray-700 mb-2"}," Profession ",-1)),f(e("select",{id:"profession","onUpdate:modelValue":t[3]||(t[3]=a=>d.value.profession=a),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[t[25]||(t[25]=e("option",{value:""},"Select your profession",-1)),(i(),s(b,null,M(V,a=>e("option",{key:a,value:a},n(a),9,xe)),64))],512),[[j,d.value.profession]]),r.value.profession?(i(),s("p",ye,n(r.value.profession[0]),1)):u("",!0)]),e("div",null,[t[27]||(t[27]=e("label",{for:"user_notes",class:"block text-sm font-medium text-gray-700 mb-2"}," Additional Notes ",-1)),f(e("textarea",{id:"user_notes","onUpdate:modelValue":t[4]||(t[4]=a=>d.value.user_notes=a),rows:"6",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Any additional information or special requirements..."},null,512),[[k,d.value.user_notes]]),r.value.user_notes?(i(),s("p",be,n(r.value.user_notes[0]),1)):u("",!0)])],32)):(i(),s("div",$,[e("div",J,[t[8]||(t[8]=e("h3",{class:"text-sm font-medium text-gray-500 mb-2"},"Destination Country",-1)),e("div",W,[t[7]||(t[7]=e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",G,n(o.application.destination_country?.name||"Not specified"),1)])]),e("div",K,[e("div",null,[t[10]||(t[10]=e("h3",{class:"text-sm font-medium text-gray-500 mb-2"},"Profession",-1)),e("div",Q,[t[9]||(t[9]=e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),e("p",X,n(o.application.profession||"Not specified"),1)])]),e("div",null,[t[12]||(t[12]=e("h3",{class:"text-sm font-medium text-gray-500 mb-2"},"Intended Travel Date",-1)),e("div",Y,[t[11]||(t[11]=e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("p",Z,n(x(o.application.intended_travel_date)),1)])]),e("div",null,[t[14]||(t[14]=e("h3",{class:"text-sm font-medium text-gray-500 mb-2"},"Duration",-1)),e("div",ee,[t[13]||(t[13]=e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",te,n(o.application.duration_days?`${o.application.duration_days} days`:"Not specified"),1)])]),e("div",null,[t[16]||(t[16]=e("h3",{class:"text-sm font-medium text-gray-500 mb-2"},"Application Date",-1)),e("div",oe,[t[15]||(t[15]=e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",se,n(x(o.application.created_at)),1)])]),e("div",null,[t[18]||(t[18]=e("h3",{class:"text-sm font-medium text-gray-500 mb-2"},"Last Updated",-1)),e("div",ie,[t[17]||(t[17]=e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),e("p",ne,n(x(o.application.updated_at)),1)])])]),e("div",ae,[t[19]||(t[19]=e("h3",{class:"text-sm font-medium text-gray-500 mb-2"},"Additional Notes",-1)),o.application.user_notes?(i(),s("p",re,n(o.application.user_notes),1)):(i(),s("p",le,"No additional notes provided"))]),o.application.admin_notes?(i(),s("div",de,[t[20]||(t[20]=e("h3",{class:"text-sm font-medium text-gray-500 mb-2"},"Admin Notes",-1)),e("div",ue,[e("p",ce,n(o.application.admin_notes),1)])])):u("",!0)]))]),e("div",ke,[e("div",we,[o.canDelete&&!p.value?(i(),s("button",{key:0,onClick:N,class:"inline-flex items-center justify-center px-6 py-2 border border-red-300 rounded-lg text-sm font-medium text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors"},[...t[28]||(t[28]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),g(" Delete Application ",-1)])])):u("",!0)]),e("div",he,[p.value?(i(),s("button",{key:0,onClick:w,type:"button",class:"inline-flex items-center justify-center px-6 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors"}," Cancel ")):u("",!0),!p.value&&o.canEdit?(i(),s("button",{key:1,onClick:w,class:"inline-flex items-center justify-center px-6 py-2 bg-indigo-600 border border-transparent rounded-lg text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors"},[...t[29]||(t[29]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),g(" Edit Application ",-1)])])):u("",!0),p.value?(i(),s("button",{key:2,onClick:h,disabled:m.value,class:"inline-flex items-center justify-center px-6 py-2 bg-indigo-600 border border-transparent rounded-lg text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[m.value?(i(),s("svg",Ce,[...t[30]||(t[30]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):u("",!0),g(" "+n(m.value?"Saving...":"Save Changes"),1)],8,_e)):u("",!0)])])]),!o.canEdit&&!p.value?(i(),s("div",Me,[e("div",je,[t[31]||(t[31]=e("svg",{class:"h-5 w-5 text-yellow-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",Ae,[e("p",De," This application cannot be edited because it has been "+n(o.application.status)+". Please contact support if you need to make changes. ",1)])])])):u("",!0)])])]),_:1})],64))}};export{Pe as default};
