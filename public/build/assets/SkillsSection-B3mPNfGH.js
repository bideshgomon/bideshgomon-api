import{r as u,u as Y,B as A,E as G,c as n,a as s,f as r,g as i,j as p,k as $,F as m,q as y,t as c,m as H,p as S,o as a,v as F,z as V,Z as K,H as Q}from"./vendor-DUGSf9MG.js";import{_ as T}from"./Modal-DEylfiwE.js";import{F as X}from"./FlowButton-B_7IFJCy.js";import{P}from"./PrimaryButton-DTr7DaKh.js";import{_ as Z}from"./SecondaryButton-B58W3wCp.js";import{_ as g,a as M}from"./InputLabel-BE_Q-CXj.js";import{_ as U}from"./TextInput-DuChkXJz.js";import{X as I,j as L,l as J,aA as W,p as ee}from"./heroicons-BVxQTyTq.js";/* empty css                                                                   */import"./_plugin-vue_export-helper-DlAUqK2U.js";const se={class:"mb-rhythm-lg"},te={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},le={class:"flex items-center gap-3"},oe={class:"w-10 h-10 rounded-xl bg-purple-600 flex items-center justify-center shadow-sm"},re={class:"space-y-6"},ie={key:0,class:"flex justify-center py-12"},ne={key:1,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},ae={class:"mt-6"},de={key:2,class:"space-y-4"},ce={class:"p-4"},ue={class:"flex items-start justify-between gap-3 mb-3"},pe={class:"flex-1 min-w-0"},fe={class:"text-base font-bold text-gray-900"},me={class:"text-xs text-gray-500 mt-0.5"},ye={class:"mb-3"},ge={class:"flex items-center justify-between text-xs text-gray-600 mb-1.5"},ve={class:"font-semibold"},xe={class:"h-2 bg-gray-200 rounded-full overflow-hidden"},_e={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},be={class:"flex gap-2"},he=["onClick"],we=["onClick"],ke={class:"p-6"},Ce={class:"text-lg font-medium text-gray-900 mb-4"},Ee={class:"space-y-4"},je={class:"relative mt-1"},Ae=["value"],$e=["disabled"],Se=["label"],Ve=["value"],Me={class:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-2"},Le=["value"],Be={class:"flex items-center justify-end gap-4 pt-4 border-t"},Ge={__name:"SkillsSection",props:{userProfile:Object},setup(Fe){const v=u([]),k=u([]),C=u(!1),E=u(!1),f=u(!1),j=u(null),x=u(""),_=u("All"),o=Y({skill_id:"",proficiency_level:"Intermediate",years_of_experience:"0"}),D=["Beginner","Intermediate","Advanced","Expert"],B=A(()=>["All",...new Set(k.value.map(e=>e.category))]),N=A(()=>{let l=k.value;if(_.value!=="All"&&(l=l.filter(e=>e.category===_.value)),x.value){const e=x.value.toLowerCase();l=l.filter(t=>t.name.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e))}return l});A(()=>{const l={};return v.value.forEach(e=>{const t=e.skill.category||"Other";l[t]||(l[t]=[]),l[t].push(e)}),l}),G(()=>{b(),O()});const b=async()=>{C.value=!0;try{const l=await axios.get(route("api.profile.skills.index"));v.value=l.data}catch(l){console.error("Error fetching user skills:",l)}finally{C.value=!1}},O=async()=>{try{const l=await axios.get(route("api.skills.index"));k.value=l.data}catch(l){console.error("Error fetching all skills:",l)}},h=(l=null)=>{l?(f.value=!0,j.value=l.id,o.skill_id=l.skill_id,o.proficiency_level=l.proficiency_level,o.years_of_experience=l.years_of_experience):(f.value=!1,j.value=null,o.reset()),E.value=!0},w=()=>{E.value=!1,o.reset(),o.clearErrors()},q=()=>{f.value?(o.processing=!0,axios.put(route("api.profile.skills.update",j.value),{proficiency_level:o.proficiency_level,years_of_experience:o.years_of_experience}).then(()=>{o.processing=!1,w(),b()}).catch(l=>{o.processing=!1,l.response?.data?.errors&&Object.keys(l.response.data.errors).forEach(e=>{o.errors[e]=l.response.data.errors[e][0]})})):(o.processing=!0,axios.post(route("api.profile.skills.store"),{skill_id:o.skill_id,proficiency_level:o.proficiency_level,years_of_experience:o.years_of_experience}).then(()=>{o.processing=!1,w(),b()}).catch(l=>{o.processing=!1,l.response?.data?.errors&&Object.keys(l.response.data.errors).forEach(e=>{o.errors[e]=l.response.data.errors[e][0]})}))},z=l=>{confirm("Are you sure you want to remove this skill?")&&axios.delete(route("api.profile.skills.destroy",l)).then(()=>{b()}).catch(e=>{console.error("Error deleting skill:",e),alert("Failed to delete skill")})},R=l=>({Beginner:"bg-gray-100 text-gray-800",Intermediate:"bg-blue-100 text-blue-800",Advanced:"bg-purple-100 text-purple-800",Expert:"bg-green-100 text-green-800"})[l]||"bg-gray-100 text-gray-800";return(l,e)=>(a(),n("section",null,[s("header",se,[s("div",te,[s("div",le,[s("div",oe,[r(i(I),{class:"w-6 h-6 text-white"})]),e[8]||(e[8]=s("div",null,[s("h2",{class:"font-display font-bold text-xl text-gray-800"},"Skills & Expertise"),s("p",{class:"text-xs text-gray-500"}," Professional skills and proficiency levels ")],-1))]),r(X,{onClick:e[0]||(e[0]=t=>h()),variant:"primary"},{"icon-left":p(()=>[r(i(L),{class:"w-4 h-4"})]),default:p(()=>[e[9]||(e[9]=s("span",{class:"hidden sm:inline"},"Add Skill",-1)),e[10]||(e[10]=s("span",{class:"sm:hidden"},"Add",-1))]),_:1})])]),s("div",re,[C.value?(a(),n("div",ie,[...e[11]||(e[11]=[s("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1)])])):v.value.length===0?(a(),n("div",ne,[r(i(I),{class:"mx-auto h-12 w-12 text-gray-400"}),e[13]||(e[13]=s("h3",{class:"mt-2 text-sm font-semibold text-gray-900"},"No skills added",-1)),e[14]||(e[14]=s("p",{class:"mt-1 text-sm text-gray-500"},"Get started by adding your first skill.",-1)),s("div",ae,[r(P,{onClick:e[1]||(e[1]=t=>h())},{default:p(()=>[r(i(L),{class:"w-5 h-5 md:w-6 md:h-6 mr-2"}),e[12]||(e[12]=$(" Add Your First Skill ",-1))]),_:1})])])):(a(),n("div",de,[(a(!0),n(m,null,y(v.value,t=>(a(),n("div",{key:t.id,class:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow"},[e[18]||(e[18]=s("div",{class:"h-1 bg-gradient-to-r from-indigo-500 to-purple-500"},null,-1)),s("div",ce,[s("div",ue,[s("div",pe,[s("h3",fe,c(t.skill.name),1),s("p",me,c(t.skill.category||"Skill"),1)]),s("span",{class:V([R(t.proficiency_level),"px-2.5 py-1 text-xs font-medium rounded-full flex-shrink-0"])},c(t.proficiency_level),3)]),s("div",ye,[s("div",ge,[e[15]||(e[15]=s("span",null,"Proficiency",-1)),s("span",ve,c(t.years_of_experience>0?t.years_of_experience:0)+" years",1)]),s("div",xe,[s("div",{class:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-300",style:Q({width:(t.proficiency_level==="Expert"?"100":t.proficiency_level==="Advanced"?"75":t.proficiency_level==="Intermediate"?"50":"25")+"%"})},null,4)])])]),s("div",_e,[s("div",be,[s("button",{onClick:d=>h(t),class:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 rounded-lg font-medium text-sm transition-colors touch-manipulation"},[r(i(W),{class:"h-5 w-5"}),e[16]||(e[16]=s("span",null,"Edit",-1))],8,he),s("button",{onClick:d=>z(t.id),class:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-white border border-red-300 text-red-600 hover:bg-red-50 rounded-lg font-medium text-sm transition-colors touch-manipulation"},[r(i(ee),{class:"h-5 w-5"}),e[17]||(e[17]=s("span",null,"Delete",-1))],8,we)])])]))),128)),s("button",{onClick:e[2]||(e[2]=t=>h()),class:"w-full inline-flex items-center justify-center gap-2 px-6 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-semibold rounded-xl shadow-md hover:shadow-lg transition-all duration-200 text-base"},[r(i(L),{class:"h-5 w-5"}),e[19]||(e[19]=s("span",null,"ADD MORE SKILLS",-1))])]))]),r(T,{show:E.value,onClose:w,"max-width":"2xl"},{default:p(()=>[s("div",ke,[s("h3",Ce,c(f.value?"Edit Skill":"Add New Skill"),1),s("form",{onSubmit:H(q,["prevent"]),class:"space-y-6"},[s("div",Ee,[s("div",null,[r(g,{for:"search",value:"Search Skills"}),s("div",je,[r(i(J),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),r(U,{id:"search",modelValue:x.value,"onUpdate:modelValue":e[3]||(e[3]=t=>x.value=t),type:"text",class:"pl-10 w-full",placeholder:"Search by name..."},null,8,["modelValue"])])]),s("div",null,[r(g,{for:"category-filter",value:"Filter by Category"}),S(s("select",{id:"category-filter","onUpdate:modelValue":e[4]||(e[4]=t=>_.value=t),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(a(!0),n(m,null,y(B.value,t=>(a(),n("option",{key:t,value:t},c(t),9,Ae))),128))],512),[[F,_.value]])])]),s("div",null,[r(g,{for:"skill_id",value:"Select Skill *"}),S(s("select",{id:"skill_id","onUpdate:modelValue":e[5]||(e[5]=t=>i(o).skill_id=t),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",disabled:f.value},[e[20]||(e[20]=s("option",{value:""},"Choose a skill...",-1)),(a(!0),n(m,null,y(B.value.filter(t=>t!=="All"),t=>(a(),n("optgroup",{key:t,label:t},[(a(!0),n(m,null,y(N.value.filter(d=>d.category===t),d=>(a(),n("option",{key:d.id,value:d.id},c(d.name),9,Ve))),128))],8,Se))),128))],8,$e),[[F,i(o).skill_id]]),r(M,{class:"mt-2",message:i(o).errors?.skill_id},null,8,["message"])]),s("div",null,[r(g,{for:"proficiency_level",value:"Proficiency Level *"}),s("div",Me,[(a(),n(m,null,y(D,t=>s("label",{key:t,class:V(["relative flex items-center justify-center p-3 cursor-pointer rounded-lg border-2 transition",i(o).proficiency_level===t?"border-indigo-600 bg-indigo-50":"border-gray-300 hover:border-gray-400"])},[S(s("input",{type:"radio",value:t,"onUpdate:modelValue":e[6]||(e[6]=d=>i(o).proficiency_level=d),class:"sr-only"},null,8,Le),[[K,i(o).proficiency_level]]),s("span",{class:V(i(o).proficiency_level===t?"text-indigo-900 font-semibold":"text-gray-900")},c(t),3)],2)),64))]),r(M,{class:"mt-2",message:i(o).errors?.proficiency_level},null,8,["message"])]),s("div",null,[r(g,{for:"years_of_experience",value:"Years of Experience"}),r(U,{id:"years_of_experience",modelValue:i(o).years_of_experience,"onUpdate:modelValue":e[7]||(e[7]=t=>i(o).years_of_experience=t),type:"number",min:"0",max:"50",class:"mt-1 block w-full"},null,8,["modelValue"]),r(M,{class:"mt-2",message:i(o).errors?.years_of_experience},null,8,["message"])]),s("div",Be,[r(Z,{onClick:w,type:"button",class:"w-full sm:w-auto py-3 px-6 text-base touch-manipulation justify-center",style:{"min-height":"48px"}},{default:p(()=>[...e[21]||(e[21]=[$(" Cancel ",-1)])]),_:1}),r(P,{disabled:i(o).processing,class:"w-full sm:w-auto py-3 px-6 text-base touch-manipulation justify-center",style:{"min-height":"48px"}},{default:p(()=>[$(c(l.editMode?"Update Skill":"Add Skill"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"])]))}};export{Ge as default};
